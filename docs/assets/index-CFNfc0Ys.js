(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function Hy(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Fu={exports:{}},is={},Uu={exports:{}},J={};var hp;function $y(){if(hp)return J;hp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=v&&C[v]||C["@@iterator"],typeof C=="function"?C:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,V={};function K(C,R,X){this.props=C,this.context=R,this.refs=V,this.updater=X||O}K.prototype.isReactComponent={},K.prototype.setState=function(C,R){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,R,"setState")},K.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function Pe(){}Pe.prototype=K.prototype;function be(C,R,X){this.props=C,this.context=R,this.refs=V,this.updater=X||O}var Ae=be.prototype=new Pe;Ae.constructor=be,M(Ae,K.prototype),Ae.isPureReactComponent=!0;var Te=Array.isArray,tt=Object.prototype.hasOwnProperty,Oe={current:null},Be={key:!0,ref:!0,__self:!0,__source:!0};function nt(C,R,X){var ee,ie={},se=null,he=null;if(R!=null)for(ee in R.ref!==void 0&&(he=R.ref),R.key!==void 0&&(se=""+R.key),R)tt.call(R,ee)&&!Be.hasOwnProperty(ee)&&(ie[ee]=R[ee]);var ae=arguments.length-2;if(ae===1)ie.children=X;else if(1<ae){for(var ve=Array(ae),pt=0;pt<ae;pt++)ve[pt]=arguments[pt+2];ie.children=ve}if(C&&C.defaultProps)for(ee in ae=C.defaultProps,ae)ie[ee]===void 0&&(ie[ee]=ae[ee]);return{$$typeof:i,type:C,key:se,ref:he,props:ie,_owner:Oe.current}}function yt(C,R){return{$$typeof:i,type:C.type,key:R,ref:C.ref,props:C.props,_owner:C._owner}}function Rt(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function tr(C){var R={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(X){return R[X]})}var Ht=/\/+/g;function ft(C,R){return typeof C=="object"&&C!==null&&C.key!=null?tr(""+C.key):R.toString(36)}function Pt(C,R,X,ee,ie){var se=typeof C;(se==="undefined"||se==="boolean")&&(C=null);var he=!1;if(C===null)he=!0;else switch(se){case"string":case"number":he=!0;break;case"object":switch(C.$$typeof){case i:case e:he=!0}}if(he)return he=C,ie=ie(he),C=ee===""?"."+ft(he,0):ee,Te(ie)?(X="",C!=null&&(X=C.replace(Ht,"$&/")+"/"),Pt(ie,R,X,"",function(pt){return pt})):ie!=null&&(Rt(ie)&&(ie=yt(ie,X+(!ie.key||he&&he.key===ie.key?"":(""+ie.key).replace(Ht,"$&/")+"/")+C)),R.push(ie)),1;if(he=0,ee=ee===""?".":ee+":",Te(C))for(var ae=0;ae<C.length;ae++){se=C[ae];var ve=ee+ft(se,ae);he+=Pt(se,R,X,ve,ie)}else if(ve=S(C),typeof ve=="function")for(C=ve.call(C),ae=0;!(se=C.next()).done;)se=se.value,ve=ee+ft(se,ae++),he+=Pt(se,R,X,ve,ie);else if(se==="object")throw R=String(C),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return he}function $t(C,R,X){if(C==null)return C;var ee=[],ie=0;return Pt(C,ee,"","",function(se){return R.call(X,se,ie++)}),ee}function rt(C){if(C._status===-1){var R=C._result;R=R(),R.then(function(X){(C._status===0||C._status===-1)&&(C._status=1,C._result=X)},function(X){(C._status===0||C._status===-1)&&(C._status=2,C._result=X)}),C._status===-1&&(C._status=0,C._result=R)}if(C._status===1)return C._result.default;throw C._result}var Se={current:null},L={transition:null},$={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:L,ReactCurrentOwner:Oe};function U(){throw Error("act(...) is not supported in production builds of React.")}return J.Children={map:$t,forEach:function(C,R,X){$t(C,function(){R.apply(this,arguments)},X)},count:function(C){var R=0;return $t(C,function(){R++}),R},toArray:function(C){return $t(C,function(R){return R})||[]},only:function(C){if(!Rt(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},J.Component=K,J.Fragment=n,J.Profiler=l,J.PureComponent=be,J.StrictMode=s,J.Suspense=m,J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,J.act=U,J.cloneElement=function(C,R,X){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var ee=M({},C.props),ie=C.key,se=C.ref,he=C._owner;if(R!=null){if(R.ref!==void 0&&(se=R.ref,he=Oe.current),R.key!==void 0&&(ie=""+R.key),C.type&&C.type.defaultProps)var ae=C.type.defaultProps;for(ve in R)tt.call(R,ve)&&!Be.hasOwnProperty(ve)&&(ee[ve]=R[ve]===void 0&&ae!==void 0?ae[ve]:R[ve])}var ve=arguments.length-2;if(ve===1)ee.children=X;else if(1<ve){ae=Array(ve);for(var pt=0;pt<ve;pt++)ae[pt]=arguments[pt+2];ee.children=ae}return{$$typeof:i,type:C.type,key:ie,ref:se,props:ee,_owner:he}},J.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:u,_context:C},C.Consumer=C},J.createElement=nt,J.createFactory=function(C){var R=nt.bind(null,C);return R.type=C,R},J.createRef=function(){return{current:null}},J.forwardRef=function(C){return{$$typeof:f,render:C}},J.isValidElement=Rt,J.lazy=function(C){return{$$typeof:w,_payload:{_status:-1,_result:C},_init:rt}},J.memo=function(C,R){return{$$typeof:g,type:C,compare:R===void 0?null:R}},J.startTransition=function(C){var R=L.transition;L.transition={};try{C()}finally{L.transition=R}},J.unstable_act=U,J.useCallback=function(C,R){return Se.current.useCallback(C,R)},J.useContext=function(C){return Se.current.useContext(C)},J.useDebugValue=function(){},J.useDeferredValue=function(C){return Se.current.useDeferredValue(C)},J.useEffect=function(C,R){return Se.current.useEffect(C,R)},J.useId=function(){return Se.current.useId()},J.useImperativeHandle=function(C,R,X){return Se.current.useImperativeHandle(C,R,X)},J.useInsertionEffect=function(C,R){return Se.current.useInsertionEffect(C,R)},J.useLayoutEffect=function(C,R){return Se.current.useLayoutEffect(C,R)},J.useMemo=function(C,R){return Se.current.useMemo(C,R)},J.useReducer=function(C,R,X){return Se.current.useReducer(C,R,X)},J.useRef=function(C){return Se.current.useRef(C)},J.useState=function(C){return Se.current.useState(C)},J.useSyncExternalStore=function(C,R,X){return Se.current.useSyncExternalStore(C,R,X)},J.useTransition=function(){return Se.current.useTransition()},J.version="18.3.1",J}var fp;function Ec(){return fp||(fp=1,Uu.exports=$y()),Uu.exports}var pp;function Gy(){if(pp)return is;pp=1;var i=Ec(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,g){var w,v={},S=null,O=null;g!==void 0&&(S=""+g),m.key!==void 0&&(S=""+m.key),m.ref!==void 0&&(O=m.ref);for(w in m)s.call(m,w)&&!u.hasOwnProperty(w)&&(v[w]=m[w]);if(f&&f.defaultProps)for(w in m=f.defaultProps,m)v[w]===void 0&&(v[w]=m[w]);return{$$typeof:e,type:f,key:S,ref:O,props:v,_owner:l.current}}return is.Fragment=n,is.jsx=d,is.jsxs=d,is}var mp;function Ky(){return mp||(mp=1,Fu.exports=Gy()),Fu.exports}var Y=Ky(),Qo={},zu={exports:{}},ut={},ju={exports:{}},Wu={};var gp;function qy(){return gp||(gp=1,(function(i){function e(L,$){var U=L.length;L.push($);e:for(;0<U;){var C=U-1>>>1,R=L[C];if(0<l(R,$))L[C]=$,L[U]=R,U=C;else break e}}function n(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var $=L[0],U=L.pop();if(U!==$){L[0]=U;e:for(var C=0,R=L.length,X=R>>>1;C<X;){var ee=2*(C+1)-1,ie=L[ee],se=ee+1,he=L[se];if(0>l(ie,U))se<R&&0>l(he,ie)?(L[C]=he,L[se]=U,C=se):(L[C]=ie,L[ee]=U,C=ee);else if(se<R&&0>l(he,U))L[C]=he,L[se]=U,C=se;else break e}}return $}function l(L,$){var U=L.sortIndex-$.sortIndex;return U!==0?U:L.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();i.unstable_now=function(){return d.now()-f}}var m=[],g=[],w=1,v=null,S=3,O=!1,M=!1,V=!1,K=typeof setTimeout=="function"?setTimeout:null,Pe=typeof clearTimeout=="function"?clearTimeout:null,be=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ae(L){for(var $=n(g);$!==null;){if($.callback===null)s(g);else if($.startTime<=L)s(g),$.sortIndex=$.expirationTime,e(m,$);else break;$=n(g)}}function Te(L){if(V=!1,Ae(L),!M)if(n(m)!==null)M=!0,rt(tt);else{var $=n(g);$!==null&&Se(Te,$.startTime-L)}}function tt(L,$){M=!1,V&&(V=!1,Pe(nt),nt=-1),O=!0;var U=S;try{for(Ae($),v=n(m);v!==null&&(!(v.expirationTime>$)||L&&!tr());){var C=v.callback;if(typeof C=="function"){v.callback=null,S=v.priorityLevel;var R=C(v.expirationTime<=$);$=i.unstable_now(),typeof R=="function"?v.callback=R:v===n(m)&&s(m),Ae($)}else s(m);v=n(m)}if(v!==null)var X=!0;else{var ee=n(g);ee!==null&&Se(Te,ee.startTime-$),X=!1}return X}finally{v=null,S=U,O=!1}}var Oe=!1,Be=null,nt=-1,yt=5,Rt=-1;function tr(){return!(i.unstable_now()-Rt<yt)}function Ht(){if(Be!==null){var L=i.unstable_now();Rt=L;var $=!0;try{$=Be(!0,L)}finally{$?ft():(Oe=!1,Be=null)}}else Oe=!1}var ft;if(typeof be=="function")ft=function(){be(Ht)};else if(typeof MessageChannel<"u"){var Pt=new MessageChannel,$t=Pt.port2;Pt.port1.onmessage=Ht,ft=function(){$t.postMessage(null)}}else ft=function(){K(Ht,0)};function rt(L){Be=L,Oe||(Oe=!0,ft())}function Se(L,$){nt=K(function(){L(i.unstable_now())},$)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(L){L.callback=null},i.unstable_continueExecution=function(){M||O||(M=!0,rt(tt))},i.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):yt=0<L?Math.floor(1e3/L):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return n(m)},i.unstable_next=function(L){switch(S){case 1:case 2:case 3:var $=3;break;default:$=S}var U=S;S=$;try{return L()}finally{S=U}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var U=S;S=L;try{return $()}finally{S=U}},i.unstable_scheduleCallback=function(L,$,U){var C=i.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?C+U:C):U=C,L){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=U+R,L={id:w++,callback:$,priorityLevel:L,startTime:U,expirationTime:R,sortIndex:-1},U>C?(L.sortIndex=U,e(g,L),n(m)===null&&L===n(g)&&(V?(Pe(nt),nt=-1):V=!0,Se(Te,U-C))):(L.sortIndex=R,e(m,L),M||O||(M=!0,rt(tt))),L},i.unstable_shouldYield=tr,i.unstable_wrapCallback=function(L){var $=S;return function(){var U=S;S=$;try{return L.apply(this,arguments)}finally{S=U}}}})(Wu)),Wu}var _p;function Qy(){return _p||(_p=1,ju.exports=qy()),ju.exports}var vp;function Yy(){if(vp)return ut;vp=1;var i=Ec(),e=Qy();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function u(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(l[t]=r,t=0;t<r.length;t++)s.add(r[t])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},v={};function S(t){return m.call(v,t)?!0:m.call(w,t)?!1:g.test(t)?v[t]=!0:(w[t]=!0,!1)}function O(t,r,o,a){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return a?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M(t,r,o,a){if(r===null||typeof r>"u"||O(t,r,o,a))return!0;if(a)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function V(t,r,o,a,c,h,p){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=h,this.removeEmptyString=p}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){K[t]=new V(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];K[r]=new V(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){K[t]=new V(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){K[t]=new V(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){K[t]=new V(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){K[t]=new V(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){K[t]=new V(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){K[t]=new V(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){K[t]=new V(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pe=/[\-:]([a-z])/g;function be(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Pe,be);K[r]=new V(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Pe,be);K[r]=new V(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Pe,be);K[r]=new V(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){K[t]=new V(t,1,!1,t.toLowerCase(),null,!1,!1)}),K.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){K[t]=new V(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ae(t,r,o,a){var c=K.hasOwnProperty(r)?K[r]:null;(c!==null?c.type!==0:a||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(M(r,o,c,a)&&(o=null),a||c===null?S(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):c.mustUseProperty?t[c.propertyName]=o===null?c.type===3?!1:"":o:(r=c.attributeName,a=c.attributeNamespace,o===null?t.removeAttribute(r):(c=c.type,o=c===3||c===4&&o===!0?"":""+o,a?t.setAttributeNS(a,r,o):t.setAttribute(r,o))))}var Te=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tt=Symbol.for("react.element"),Oe=Symbol.for("react.portal"),Be=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),yt=Symbol.for("react.profiler"),Rt=Symbol.for("react.provider"),tr=Symbol.for("react.context"),Ht=Symbol.for("react.forward_ref"),ft=Symbol.for("react.suspense"),Pt=Symbol.for("react.suspense_list"),$t=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),L=Symbol.iterator;function $(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var U=Object.assign,C;function R(t){if(C===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);C=r&&r[1]||""}return`
`+C+t}var X=!1;function ee(t,r){if(!t||X)return"";X=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(k){var a=k}Reflect.construct(t,[],r)}else{try{r.call()}catch(k){a=k}t.call(r.prototype)}else{try{throw Error()}catch(k){a=k}t()}}catch(k){if(k&&a&&typeof k.stack=="string"){for(var c=k.stack.split(`
`),h=a.stack.split(`
`),p=c.length-1,_=h.length-1;1<=p&&0<=_&&c[p]!==h[_];)_--;for(;1<=p&&0<=_;p--,_--)if(c[p]!==h[_]){if(p!==1||_!==1)do if(p--,_--,0>_||c[p]!==h[_]){var y=`
`+c[p].replace(" at new "," at ");return t.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",t.displayName)),y}while(1<=p&&0<=_);break}}}finally{X=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?R(t):""}function ie(t){switch(t.tag){case 5:return R(t.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return t=ee(t.type,!1),t;case 11:return t=ee(t.type.render,!1),t;case 1:return t=ee(t.type,!0),t;default:return""}}function se(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Be:return"Fragment";case Oe:return"Portal";case yt:return"Profiler";case nt:return"StrictMode";case ft:return"Suspense";case Pt:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tr:return(t.displayName||"Context")+".Consumer";case Rt:return(t._context.displayName||"Context")+".Provider";case Ht:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $t:return r=t.displayName||null,r!==null?r:se(t.type)||"Memo";case rt:r=t._payload,t=t._init;try{return se(t(r))}catch{}}return null}function he(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(r);case 8:return r===nt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ae(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ve(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pt(t){var r=ve(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),a=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,h=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return c.call(this)},set:function(p){a=""+p,h.call(this,p)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Us(t){t._valueTracker||(t._valueTracker=pt(t))}function _d(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),a="";return t&&(a=ve(t)?t.checked?"true":"false":t.value),t=a,t!==o?(r.setValue(t),!0):!1}function zs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hl(t,r){var o=r.checked;return U({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function vd(t,r){var o=r.defaultValue==null?"":r.defaultValue,a=r.checked!=null?r.checked:r.defaultChecked;o=ae(r.value!=null?r.value:o),t._wrapperState={initialChecked:a,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function yd(t,r){r=r.checked,r!=null&&Ae(t,"checked",r,!1)}function $l(t,r){yd(t,r);var o=ae(r.value),a=r.type;if(o!=null)a==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Gl(t,r.type,o):r.hasOwnProperty("defaultValue")&&Gl(t,r.type,ae(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function wd(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var a=r.type;if(!(a!=="submit"&&a!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Gl(t,r,o){(r!=="number"||zs(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var yi=Array.isArray;function Rr(t,r,o,a){if(t=t.options,r){r={};for(var c=0;c<o.length;c++)r["$"+o[c]]=!0;for(o=0;o<t.length;o++)c=r.hasOwnProperty("$"+t[o].value),t[o].selected!==c&&(t[o].selected=c),c&&a&&(t[o].defaultSelected=!0)}else{for(o=""+ae(o),r=null,c=0;c<t.length;c++){if(t[c].value===o){t[c].selected=!0,a&&(t[c].defaultSelected=!0);return}r!==null||t[c].disabled||(r=t[c])}r!==null&&(r.selected=!0)}}function Kl(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return U({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ed(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(yi(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:ae(o)}}function Sd(t,r){var o=ae(r.value),a=ae(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),a!=null&&(t.defaultValue=""+a)}function Cd(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Id(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ql(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Id(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var js,Td=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,a,c){MSApp.execUnsafeLocalFunction(function(){return t(r,o,a,c)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(js=js||document.createElement("div"),js.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=js.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function wi(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q_=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(t){q_.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Ei[r]=Ei[t]})});function kd(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Ei.hasOwnProperty(t)&&Ei[t]?(""+r).trim():r+"px"}function Nd(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var a=o.indexOf("--")===0,c=kd(o,r[o],a);o==="float"&&(o="cssFloat"),a?t.setProperty(o,c):t[o]=c}}var Q_=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ql(t,r){if(r){if(Q_[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function Yl(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xl=null;function Jl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zl=null,Pr=null,Ar=null;function Rd(t){if(t=Bi(t)){if(typeof Zl!="function")throw Error(n(280));var r=t.stateNode;r&&(r=uo(r),Zl(t.stateNode,t.type,r))}}function Pd(t){Pr?Ar?Ar.push(t):Ar=[t]:Pr=t}function Ad(){if(Pr){var t=Pr,r=Ar;if(Ar=Pr=null,Rd(t),r)for(t=0;t<r.length;t++)Rd(r[t])}}function Od(t,r){return t(r)}function xd(){}var ea=!1;function Dd(t,r,o){if(ea)return t(r,o);ea=!0;try{return Od(t,r,o)}finally{ea=!1,(Pr!==null||Ar!==null)&&(xd(),Ad())}}function Si(t,r){var o=t.stateNode;if(o===null)return null;var a=uo(o);if(a===null)return null;o=a[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var ta=!1;if(f)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){ta=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{ta=!1}function Y_(t,r,o,a,c,h,p,_,y){var k=Array.prototype.slice.call(arguments,3);try{r.apply(o,k)}catch(P){this.onError(P)}}var Ii=!1,Ws=null,Vs=!1,na=null,X_={onError:function(t){Ii=!0,Ws=t}};function J_(t,r,o,a,c,h,p,_,y){Ii=!1,Ws=null,Y_.apply(X_,arguments)}function Z_(t,r,o,a,c,h,p,_,y){if(J_.apply(this,arguments),Ii){if(Ii){var k=Ws;Ii=!1,Ws=null}else throw Error(n(198));Vs||(Vs=!0,na=k)}}function nr(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function Ld(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Md(t){if(nr(t)!==t)throw Error(n(188))}function ev(t){var r=t.alternate;if(!r){if(r=nr(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,a=r;;){var c=o.return;if(c===null)break;var h=c.alternate;if(h===null){if(a=c.return,a!==null){o=a;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===o)return Md(c),t;if(h===a)return Md(c),r;h=h.sibling}throw Error(n(188))}if(o.return!==a.return)o=c,a=h;else{for(var p=!1,_=c.child;_;){if(_===o){p=!0,o=c,a=h;break}if(_===a){p=!0,a=c,o=h;break}_=_.sibling}if(!p){for(_=h.child;_;){if(_===o){p=!0,o=h,a=c;break}if(_===a){p=!0,a=h,o=c;break}_=_.sibling}if(!p)throw Error(n(189))}}if(o.alternate!==a)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function bd(t){return t=ev(t),t!==null?Fd(t):null}function Fd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Fd(t);if(r!==null)return r;t=t.sibling}return null}var Ud=e.unstable_scheduleCallback,zd=e.unstable_cancelCallback,tv=e.unstable_shouldYield,nv=e.unstable_requestPaint,ke=e.unstable_now,rv=e.unstable_getCurrentPriorityLevel,ra=e.unstable_ImmediatePriority,jd=e.unstable_UserBlockingPriority,Bs=e.unstable_NormalPriority,iv=e.unstable_LowPriority,Wd=e.unstable_IdlePriority,Hs=null,Gt=null;function sv(t){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Hs,t,void 0,(t.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:av,ov=Math.log,lv=Math.LN2;function av(t){return t>>>=0,t===0?32:31-(ov(t)/lv|0)|0}var $s=64,Gs=4194304;function Ti(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ks(t,r){var o=t.pendingLanes;if(o===0)return 0;var a=0,c=t.suspendedLanes,h=t.pingedLanes,p=o&268435455;if(p!==0){var _=p&~c;_!==0?a=Ti(_):(h&=p,h!==0&&(a=Ti(h)))}else p=o&~c,p!==0?a=Ti(p):h!==0&&(a=Ti(h));if(a===0)return 0;if(r!==0&&r!==a&&(r&c)===0&&(c=a&-a,h=r&-r,c>=h||c===16&&(h&4194240)!==0))return r;if((a&4)!==0&&(a|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=a;0<r;)o=31-At(r),c=1<<o,a|=t[o],r&=~c;return a}function uv(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cv(t,r){for(var o=t.suspendedLanes,a=t.pingedLanes,c=t.expirationTimes,h=t.pendingLanes;0<h;){var p=31-At(h),_=1<<p,y=c[p];y===-1?((_&o)===0||(_&a)!==0)&&(c[p]=uv(_,r)):y<=r&&(t.expiredLanes|=_),h&=~_}}function ia(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vd(){var t=$s;return $s<<=1,($s&4194240)===0&&($s=64),t}function sa(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function ki(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-At(r),t[r]=o}function dv(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<o;){var c=31-At(o),h=1<<c;r[c]=0,a[c]=-1,t[c]=-1,o&=~h}}function oa(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var a=31-At(o),c=1<<a;c&r|t[a]&r&&(t[a]|=r),o&=~c}}var ue=0;function Bd(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Hd,la,$d,Gd,Kd,aa=!1,qs=[],En=null,Sn=null,Cn=null,Ni=new Map,Ri=new Map,In=[],hv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qd(t,r){switch(t){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Ni.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ri.delete(r.pointerId)}}function Pi(t,r,o,a,c,h){return t===null||t.nativeEvent!==h?(t={blockedOn:r,domEventName:o,eventSystemFlags:a,nativeEvent:h,targetContainers:[c]},r!==null&&(r=Bi(r),r!==null&&la(r)),t):(t.eventSystemFlags|=a,r=t.targetContainers,c!==null&&r.indexOf(c)===-1&&r.push(c),t)}function fv(t,r,o,a,c){switch(r){case"focusin":return En=Pi(En,t,r,o,a,c),!0;case"dragenter":return Sn=Pi(Sn,t,r,o,a,c),!0;case"mouseover":return Cn=Pi(Cn,t,r,o,a,c),!0;case"pointerover":var h=c.pointerId;return Ni.set(h,Pi(Ni.get(h)||null,t,r,o,a,c)),!0;case"gotpointercapture":return h=c.pointerId,Ri.set(h,Pi(Ri.get(h)||null,t,r,o,a,c)),!0}return!1}function Qd(t){var r=rr(t.target);if(r!==null){var o=nr(r);if(o!==null){if(r=o.tag,r===13){if(r=Ld(o),r!==null){t.blockedOn=r,Kd(t.priority,function(){$d(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qs(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=ca(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var a=new o.constructor(o.type,o);Xl=a,o.target.dispatchEvent(a),Xl=null}else return r=Bi(o),r!==null&&la(r),t.blockedOn=o,!1;r.shift()}return!0}function Yd(t,r,o){Qs(t)&&o.delete(r)}function pv(){aa=!1,En!==null&&Qs(En)&&(En=null),Sn!==null&&Qs(Sn)&&(Sn=null),Cn!==null&&Qs(Cn)&&(Cn=null),Ni.forEach(Yd),Ri.forEach(Yd)}function Ai(t,r){t.blockedOn===r&&(t.blockedOn=null,aa||(aa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pv)))}function Oi(t){function r(c){return Ai(c,t)}if(0<qs.length){Ai(qs[0],t);for(var o=1;o<qs.length;o++){var a=qs[o];a.blockedOn===t&&(a.blockedOn=null)}}for(En!==null&&Ai(En,t),Sn!==null&&Ai(Sn,t),Cn!==null&&Ai(Cn,t),Ni.forEach(r),Ri.forEach(r),o=0;o<In.length;o++)a=In[o],a.blockedOn===t&&(a.blockedOn=null);for(;0<In.length&&(o=In[0],o.blockedOn===null);)Qd(o),o.blockedOn===null&&In.shift()}var Or=Te.ReactCurrentBatchConfig,Ys=!0;function mv(t,r,o,a){var c=ue,h=Or.transition;Or.transition=null;try{ue=1,ua(t,r,o,a)}finally{ue=c,Or.transition=h}}function gv(t,r,o,a){var c=ue,h=Or.transition;Or.transition=null;try{ue=4,ua(t,r,o,a)}finally{ue=c,Or.transition=h}}function ua(t,r,o,a){if(Ys){var c=ca(t,r,o,a);if(c===null)Na(t,r,a,Xs,o),qd(t,a);else if(fv(c,t,r,o,a))a.stopPropagation();else if(qd(t,a),r&4&&-1<hv.indexOf(t)){for(;c!==null;){var h=Bi(c);if(h!==null&&Hd(h),h=ca(t,r,o,a),h===null&&Na(t,r,a,Xs,o),h===c)break;c=h}c!==null&&a.stopPropagation()}else Na(t,r,a,null,o)}}var Xs=null;function ca(t,r,o,a){if(Xs=null,t=Jl(a),t=rr(t),t!==null)if(r=nr(t),r===null)t=null;else if(o=r.tag,o===13){if(t=Ld(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Xs=t,null}function Xd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rv()){case ra:return 1;case jd:return 4;case Bs:case iv:return 16;case Wd:return 536870912;default:return 16}default:return 16}}var Tn=null,da=null,Js=null;function Jd(){if(Js)return Js;var t,r=da,o=r.length,a,c="value"in Tn?Tn.value:Tn.textContent,h=c.length;for(t=0;t<o&&r[t]===c[t];t++);var p=o-t;for(a=1;a<=p&&r[o-a]===c[h-a];a++);return Js=c.slice(t,1<a?1-a:void 0)}function Zs(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function eo(){return!0}function Zd(){return!1}function mt(t){function r(o,a,c,h,p){this._reactName=o,this._targetInst=c,this.type=a,this.nativeEvent=h,this.target=p,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(o=t[_],this[_]=o?o(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?eo:Zd,this.isPropagationStopped=Zd,this}return U(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),r}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=mt(xr),xi=U({},xr,{view:0,detail:0}),_v=mt(xi),fa,pa,Di,to=U({},xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Di&&(Di&&t.type==="mousemove"?(fa=t.screenX-Di.screenX,pa=t.screenY-Di.screenY):pa=fa=0,Di=t),fa)},movementY:function(t){return"movementY"in t?t.movementY:pa}}),eh=mt(to),vv=U({},to,{dataTransfer:0}),yv=mt(vv),wv=U({},xi,{relatedTarget:0}),ma=mt(wv),Ev=U({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sv=mt(Ev),Cv=U({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Iv=mt(Cv),Tv=U({},xr,{data:0}),th=mt(Tv),kv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pv(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Rv[t])?!!r[t]:!1}function ga(){return Pv}var Av=U({},xi,{key:function(t){if(t.key){var r=kv[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Zs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(t){return t.type==="keypress"?Zs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ov=mt(Av),xv=U({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nh=mt(xv),Dv=U({},xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),Lv=mt(Dv),Mv=U({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bv=mt(Mv),Fv=U({},to,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uv=mt(Fv),zv=[9,13,27,32],_a=f&&"CompositionEvent"in window,Li=null;f&&"documentMode"in document&&(Li=document.documentMode);var jv=f&&"TextEvent"in window&&!Li,rh=f&&(!_a||Li&&8<Li&&11>=Li),ih=" ",sh=!1;function oh(t,r){switch(t){case"keyup":return zv.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dr=!1;function Wv(t,r){switch(t){case"compositionend":return lh(r);case"keypress":return r.which!==32?null:(sh=!0,ih);case"textInput":return t=r.data,t===ih&&sh?null:t;default:return null}}function Vv(t,r){if(Dr)return t==="compositionend"||!_a&&oh(t,r)?(t=Jd(),Js=da=Tn=null,Dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return rh&&r.locale!=="ko"?null:r.data;default:return null}}var Bv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ah(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Bv[t.type]:r==="textarea"}function uh(t,r,o,a){Pd(a),r=oo(r,"onChange"),0<r.length&&(o=new ha("onChange","change",null,o,a),t.push({event:o,listeners:r}))}var Mi=null,bi=null;function Hv(t){Nh(t,0)}function no(t){var r=Ur(t);if(_d(r))return t}function $v(t,r){if(t==="change")return r}var ch=!1;if(f){var va;if(f){var ya="oninput"in document;if(!ya){var dh=document.createElement("div");dh.setAttribute("oninput","return;"),ya=typeof dh.oninput=="function"}va=ya}else va=!1;ch=va&&(!document.documentMode||9<document.documentMode)}function hh(){Mi&&(Mi.detachEvent("onpropertychange",fh),bi=Mi=null)}function fh(t){if(t.propertyName==="value"&&no(bi)){var r=[];uh(r,bi,t,Jl(t)),Dd(Hv,r)}}function Gv(t,r,o){t==="focusin"?(hh(),Mi=r,bi=o,Mi.attachEvent("onpropertychange",fh)):t==="focusout"&&hh()}function Kv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return no(bi)}function qv(t,r){if(t==="click")return no(r)}function Qv(t,r){if(t==="input"||t==="change")return no(r)}function Yv(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Ot=typeof Object.is=="function"?Object.is:Yv;function Fi(t,r){if(Ot(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),a=Object.keys(r);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var c=o[a];if(!m.call(r,c)||!Ot(t[c],r[c]))return!1}return!0}function ph(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mh(t,r){var o=ph(t);t=0;for(var a;o;){if(o.nodeType===3){if(a=t+o.textContent.length,t<=r&&a>=r)return{node:o,offset:r-t};t=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ph(o)}}function gh(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?gh(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function _h(){for(var t=window,r=zs();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=zs(t.document)}return r}function wa(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Xv(t){var r=_h(),o=t.focusedElem,a=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&gh(o.ownerDocument.documentElement,o)){if(a!==null&&wa(o)){if(r=a.start,t=a.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var c=o.textContent.length,h=Math.min(a.start,c);a=a.end===void 0?h:Math.min(a.end,c),!t.extend&&h>a&&(c=a,a=h,h=c),c=mh(o,h);var p=mh(o,a);c&&p&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==p.node||t.focusOffset!==p.offset)&&(r=r.createRange(),r.setStart(c.node,c.offset),t.removeAllRanges(),h>a?(t.addRange(r),t.extend(p.node,p.offset)):(r.setEnd(p.node,p.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jv=f&&"documentMode"in document&&11>=document.documentMode,Lr=null,Ea=null,Ui=null,Sa=!1;function vh(t,r,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Sa||Lr==null||Lr!==zs(a)||(a=Lr,"selectionStart"in a&&wa(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ui&&Fi(Ui,a)||(Ui=a,a=oo(Ea,"onSelect"),0<a.length&&(r=new ha("onSelect","select",null,r,o),t.push({event:r,listeners:a}),r.target=Lr)))}function ro(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Mr={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionend:ro("Transition","TransitionEnd")},Ca={},yh={};f&&(yh=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function io(t){if(Ca[t])return Ca[t];if(!Mr[t])return t;var r=Mr[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in yh)return Ca[t]=r[o];return t}var wh=io("animationend"),Eh=io("animationiteration"),Sh=io("animationstart"),Ch=io("transitionend"),Ih=new Map,Th="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,r){Ih.set(t,r),u(r,[t])}for(var Ia=0;Ia<Th.length;Ia++){var Ta=Th[Ia],Zv=Ta.toLowerCase(),ey=Ta[0].toUpperCase()+Ta.slice(1);kn(Zv,"on"+ey)}kn(wh,"onAnimationEnd"),kn(Eh,"onAnimationIteration"),kn(Sh,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(Ch,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ty=new Set("cancel close invalid load scroll toggle".split(" ").concat(zi));function kh(t,r,o){var a=t.type||"unknown-event";t.currentTarget=o,Z_(a,r,void 0,t),t.currentTarget=null}function Nh(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var a=t[o],c=a.event;a=a.listeners;e:{var h=void 0;if(r)for(var p=a.length-1;0<=p;p--){var _=a[p],y=_.instance,k=_.currentTarget;if(_=_.listener,y!==h&&c.isPropagationStopped())break e;kh(c,_,k),h=y}else for(p=0;p<a.length;p++){if(_=a[p],y=_.instance,k=_.currentTarget,_=_.listener,y!==h&&c.isPropagationStopped())break e;kh(c,_,k),h=y}}}if(Vs)throw t=na,Vs=!1,na=null,t}function me(t,r){var o=r[Da];o===void 0&&(o=r[Da]=new Set);var a=t+"__bubble";o.has(a)||(Rh(r,t,2,!1),o.add(a))}function ka(t,r,o){var a=0;r&&(a|=4),Rh(o,t,a,r)}var so="_reactListening"+Math.random().toString(36).slice(2);function ji(t){if(!t[so]){t[so]=!0,s.forEach(function(o){o!=="selectionchange"&&(ty.has(o)||ka(o,!1,t),ka(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[so]||(r[so]=!0,ka("selectionchange",!1,r))}}function Rh(t,r,o,a){switch(Xd(r)){case 1:var c=mv;break;case 4:c=gv;break;default:c=ua}o=c.bind(null,r,o,t),c=void 0,!ta||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(c=!0),a?c!==void 0?t.addEventListener(r,o,{capture:!0,passive:c}):t.addEventListener(r,o,!0):c!==void 0?t.addEventListener(r,o,{passive:c}):t.addEventListener(r,o,!1)}function Na(t,r,o,a,c){var h=a;if((r&1)===0&&(r&2)===0&&a!==null)e:for(;;){if(a===null)return;var p=a.tag;if(p===3||p===4){var _=a.stateNode.containerInfo;if(_===c||_.nodeType===8&&_.parentNode===c)break;if(p===4)for(p=a.return;p!==null;){var y=p.tag;if((y===3||y===4)&&(y=p.stateNode.containerInfo,y===c||y.nodeType===8&&y.parentNode===c))return;p=p.return}for(;_!==null;){if(p=rr(_),p===null)return;if(y=p.tag,y===5||y===6){a=h=p;continue e}_=_.parentNode}}a=a.return}Dd(function(){var k=h,P=Jl(o),A=[];e:{var N=Ih.get(t);if(N!==void 0){var b=ha,z=t;switch(t){case"keypress":if(Zs(o)===0)break e;case"keydown":case"keyup":b=Ov;break;case"focusin":z="focus",b=ma;break;case"focusout":z="blur",b=ma;break;case"beforeblur":case"afterblur":b=ma;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=yv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Lv;break;case wh:case Eh:case Sh:b=Sv;break;case Ch:b=bv;break;case"scroll":b=_v;break;case"wheel":b=Uv;break;case"copy":case"cut":case"paste":b=Iv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=nh}var j=(r&4)!==0,Ne=!j&&t==="scroll",I=j?N!==null?N+"Capture":null:N;j=[];for(var E=k,T;E!==null;){T=E;var x=T.stateNode;if(T.tag===5&&x!==null&&(T=x,I!==null&&(x=Si(E,I),x!=null&&j.push(Wi(E,x,T)))),Ne)break;E=E.return}0<j.length&&(N=new b(N,z,null,o,P),A.push({event:N,listeners:j}))}}if((r&7)===0){e:{if(N=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",N&&o!==Xl&&(z=o.relatedTarget||o.fromElement)&&(rr(z)||z[tn]))break e;if((b||N)&&(N=P.window===P?P:(N=P.ownerDocument)?N.defaultView||N.parentWindow:window,b?(z=o.relatedTarget||o.toElement,b=k,z=z?rr(z):null,z!==null&&(Ne=nr(z),z!==Ne||z.tag!==5&&z.tag!==6)&&(z=null)):(b=null,z=k),b!==z)){if(j=eh,x="onMouseLeave",I="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(j=nh,x="onPointerLeave",I="onPointerEnter",E="pointer"),Ne=b==null?N:Ur(b),T=z==null?N:Ur(z),N=new j(x,E+"leave",b,o,P),N.target=Ne,N.relatedTarget=T,x=null,rr(P)===k&&(j=new j(I,E+"enter",z,o,P),j.target=T,j.relatedTarget=Ne,x=j),Ne=x,b&&z)t:{for(j=b,I=z,E=0,T=j;T;T=br(T))E++;for(T=0,x=I;x;x=br(x))T++;for(;0<E-T;)j=br(j),E--;for(;0<T-E;)I=br(I),T--;for(;E--;){if(j===I||I!==null&&j===I.alternate)break t;j=br(j),I=br(I)}j=null}else j=null;b!==null&&Ph(A,N,b,j,!1),z!==null&&Ne!==null&&Ph(A,Ne,z,j,!0)}}e:{if(N=k?Ur(k):window,b=N.nodeName&&N.nodeName.toLowerCase(),b==="select"||b==="input"&&N.type==="file")var W=$v;else if(ah(N))if(ch)W=Qv;else{W=Kv;var B=Gv}else(b=N.nodeName)&&b.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(W=qv);if(W&&(W=W(t,k))){uh(A,W,o,P);break e}B&&B(t,N,k),t==="focusout"&&(B=N._wrapperState)&&B.controlled&&N.type==="number"&&Gl(N,"number",N.value)}switch(B=k?Ur(k):window,t){case"focusin":(ah(B)||B.contentEditable==="true")&&(Lr=B,Ea=k,Ui=null);break;case"focusout":Ui=Ea=Lr=null;break;case"mousedown":Sa=!0;break;case"contextmenu":case"mouseup":case"dragend":Sa=!1,vh(A,o,P);break;case"selectionchange":if(Jv)break;case"keydown":case"keyup":vh(A,o,P)}var H;if(_a)e:{switch(t){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else Dr?oh(t,o)&&(q="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(q="onCompositionStart");q&&(rh&&o.locale!=="ko"&&(Dr||q!=="onCompositionStart"?q==="onCompositionEnd"&&Dr&&(H=Jd()):(Tn=P,da="value"in Tn?Tn.value:Tn.textContent,Dr=!0)),B=oo(k,q),0<B.length&&(q=new th(q,t,null,o,P),A.push({event:q,listeners:B}),H?q.data=H:(H=lh(o),H!==null&&(q.data=H)))),(H=jv?Wv(t,o):Vv(t,o))&&(k=oo(k,"onBeforeInput"),0<k.length&&(P=new th("onBeforeInput","beforeinput",null,o,P),A.push({event:P,listeners:k}),P.data=H))}Nh(A,r)})}function Wi(t,r,o){return{instance:t,listener:r,currentTarget:o}}function oo(t,r){for(var o=r+"Capture",a=[];t!==null;){var c=t,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=Si(t,o),h!=null&&a.unshift(Wi(t,h,c)),h=Si(t,r),h!=null&&a.push(Wi(t,h,c))),t=t.return}return a}function br(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ph(t,r,o,a,c){for(var h=r._reactName,p=[];o!==null&&o!==a;){var _=o,y=_.alternate,k=_.stateNode;if(y!==null&&y===a)break;_.tag===5&&k!==null&&(_=k,c?(y=Si(o,h),y!=null&&p.unshift(Wi(o,y,_))):c||(y=Si(o,h),y!=null&&p.push(Wi(o,y,_)))),o=o.return}p.length!==0&&t.push({event:r,listeners:p})}var ny=/\r\n?/g,ry=/\u0000|\uFFFD/g;function Ah(t){return(typeof t=="string"?t:""+t).replace(ny,`
`).replace(ry,"")}function lo(t,r,o){if(r=Ah(r),Ah(t)!==r&&o)throw Error(n(425))}function ao(){}var Ra=null,Pa=null;function Aa(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Oa=typeof setTimeout=="function"?setTimeout:void 0,iy=typeof clearTimeout=="function"?clearTimeout:void 0,Oh=typeof Promise=="function"?Promise:void 0,sy=typeof queueMicrotask=="function"?queueMicrotask:typeof Oh<"u"?function(t){return Oh.resolve(null).then(t).catch(oy)}:Oa;function oy(t){setTimeout(function(){throw t})}function xa(t,r){var o=r,a=0;do{var c=o.nextSibling;if(t.removeChild(o),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(a===0){t.removeChild(c),Oi(r);return}a--}else o!=="$"&&o!=="$?"&&o!=="$!"||a++;o=c}while(o);Oi(r)}function Nn(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function xh(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Fr=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Fr,Vi="__reactProps$"+Fr,tn="__reactContainer$"+Fr,Da="__reactEvents$"+Fr,ly="__reactListeners$"+Fr,ay="__reactHandles$"+Fr;function rr(t){var r=t[Kt];if(r)return r;for(var o=t.parentNode;o;){if(r=o[tn]||o[Kt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=xh(t);t!==null;){if(o=t[Kt])return o;t=xh(t)}return r}t=o,o=t.parentNode}return null}function Bi(t){return t=t[Kt]||t[tn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ur(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function uo(t){return t[Vi]||null}var La=[],zr=-1;function Rn(t){return{current:t}}function ge(t){0>zr||(t.current=La[zr],La[zr]=null,zr--)}function fe(t,r){zr++,La[zr]=t.current,t.current=r}var Pn={},Ge=Rn(Pn),it=Rn(!1),ir=Pn;function jr(t,r){var o=t.type.contextTypes;if(!o)return Pn;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===r)return a.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in o)c[h]=r[h];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=c),c}function st(t){return t=t.childContextTypes,t!=null}function co(){ge(it),ge(Ge)}function Dh(t,r,o){if(Ge.current!==Pn)throw Error(n(168));fe(Ge,r),fe(it,o)}function Lh(t,r,o){var a=t.stateNode;if(r=r.childContextTypes,typeof a.getChildContext!="function")return o;a=a.getChildContext();for(var c in a)if(!(c in r))throw Error(n(108,he(t)||"Unknown",c));return U({},o,a)}function ho(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pn,ir=Ge.current,fe(Ge,t),fe(it,it.current),!0}function Mh(t,r,o){var a=t.stateNode;if(!a)throw Error(n(169));o?(t=Lh(t,r,ir),a.__reactInternalMemoizedMergedChildContext=t,ge(it),ge(Ge),fe(Ge,t)):ge(it),fe(it,o)}var nn=null,fo=!1,Ma=!1;function bh(t){nn===null?nn=[t]:nn.push(t)}function uy(t){fo=!0,bh(t)}function An(){if(!Ma&&nn!==null){Ma=!0;var t=0,r=ue;try{var o=nn;for(ue=1;t<o.length;t++){var a=o[t];do a=a(!0);while(a!==null)}nn=null,fo=!1}catch(c){throw nn!==null&&(nn=nn.slice(t+1)),Ud(ra,An),c}finally{ue=r,Ma=!1}}return null}var Wr=[],Vr=0,po=null,mo=0,wt=[],Et=0,sr=null,rn=1,sn="";function or(t,r){Wr[Vr++]=mo,Wr[Vr++]=po,po=t,mo=r}function Fh(t,r,o){wt[Et++]=rn,wt[Et++]=sn,wt[Et++]=sr,sr=t;var a=rn;t=sn;var c=32-At(a)-1;a&=~(1<<c),o+=1;var h=32-At(r)+c;if(30<h){var p=c-c%5;h=(a&(1<<p)-1).toString(32),a>>=p,c-=p,rn=1<<32-At(r)+c|o<<c|a,sn=h+t}else rn=1<<h|o<<c|a,sn=t}function ba(t){t.return!==null&&(or(t,1),Fh(t,1,0))}function Fa(t){for(;t===po;)po=Wr[--Vr],Wr[Vr]=null,mo=Wr[--Vr],Wr[Vr]=null;for(;t===sr;)sr=wt[--Et],wt[Et]=null,sn=wt[--Et],wt[Et]=null,rn=wt[--Et],wt[Et]=null}var gt=null,_t=null,ye=!1,xt=null;function Uh(t,r){var o=Tt(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function zh(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,gt=t,_t=Nn(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,gt=t,_t=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=sr!==null?{id:rn,overflow:sn}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=Tt(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,gt=t,_t=null,!0):!1;default:return!1}}function Ua(t){return(t.mode&1)!==0&&(t.flags&128)===0}function za(t){if(ye){var r=_t;if(r){var o=r;if(!zh(t,r)){if(Ua(t))throw Error(n(418));r=Nn(o.nextSibling);var a=gt;r&&zh(t,r)?Uh(a,o):(t.flags=t.flags&-4097|2,ye=!1,gt=t)}}else{if(Ua(t))throw Error(n(418));t.flags=t.flags&-4097|2,ye=!1,gt=t}}}function jh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gt=t}function go(t){if(t!==gt)return!1;if(!ye)return jh(t),ye=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Aa(t.type,t.memoizedProps)),r&&(r=_t)){if(Ua(t))throw Wh(),Error(n(418));for(;r;)Uh(t,r),r=Nn(r.nextSibling)}if(jh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){_t=Nn(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}_t=null}}else _t=gt?Nn(t.stateNode.nextSibling):null;return!0}function Wh(){for(var t=_t;t;)t=Nn(t.nextSibling)}function Br(){_t=gt=null,ye=!1}function ja(t){xt===null?xt=[t]:xt.push(t)}var cy=Te.ReactCurrentBatchConfig;function Hi(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var a=o.stateNode}if(!a)throw Error(n(147,t));var c=a,h=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===h?r.ref:(r=function(p){var _=c.refs;p===null?delete _[h]:_[h]=p},r._stringRef=h,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function _o(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Vh(t){var r=t._init;return r(t._payload)}function Bh(t){function r(I,E){if(t){var T=I.deletions;T===null?(I.deletions=[E],I.flags|=16):T.push(E)}}function o(I,E){if(!t)return null;for(;E!==null;)r(I,E),E=E.sibling;return null}function a(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function c(I,E){return I=Un(I,E),I.index=0,I.sibling=null,I}function h(I,E,T){return I.index=T,t?(T=I.alternate,T!==null?(T=T.index,T<E?(I.flags|=2,E):T):(I.flags|=2,E)):(I.flags|=1048576,E)}function p(I){return t&&I.alternate===null&&(I.flags|=2),I}function _(I,E,T,x){return E===null||E.tag!==6?(E=Ou(T,I.mode,x),E.return=I,E):(E=c(E,T),E.return=I,E)}function y(I,E,T,x){var W=T.type;return W===Be?P(I,E,T.props.children,x,T.key):E!==null&&(E.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===rt&&Vh(W)===E.type)?(x=c(E,T.props),x.ref=Hi(I,E,T),x.return=I,x):(x=Wo(T.type,T.key,T.props,null,I.mode,x),x.ref=Hi(I,E,T),x.return=I,x)}function k(I,E,T,x){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=xu(T,I.mode,x),E.return=I,E):(E=c(E,T.children||[]),E.return=I,E)}function P(I,E,T,x,W){return E===null||E.tag!==7?(E=pr(T,I.mode,x,W),E.return=I,E):(E=c(E,T),E.return=I,E)}function A(I,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ou(""+E,I.mode,T),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case tt:return T=Wo(E.type,E.key,E.props,null,I.mode,T),T.ref=Hi(I,null,E),T.return=I,T;case Oe:return E=xu(E,I.mode,T),E.return=I,E;case rt:var x=E._init;return A(I,x(E._payload),T)}if(yi(E)||$(E))return E=pr(E,I.mode,T,null),E.return=I,E;_o(I,E)}return null}function N(I,E,T,x){var W=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return W!==null?null:_(I,E,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case tt:return T.key===W?y(I,E,T,x):null;case Oe:return T.key===W?k(I,E,T,x):null;case rt:return W=T._init,N(I,E,W(T._payload),x)}if(yi(T)||$(T))return W!==null?null:P(I,E,T,x,null);_o(I,T)}return null}function b(I,E,T,x,W){if(typeof x=="string"&&x!==""||typeof x=="number")return I=I.get(T)||null,_(E,I,""+x,W);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tt:return I=I.get(x.key===null?T:x.key)||null,y(E,I,x,W);case Oe:return I=I.get(x.key===null?T:x.key)||null,k(E,I,x,W);case rt:var B=x._init;return b(I,E,T,B(x._payload),W)}if(yi(x)||$(x))return I=I.get(T)||null,P(E,I,x,W,null);_o(E,x)}return null}function z(I,E,T,x){for(var W=null,B=null,H=E,q=E=0,ze=null;H!==null&&q<T.length;q++){H.index>q?(ze=H,H=null):ze=H.sibling;var oe=N(I,H,T[q],x);if(oe===null){H===null&&(H=ze);break}t&&H&&oe.alternate===null&&r(I,H),E=h(oe,E,q),B===null?W=oe:B.sibling=oe,B=oe,H=ze}if(q===T.length)return o(I,H),ye&&or(I,q),W;if(H===null){for(;q<T.length;q++)H=A(I,T[q],x),H!==null&&(E=h(H,E,q),B===null?W=H:B.sibling=H,B=H);return ye&&or(I,q),W}for(H=a(I,H);q<T.length;q++)ze=b(H,I,q,T[q],x),ze!==null&&(t&&ze.alternate!==null&&H.delete(ze.key===null?q:ze.key),E=h(ze,E,q),B===null?W=ze:B.sibling=ze,B=ze);return t&&H.forEach(function(zn){return r(I,zn)}),ye&&or(I,q),W}function j(I,E,T,x){var W=$(T);if(typeof W!="function")throw Error(n(150));if(T=W.call(T),T==null)throw Error(n(151));for(var B=W=null,H=E,q=E=0,ze=null,oe=T.next();H!==null&&!oe.done;q++,oe=T.next()){H.index>q?(ze=H,H=null):ze=H.sibling;var zn=N(I,H,oe.value,x);if(zn===null){H===null&&(H=ze);break}t&&H&&zn.alternate===null&&r(I,H),E=h(zn,E,q),B===null?W=zn:B.sibling=zn,B=zn,H=ze}if(oe.done)return o(I,H),ye&&or(I,q),W;if(H===null){for(;!oe.done;q++,oe=T.next())oe=A(I,oe.value,x),oe!==null&&(E=h(oe,E,q),B===null?W=oe:B.sibling=oe,B=oe);return ye&&or(I,q),W}for(H=a(I,H);!oe.done;q++,oe=T.next())oe=b(H,I,q,oe.value,x),oe!==null&&(t&&oe.alternate!==null&&H.delete(oe.key===null?q:oe.key),E=h(oe,E,q),B===null?W=oe:B.sibling=oe,B=oe);return t&&H.forEach(function(By){return r(I,By)}),ye&&or(I,q),W}function Ne(I,E,T,x){if(typeof T=="object"&&T!==null&&T.type===Be&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case tt:e:{for(var W=T.key,B=E;B!==null;){if(B.key===W){if(W=T.type,W===Be){if(B.tag===7){o(I,B.sibling),E=c(B,T.props.children),E.return=I,I=E;break e}}else if(B.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===rt&&Vh(W)===B.type){o(I,B.sibling),E=c(B,T.props),E.ref=Hi(I,B,T),E.return=I,I=E;break e}o(I,B);break}else r(I,B);B=B.sibling}T.type===Be?(E=pr(T.props.children,I.mode,x,T.key),E.return=I,I=E):(x=Wo(T.type,T.key,T.props,null,I.mode,x),x.ref=Hi(I,E,T),x.return=I,I=x)}return p(I);case Oe:e:{for(B=T.key;E!==null;){if(E.key===B)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){o(I,E.sibling),E=c(E,T.children||[]),E.return=I,I=E;break e}else{o(I,E);break}else r(I,E);E=E.sibling}E=xu(T,I.mode,x),E.return=I,I=E}return p(I);case rt:return B=T._init,Ne(I,E,B(T._payload),x)}if(yi(T))return z(I,E,T,x);if($(T))return j(I,E,T,x);_o(I,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(o(I,E.sibling),E=c(E,T),E.return=I,I=E):(o(I,E),E=Ou(T,I.mode,x),E.return=I,I=E),p(I)):o(I,E)}return Ne}var Hr=Bh(!0),Hh=Bh(!1),vo=Rn(null),yo=null,$r=null,Wa=null;function Va(){Wa=$r=yo=null}function Ba(t){var r=vo.current;ge(vo),t._currentValue=r}function Ha(t,r,o){for(;t!==null;){var a=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,a!==null&&(a.childLanes|=r)):a!==null&&(a.childLanes&r)!==r&&(a.childLanes|=r),t===o)break;t=t.return}}function Gr(t,r){yo=t,Wa=$r=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(ot=!0),t.firstContext=null)}function St(t){var r=t._currentValue;if(Wa!==t)if(t={context:t,memoizedValue:r,next:null},$r===null){if(yo===null)throw Error(n(308));$r=t,yo.dependencies={lanes:0,firstContext:t}}else $r=$r.next=t;return r}var lr=null;function $a(t){lr===null?lr=[t]:lr.push(t)}function $h(t,r,o,a){var c=r.interleaved;return c===null?(o.next=o,$a(r)):(o.next=c.next,c.next=o),r.interleaved=o,on(t,a)}function on(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var On=!1;function Ga(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ln(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function xn(t,r,o){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(re&2)!==0){var c=a.pending;return c===null?r.next=r:(r.next=c.next,c.next=r),a.pending=r,on(t,o)}return c=a.interleaved,c===null?(r.next=r,$a(a)):(r.next=c.next,c.next=r),a.interleaved=r,on(t,o)}function wo(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var a=r.lanes;a&=t.pendingLanes,o|=a,r.lanes=o,oa(t,o)}}function Kh(t,r){var o=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var c=null,h=null;if(o=o.firstBaseUpdate,o!==null){do{var p={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};h===null?c=h=p:h=h.next=p,o=o.next}while(o!==null);h===null?c=h=r:h=h.next=r}else c=h=r;o={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:a.shared,effects:a.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Eo(t,r,o,a){var c=t.updateQueue;On=!1;var h=c.firstBaseUpdate,p=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var y=_,k=y.next;y.next=null,p===null?h=k:p.next=k,p=y;var P=t.alternate;P!==null&&(P=P.updateQueue,_=P.lastBaseUpdate,_!==p&&(_===null?P.firstBaseUpdate=k:_.next=k,P.lastBaseUpdate=y))}if(h!==null){var A=c.baseState;p=0,P=k=y=null,_=h;do{var N=_.lane,b=_.eventTime;if((a&N)===N){P!==null&&(P=P.next={eventTime:b,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var z=t,j=_;switch(N=r,b=o,j.tag){case 1:if(z=j.payload,typeof z=="function"){A=z.call(b,A,N);break e}A=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=j.payload,N=typeof z=="function"?z.call(b,A,N):z,N==null)break e;A=U({},A,N);break e;case 2:On=!0}}_.callback!==null&&_.lane!==0&&(t.flags|=64,N=c.effects,N===null?c.effects=[_]:N.push(_))}else b={eventTime:b,lane:N,tag:_.tag,payload:_.payload,callback:_.callback,next:null},P===null?(k=P=b,y=A):P=P.next=b,p|=N;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;N=_,_=N.next,N.next=null,c.lastBaseUpdate=N,c.shared.pending=null}}while(!0);if(P===null&&(y=A),c.baseState=y,c.firstBaseUpdate=k,c.lastBaseUpdate=P,r=c.shared.interleaved,r!==null){c=r;do p|=c.lane,c=c.next;while(c!==r)}else h===null&&(c.shared.lanes=0);cr|=p,t.lanes=p,t.memoizedState=A}}function qh(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var a=t[r],c=a.callback;if(c!==null){if(a.callback=null,a=o,typeof c!="function")throw Error(n(191,c));c.call(a)}}}var $i={},qt=Rn($i),Gi=Rn($i),Ki=Rn($i);function ar(t){if(t===$i)throw Error(n(174));return t}function Ka(t,r){switch(fe(Ki,r),fe(Gi,t),fe(qt,$i),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ql(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ql(r,t)}ge(qt),fe(qt,r)}function Kr(){ge(qt),ge(Gi),ge(Ki)}function Qh(t){ar(Ki.current);var r=ar(qt.current),o=ql(r,t.type);r!==o&&(fe(Gi,t),fe(qt,o))}function qa(t){Gi.current===t&&(ge(qt),ge(Gi))}var we=Rn(0);function So(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Qa=[];function Ya(){for(var t=0;t<Qa.length;t++)Qa[t]._workInProgressVersionPrimary=null;Qa.length=0}var Co=Te.ReactCurrentDispatcher,Xa=Te.ReactCurrentBatchConfig,ur=0,Ee=null,xe=null,Fe=null,Io=!1,qi=!1,Qi=0,dy=0;function Ke(){throw Error(n(321))}function Ja(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Ot(t[o],r[o]))return!1;return!0}function Za(t,r,o,a,c,h){if(ur=h,Ee=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Co.current=t===null||t.memoizedState===null?my:gy,t=o(a,c),qi){h=0;do{if(qi=!1,Qi=0,25<=h)throw Error(n(301));h+=1,Fe=xe=null,r.updateQueue=null,Co.current=_y,t=o(a,c)}while(qi)}if(Co.current=No,r=xe!==null&&xe.next!==null,ur=0,Fe=xe=Ee=null,Io=!1,r)throw Error(n(300));return t}function eu(){var t=Qi!==0;return Qi=0,t}function Qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ee.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Ct(){if(xe===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=xe.next;var r=Fe===null?Ee.memoizedState:Fe.next;if(r!==null)Fe=r,xe=t;else{if(t===null)throw Error(n(310));xe=t,t={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Fe===null?Ee.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function Yi(t,r){return typeof r=="function"?r(t):r}function tu(t){var r=Ct(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var a=xe,c=a.baseQueue,h=o.pending;if(h!==null){if(c!==null){var p=c.next;c.next=h.next,h.next=p}a.baseQueue=c=h,o.pending=null}if(c!==null){h=c.next,a=a.baseState;var _=p=null,y=null,k=h;do{var P=k.lane;if((ur&P)===P)y!==null&&(y=y.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),a=k.hasEagerState?k.eagerState:t(a,k.action);else{var A={lane:P,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};y===null?(_=y=A,p=a):y=y.next=A,Ee.lanes|=P,cr|=P}k=k.next}while(k!==null&&k!==h);y===null?p=a:y.next=_,Ot(a,r.memoizedState)||(ot=!0),r.memoizedState=a,r.baseState=p,r.baseQueue=y,o.lastRenderedState=a}if(t=o.interleaved,t!==null){c=t;do h=c.lane,Ee.lanes|=h,cr|=h,c=c.next;while(c!==t)}else c===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function nu(t){var r=Ct(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var a=o.dispatch,c=o.pending,h=r.memoizedState;if(c!==null){o.pending=null;var p=c=c.next;do h=t(h,p.action),p=p.next;while(p!==c);Ot(h,r.memoizedState)||(ot=!0),r.memoizedState=h,r.baseQueue===null&&(r.baseState=h),o.lastRenderedState=h}return[h,a]}function Yh(){}function Xh(t,r){var o=Ee,a=Ct(),c=r(),h=!Ot(a.memoizedState,c);if(h&&(a.memoizedState=c,ot=!0),a=a.queue,ru(ef.bind(null,o,a,t),[t]),a.getSnapshot!==r||h||Fe!==null&&Fe.memoizedState.tag&1){if(o.flags|=2048,Xi(9,Zh.bind(null,o,a,c,r),void 0,null),Ue===null)throw Error(n(349));(ur&30)!==0||Jh(o,r,c)}return c}function Jh(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Ee.updateQueue,r===null?(r={lastEffect:null,stores:null},Ee.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Zh(t,r,o,a){r.value=o,r.getSnapshot=a,tf(r)&&nf(t)}function ef(t,r,o){return o(function(){tf(r)&&nf(t)})}function tf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Ot(t,o)}catch{return!0}}function nf(t){var r=on(t,1);r!==null&&bt(r,t,1,-1)}function rf(t){var r=Qt();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:t},r.queue=t,t=t.dispatch=py.bind(null,Ee,t),[r.memoizedState,t]}function Xi(t,r,o,a){return t={tag:t,create:r,destroy:o,deps:a,next:null},r=Ee.updateQueue,r===null?(r={lastEffect:null,stores:null},Ee.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(a=o.next,o.next=t,t.next=a,r.lastEffect=t)),t}function sf(){return Ct().memoizedState}function To(t,r,o,a){var c=Qt();Ee.flags|=t,c.memoizedState=Xi(1|r,o,void 0,a===void 0?null:a)}function ko(t,r,o,a){var c=Ct();a=a===void 0?null:a;var h=void 0;if(xe!==null){var p=xe.memoizedState;if(h=p.destroy,a!==null&&Ja(a,p.deps)){c.memoizedState=Xi(r,o,h,a);return}}Ee.flags|=t,c.memoizedState=Xi(1|r,o,h,a)}function of(t,r){return To(8390656,8,t,r)}function ru(t,r){return ko(2048,8,t,r)}function lf(t,r){return ko(4,2,t,r)}function af(t,r){return ko(4,4,t,r)}function uf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function cf(t,r,o){return o=o!=null?o.concat([t]):null,ko(4,4,uf.bind(null,r,t),o)}function iu(){}function df(t,r){var o=Ct();r=r===void 0?null:r;var a=o.memoizedState;return a!==null&&r!==null&&Ja(r,a[1])?a[0]:(o.memoizedState=[t,r],t)}function hf(t,r){var o=Ct();r=r===void 0?null:r;var a=o.memoizedState;return a!==null&&r!==null&&Ja(r,a[1])?a[0]:(t=t(),o.memoizedState=[t,r],t)}function ff(t,r,o){return(ur&21)===0?(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=o):(Ot(o,r)||(o=Vd(),Ee.lanes|=o,cr|=o,t.baseState=!0),r)}function hy(t,r){var o=ue;ue=o!==0&&4>o?o:4,t(!0);var a=Xa.transition;Xa.transition={};try{t(!1),r()}finally{ue=o,Xa.transition=a}}function pf(){return Ct().memoizedState}function fy(t,r,o){var a=bn(t);if(o={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null},mf(t))gf(r,o);else if(o=$h(t,r,o,a),o!==null){var c=Je();bt(o,t,a,c),_f(o,r,a)}}function py(t,r,o){var a=bn(t),c={lane:a,action:o,hasEagerState:!1,eagerState:null,next:null};if(mf(t))gf(r,c);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=r.lastRenderedReducer,h!==null))try{var p=r.lastRenderedState,_=h(p,o);if(c.hasEagerState=!0,c.eagerState=_,Ot(_,p)){var y=r.interleaved;y===null?(c.next=c,$a(r)):(c.next=y.next,y.next=c),r.interleaved=c;return}}catch{}o=$h(t,r,c,a),o!==null&&(c=Je(),bt(o,t,a,c),_f(o,r,a))}}function mf(t){var r=t.alternate;return t===Ee||r!==null&&r===Ee}function gf(t,r){qi=Io=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function _f(t,r,o){if((o&4194240)!==0){var a=r.lanes;a&=t.pendingLanes,o|=a,r.lanes=o,oa(t,o)}}var No={readContext:St,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},my={readContext:St,useCallback:function(t,r){return Qt().memoizedState=[t,r===void 0?null:r],t},useContext:St,useEffect:of,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,To(4194308,4,uf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return To(4194308,4,t,r)},useInsertionEffect:function(t,r){return To(4,2,t,r)},useMemo:function(t,r){var o=Qt();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var a=Qt();return r=o!==void 0?o(r):r,a.memoizedState=a.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},a.queue=t,t=t.dispatch=fy.bind(null,Ee,t),[a.memoizedState,t]},useRef:function(t){var r=Qt();return t={current:t},r.memoizedState=t},useState:rf,useDebugValue:iu,useDeferredValue:function(t){return Qt().memoizedState=t},useTransition:function(){var t=rf(!1),r=t[0];return t=hy.bind(null,t[1]),Qt().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var a=Ee,c=Qt();if(ye){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),Ue===null)throw Error(n(349));(ur&30)!==0||Jh(a,r,o)}c.memoizedState=o;var h={value:o,getSnapshot:r};return c.queue=h,of(ef.bind(null,a,h,t),[t]),a.flags|=2048,Xi(9,Zh.bind(null,a,h,o,r),void 0,null),o},useId:function(){var t=Qt(),r=Ue.identifierPrefix;if(ye){var o=sn,a=rn;o=(a&~(1<<32-At(a)-1)).toString(32)+o,r=":"+r+"R"+o,o=Qi++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=dy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},gy={readContext:St,useCallback:df,useContext:St,useEffect:ru,useImperativeHandle:cf,useInsertionEffect:lf,useLayoutEffect:af,useMemo:hf,useReducer:tu,useRef:sf,useState:function(){return tu(Yi)},useDebugValue:iu,useDeferredValue:function(t){var r=Ct();return ff(r,xe.memoizedState,t)},useTransition:function(){var t=tu(Yi)[0],r=Ct().memoizedState;return[t,r]},useMutableSource:Yh,useSyncExternalStore:Xh,useId:pf,unstable_isNewReconciler:!1},_y={readContext:St,useCallback:df,useContext:St,useEffect:ru,useImperativeHandle:cf,useInsertionEffect:lf,useLayoutEffect:af,useMemo:hf,useReducer:nu,useRef:sf,useState:function(){return nu(Yi)},useDebugValue:iu,useDeferredValue:function(t){var r=Ct();return xe===null?r.memoizedState=t:ff(r,xe.memoizedState,t)},useTransition:function(){var t=nu(Yi)[0],r=Ct().memoizedState;return[t,r]},useMutableSource:Yh,useSyncExternalStore:Xh,useId:pf,unstable_isNewReconciler:!1};function Dt(t,r){if(t&&t.defaultProps){r=U({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function su(t,r,o,a){r=t.memoizedState,o=o(a,r),o=o==null?r:U({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Ro={isMounted:function(t){return(t=t._reactInternals)?nr(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var a=Je(),c=bn(t),h=ln(a,c);h.payload=r,o!=null&&(h.callback=o),r=xn(t,h,c),r!==null&&(bt(r,t,c,a),wo(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var a=Je(),c=bn(t),h=ln(a,c);h.tag=1,h.payload=r,o!=null&&(h.callback=o),r=xn(t,h,c),r!==null&&(bt(r,t,c,a),wo(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Je(),a=bn(t),c=ln(o,a);c.tag=2,r!=null&&(c.callback=r),r=xn(t,c,a),r!==null&&(bt(r,t,a,o),wo(r,t,a))}};function vf(t,r,o,a,c,h,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,h,p):r.prototype&&r.prototype.isPureReactComponent?!Fi(o,a)||!Fi(c,h):!0}function yf(t,r,o){var a=!1,c=Pn,h=r.contextType;return typeof h=="object"&&h!==null?h=St(h):(c=st(r)?ir:Ge.current,a=r.contextTypes,h=(a=a!=null)?jr(t,c):Pn),r=new r(o,h),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ro,t.stateNode=r,r._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=h),r}function wf(t,r,o,a){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,a),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,a),r.state!==t&&Ro.enqueueReplaceState(r,r.state,null)}function ou(t,r,o,a){var c=t.stateNode;c.props=o,c.state=t.memoizedState,c.refs={},Ga(t);var h=r.contextType;typeof h=="object"&&h!==null?c.context=St(h):(h=st(r)?ir:Ge.current,c.context=jr(t,h)),c.state=t.memoizedState,h=r.getDerivedStateFromProps,typeof h=="function"&&(su(t,r,h,o),c.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(r=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),r!==c.state&&Ro.enqueueReplaceState(c,c.state,null),Eo(t,o,c,a),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function qr(t,r){try{var o="",a=r;do o+=ie(a),a=a.return;while(a);var c=o}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:t,source:r,stack:c,digest:null}}function lu(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function au(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var vy=typeof WeakMap=="function"?WeakMap:Map;function Ef(t,r,o){o=ln(-1,o),o.tag=3,o.payload={element:null};var a=r.value;return o.callback=function(){Mo||(Mo=!0,Cu=a),au(t,r)},o}function Sf(t,r,o){o=ln(-1,o),o.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var c=r.value;o.payload=function(){return a(c)},o.callback=function(){au(t,r)}}var h=t.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(o.callback=function(){au(t,r),typeof a!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var p=r.stack;this.componentDidCatch(r.value,{componentStack:p!==null?p:""})}),o}function Cf(t,r,o){var a=t.pingCache;if(a===null){a=t.pingCache=new vy;var c=new Set;a.set(r,c)}else c=a.get(r),c===void 0&&(c=new Set,a.set(r,c));c.has(o)||(c.add(o),t=xy.bind(null,t,r,o),r.then(t,t))}function If(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Tf(t,r,o,a,c){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=ln(-1,1),r.tag=2,xn(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=c,t)}var yy=Te.ReactCurrentOwner,ot=!1;function Xe(t,r,o,a){r.child=t===null?Hh(r,null,o,a):Hr(r,t.child,o,a)}function kf(t,r,o,a,c){o=o.render;var h=r.ref;return Gr(r,c),a=Za(t,r,o,a,h,c),o=eu(),t!==null&&!ot?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c,an(t,r,c)):(ye&&o&&ba(r),r.flags|=1,Xe(t,r,a,c),r.child)}function Nf(t,r,o,a,c){if(t===null){var h=o.type;return typeof h=="function"&&!Au(h)&&h.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=h,Rf(t,r,h,a,c)):(t=Wo(o.type,null,a,r,r.mode,c),t.ref=r.ref,t.return=r,r.child=t)}if(h=t.child,(t.lanes&c)===0){var p=h.memoizedProps;if(o=o.compare,o=o!==null?o:Fi,o(p,a)&&t.ref===r.ref)return an(t,r,c)}return r.flags|=1,t=Un(h,a),t.ref=r.ref,t.return=r,r.child=t}function Rf(t,r,o,a,c){if(t!==null){var h=t.memoizedProps;if(Fi(h,a)&&t.ref===r.ref)if(ot=!1,r.pendingProps=a=h,(t.lanes&c)!==0)(t.flags&131072)!==0&&(ot=!0);else return r.lanes=t.lanes,an(t,r,c)}return uu(t,r,o,a,c)}function Pf(t,r,o){var a=r.pendingProps,c=a.children,h=t!==null?t.memoizedState:null;if(a.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Yr,vt),vt|=o;else{if((o&1073741824)===0)return t=h!==null?h.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,fe(Yr,vt),vt|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:o,fe(Yr,vt),vt|=a}else h!==null?(a=h.baseLanes|o,r.memoizedState=null):a=o,fe(Yr,vt),vt|=a;return Xe(t,r,c,o),r.child}function Af(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function uu(t,r,o,a,c){var h=st(o)?ir:Ge.current;return h=jr(r,h),Gr(r,c),o=Za(t,r,o,a,h,c),a=eu(),t!==null&&!ot?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c,an(t,r,c)):(ye&&a&&ba(r),r.flags|=1,Xe(t,r,o,c),r.child)}function Of(t,r,o,a,c){if(st(o)){var h=!0;ho(r)}else h=!1;if(Gr(r,c),r.stateNode===null)Ao(t,r),yf(r,o,a),ou(r,o,a,c),a=!0;else if(t===null){var p=r.stateNode,_=r.memoizedProps;p.props=_;var y=p.context,k=o.contextType;typeof k=="object"&&k!==null?k=St(k):(k=st(o)?ir:Ge.current,k=jr(r,k));var P=o.getDerivedStateFromProps,A=typeof P=="function"||typeof p.getSnapshotBeforeUpdate=="function";A||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_!==a||y!==k)&&wf(r,p,a,k),On=!1;var N=r.memoizedState;p.state=N,Eo(r,a,p,c),y=r.memoizedState,_!==a||N!==y||it.current||On?(typeof P=="function"&&(su(r,o,P,a),y=r.memoizedState),(_=On||vf(r,o,_,a,N,y,k))?(A||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=a,r.memoizedState=y),p.props=a,p.state=y,p.context=k,a=_):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),a=!1)}else{p=r.stateNode,Gh(t,r),_=r.memoizedProps,k=r.type===r.elementType?_:Dt(r.type,_),p.props=k,A=r.pendingProps,N=p.context,y=o.contextType,typeof y=="object"&&y!==null?y=St(y):(y=st(o)?ir:Ge.current,y=jr(r,y));var b=o.getDerivedStateFromProps;(P=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_!==A||N!==y)&&wf(r,p,a,y),On=!1,N=r.memoizedState,p.state=N,Eo(r,a,p,c);var z=r.memoizedState;_!==A||N!==z||it.current||On?(typeof b=="function"&&(su(r,o,b,a),z=r.memoizedState),(k=On||vf(r,o,k,a,N,z,y)||!1)?(P||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(a,z,y),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(a,z,y)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||_===t.memoizedProps&&N===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&N===t.memoizedState||(r.flags|=1024),r.memoizedProps=a,r.memoizedState=z),p.props=a,p.state=z,p.context=y,a=k):(typeof p.componentDidUpdate!="function"||_===t.memoizedProps&&N===t.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&N===t.memoizedState||(r.flags|=1024),a=!1)}return cu(t,r,o,a,h,c)}function cu(t,r,o,a,c,h){Af(t,r);var p=(r.flags&128)!==0;if(!a&&!p)return c&&Mh(r,o,!1),an(t,r,h);a=r.stateNode,yy.current=r;var _=p&&typeof o.getDerivedStateFromError!="function"?null:a.render();return r.flags|=1,t!==null&&p?(r.child=Hr(r,t.child,null,h),r.child=Hr(r,null,_,h)):Xe(t,r,_,h),r.memoizedState=a.state,c&&Mh(r,o,!0),r.child}function xf(t){var r=t.stateNode;r.pendingContext?Dh(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Dh(t,r.context,!1),Ka(t,r.containerInfo)}function Df(t,r,o,a,c){return Br(),ja(c),r.flags|=256,Xe(t,r,o,a),r.child}var du={dehydrated:null,treeContext:null,retryLane:0};function hu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lf(t,r,o){var a=r.pendingProps,c=we.current,h=!1,p=(r.flags&128)!==0,_;if((_=p)||(_=t!==null&&t.memoizedState===null?!1:(c&2)!==0),_?(h=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),fe(we,c&1),t===null)return za(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(p=a.children,t=a.fallback,h?(a=r.mode,h=r.child,p={mode:"hidden",children:p},(a&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=p):h=Vo(p,a,0,null),t=pr(t,a,o,null),h.return=r,t.return=r,h.sibling=t,r.child=h,r.child.memoizedState=hu(o),r.memoizedState=du,t):fu(r,p));if(c=t.memoizedState,c!==null&&(_=c.dehydrated,_!==null))return wy(t,r,p,a,_,c,o);if(h){h=a.fallback,p=r.mode,c=t.child,_=c.sibling;var y={mode:"hidden",children:a.children};return(p&1)===0&&r.child!==c?(a=r.child,a.childLanes=0,a.pendingProps=y,r.deletions=null):(a=Un(c,y),a.subtreeFlags=c.subtreeFlags&14680064),_!==null?h=Un(_,h):(h=pr(h,p,o,null),h.flags|=2),h.return=r,a.return=r,a.sibling=h,r.child=a,a=h,h=r.child,p=t.child.memoizedState,p=p===null?hu(o):{baseLanes:p.baseLanes|o,cachePool:null,transitions:p.transitions},h.memoizedState=p,h.childLanes=t.childLanes&~o,r.memoizedState=du,a}return h=t.child,t=h.sibling,a=Un(h,{mode:"visible",children:a.children}),(r.mode&1)===0&&(a.lanes=o),a.return=r,a.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=a,r.memoizedState=null,a}function fu(t,r){return r=Vo({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Po(t,r,o,a){return a!==null&&ja(a),Hr(r,t.child,null,o),t=fu(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function wy(t,r,o,a,c,h,p){if(o)return r.flags&256?(r.flags&=-257,a=lu(Error(n(422))),Po(t,r,p,a)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(h=a.fallback,c=r.mode,a=Vo({mode:"visible",children:a.children},c,0,null),h=pr(h,c,p,null),h.flags|=2,a.return=r,h.return=r,a.sibling=h,r.child=a,(r.mode&1)!==0&&Hr(r,t.child,null,p),r.child.memoizedState=hu(p),r.memoizedState=du,h);if((r.mode&1)===0)return Po(t,r,p,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var _=a.dgst;return a=_,h=Error(n(419)),a=lu(h,a,void 0),Po(t,r,p,a)}if(_=(p&t.childLanes)!==0,ot||_){if(a=Ue,a!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|p))!==0?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,on(t,c),bt(a,t,c,-1))}return Pu(),a=lu(Error(n(421))),Po(t,r,p,a)}return c.data==="$?"?(r.flags|=128,r.child=t.child,r=Dy.bind(null,t),c._reactRetry=r,null):(t=h.treeContext,_t=Nn(c.nextSibling),gt=r,ye=!0,xt=null,t!==null&&(wt[Et++]=rn,wt[Et++]=sn,wt[Et++]=sr,rn=t.id,sn=t.overflow,sr=r),r=fu(r,a.children),r.flags|=4096,r)}function Mf(t,r,o){t.lanes|=r;var a=t.alternate;a!==null&&(a.lanes|=r),Ha(t.return,r,o)}function pu(t,r,o,a,c){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:c}:(h.isBackwards=r,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=o,h.tailMode=c)}function bf(t,r,o){var a=r.pendingProps,c=a.revealOrder,h=a.tail;if(Xe(t,r,a.children,o),a=we.current,(a&2)!==0)a=a&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mf(t,o,r);else if(t.tag===19)Mf(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(fe(we,a),(r.mode&1)===0)r.memoizedState=null;else switch(c){case"forwards":for(o=r.child,c=null;o!==null;)t=o.alternate,t!==null&&So(t)===null&&(c=o),o=o.sibling;o=c,o===null?(c=r.child,r.child=null):(c=o.sibling,o.sibling=null),pu(r,!1,c,o,h);break;case"backwards":for(o=null,c=r.child,r.child=null;c!==null;){if(t=c.alternate,t!==null&&So(t)===null){r.child=c;break}t=c.sibling,c.sibling=o,o=c,c=t}pu(r,!0,o,null,h);break;case"together":pu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ao(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function an(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),cr|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Un(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Un(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function Ey(t,r,o){switch(r.tag){case 3:xf(r),Br();break;case 5:Qh(r);break;case 1:st(r.type)&&ho(r);break;case 4:Ka(r,r.stateNode.containerInfo);break;case 10:var a=r.type._context,c=r.memoizedProps.value;fe(vo,a._currentValue),a._currentValue=c;break;case 13:if(a=r.memoizedState,a!==null)return a.dehydrated!==null?(fe(we,we.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Lf(t,r,o):(fe(we,we.current&1),t=an(t,r,o),t!==null?t.sibling:null);fe(we,we.current&1);break;case 19:if(a=(o&r.childLanes)!==0,(t.flags&128)!==0){if(a)return bf(t,r,o);r.flags|=128}if(c=r.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),fe(we,we.current),a)break;return null;case 22:case 23:return r.lanes=0,Pf(t,r,o)}return an(t,r,o)}var Ff,mu,Uf,zf;Ff=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},mu=function(){},Uf=function(t,r,o,a){var c=t.memoizedProps;if(c!==a){t=r.stateNode,ar(qt.current);var h=null;switch(o){case"input":c=Hl(t,c),a=Hl(t,a),h=[];break;case"select":c=U({},c,{value:void 0}),a=U({},a,{value:void 0}),h=[];break;case"textarea":c=Kl(t,c),a=Kl(t,a),h=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=ao)}Ql(o,a);var p;o=null;for(k in c)if(!a.hasOwnProperty(k)&&c.hasOwnProperty(k)&&c[k]!=null)if(k==="style"){var _=c[k];for(p in _)_.hasOwnProperty(p)&&(o||(o={}),o[p]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(l.hasOwnProperty(k)?h||(h=[]):(h=h||[]).push(k,null));for(k in a){var y=a[k];if(_=c?.[k],a.hasOwnProperty(k)&&y!==_&&(y!=null||_!=null))if(k==="style")if(_){for(p in _)!_.hasOwnProperty(p)||y&&y.hasOwnProperty(p)||(o||(o={}),o[p]="");for(p in y)y.hasOwnProperty(p)&&_[p]!==y[p]&&(o||(o={}),o[p]=y[p])}else o||(h||(h=[]),h.push(k,o)),o=y;else k==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,_=_?_.__html:void 0,y!=null&&_!==y&&(h=h||[]).push(k,y)):k==="children"?typeof y!="string"&&typeof y!="number"||(h=h||[]).push(k,""+y):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(l.hasOwnProperty(k)?(y!=null&&k==="onScroll"&&me("scroll",t),h||_===y||(h=[])):(h=h||[]).push(k,y))}o&&(h=h||[]).push("style",o);var k=h;(r.updateQueue=k)&&(r.flags|=4)}},zf=function(t,r,o,a){o!==a&&(r.flags|=4)};function Ji(t,r){if(!ye)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function qe(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,a=0;if(r)for(var c=t.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)o|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=a,t.childLanes=o,r}function Sy(t,r,o){var a=r.pendingProps;switch(Fa(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(r),null;case 1:return st(r.type)&&co(),qe(r),null;case 3:return a=r.stateNode,Kr(),ge(it),ge(Ge),Ya(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(go(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,xt!==null&&(ku(xt),xt=null))),mu(t,r),qe(r),null;case 5:qa(r);var c=ar(Ki.current);if(o=r.type,t!==null&&r.stateNode!=null)Uf(t,r,o,a,c),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!a){if(r.stateNode===null)throw Error(n(166));return qe(r),null}if(t=ar(qt.current),go(r)){a=r.stateNode,o=r.type;var h=r.memoizedProps;switch(a[Kt]=r,a[Vi]=h,t=(r.mode&1)!==0,o){case"dialog":me("cancel",a),me("close",a);break;case"iframe":case"object":case"embed":me("load",a);break;case"video":case"audio":for(c=0;c<zi.length;c++)me(zi[c],a);break;case"source":me("error",a);break;case"img":case"image":case"link":me("error",a),me("load",a);break;case"details":me("toggle",a);break;case"input":vd(a,h),me("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},me("invalid",a);break;case"textarea":Ed(a,h),me("invalid",a)}Ql(o,h),c=null;for(var p in h)if(h.hasOwnProperty(p)){var _=h[p];p==="children"?typeof _=="string"?a.textContent!==_&&(h.suppressHydrationWarning!==!0&&lo(a.textContent,_,t),c=["children",_]):typeof _=="number"&&a.textContent!==""+_&&(h.suppressHydrationWarning!==!0&&lo(a.textContent,_,t),c=["children",""+_]):l.hasOwnProperty(p)&&_!=null&&p==="onScroll"&&me("scroll",a)}switch(o){case"input":Us(a),wd(a,h,!0);break;case"textarea":Us(a),Cd(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=ao)}a=c,r.updateQueue=a,a!==null&&(r.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Id(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=p.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=p.createElement(o,{is:a.is}):(t=p.createElement(o),o==="select"&&(p=t,a.multiple?p.multiple=!0:a.size&&(p.size=a.size))):t=p.createElementNS(t,o),t[Kt]=r,t[Vi]=a,Ff(t,r,!1,!1),r.stateNode=t;e:{switch(p=Yl(o,a),o){case"dialog":me("cancel",t),me("close",t),c=a;break;case"iframe":case"object":case"embed":me("load",t),c=a;break;case"video":case"audio":for(c=0;c<zi.length;c++)me(zi[c],t);c=a;break;case"source":me("error",t),c=a;break;case"img":case"image":case"link":me("error",t),me("load",t),c=a;break;case"details":me("toggle",t),c=a;break;case"input":vd(t,a),c=Hl(t,a),me("invalid",t);break;case"option":c=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},c=U({},a,{value:void 0}),me("invalid",t);break;case"textarea":Ed(t,a),c=Kl(t,a),me("invalid",t);break;default:c=a}Ql(o,c),_=c;for(h in _)if(_.hasOwnProperty(h)){var y=_[h];h==="style"?Nd(t,y):h==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&Td(t,y)):h==="children"?typeof y=="string"?(o!=="textarea"||y!=="")&&wi(t,y):typeof y=="number"&&wi(t,""+y):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(l.hasOwnProperty(h)?y!=null&&h==="onScroll"&&me("scroll",t):y!=null&&Ae(t,h,y,p))}switch(o){case"input":Us(t),wd(t,a,!1);break;case"textarea":Us(t),Cd(t);break;case"option":a.value!=null&&t.setAttribute("value",""+ae(a.value));break;case"select":t.multiple=!!a.multiple,h=a.value,h!=null?Rr(t,!!a.multiple,h,!1):a.defaultValue!=null&&Rr(t,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=ao)}switch(o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return qe(r),null;case 6:if(t&&r.stateNode!=null)zf(t,r,t.memoizedProps,a);else{if(typeof a!="string"&&r.stateNode===null)throw Error(n(166));if(o=ar(Ki.current),ar(qt.current),go(r)){if(a=r.stateNode,o=r.memoizedProps,a[Kt]=r,(h=a.nodeValue!==o)&&(t=gt,t!==null))switch(t.tag){case 3:lo(a.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lo(a.nodeValue,o,(t.mode&1)!==0)}h&&(r.flags|=4)}else a=(o.nodeType===9?o:o.ownerDocument).createTextNode(a),a[Kt]=r,r.stateNode=a}return qe(r),null;case 13:if(ge(we),a=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&_t!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Wh(),Br(),r.flags|=98560,h=!1;else if(h=go(r),a!==null&&a.dehydrated!==null){if(t===null){if(!h)throw Error(n(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));h[Kt]=r}else Br(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;qe(r),h=!1}else xt!==null&&(ku(xt),xt=null),h=!0;if(!h)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(we.current&1)!==0?De===0&&(De=3):Pu())),r.updateQueue!==null&&(r.flags|=4),qe(r),null);case 4:return Kr(),mu(t,r),t===null&&ji(r.stateNode.containerInfo),qe(r),null;case 10:return Ba(r.type._context),qe(r),null;case 17:return st(r.type)&&co(),qe(r),null;case 19:if(ge(we),h=r.memoizedState,h===null)return qe(r),null;if(a=(r.flags&128)!==0,p=h.rendering,p===null)if(a)Ji(h,!1);else{if(De!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(p=So(t),p!==null){for(r.flags|=128,Ji(h,!1),a=p.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),r.subtreeFlags=0,a=o,o=r.child;o!==null;)h=o,t=a,h.flags&=14680066,p=h.alternate,p===null?(h.childLanes=0,h.lanes=t,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=p.childLanes,h.lanes=p.lanes,h.child=p.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=p.memoizedProps,h.memoizedState=p.memoizedState,h.updateQueue=p.updateQueue,h.type=p.type,t=p.dependencies,h.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return fe(we,we.current&1|2),r.child}t=t.sibling}h.tail!==null&&ke()>Xr&&(r.flags|=128,a=!0,Ji(h,!1),r.lanes=4194304)}else{if(!a)if(t=So(p),t!==null){if(r.flags|=128,a=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Ji(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!ye)return qe(r),null}else 2*ke()-h.renderingStartTime>Xr&&o!==1073741824&&(r.flags|=128,a=!0,Ji(h,!1),r.lanes=4194304);h.isBackwards?(p.sibling=r.child,r.child=p):(o=h.last,o!==null?o.sibling=p:r.child=p,h.last=p)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=ke(),r.sibling=null,o=we.current,fe(we,a?o&1|2:o&1),r):(qe(r),null);case 22:case 23:return Ru(),a=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(r.flags|=8192),a&&(r.mode&1)!==0?(vt&1073741824)!==0&&(qe(r),r.subtreeFlags&6&&(r.flags|=8192)):qe(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Cy(t,r){switch(Fa(r),r.tag){case 1:return st(r.type)&&co(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Kr(),ge(it),ge(Ge),Ya(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return qa(r),null;case 13:if(ge(we),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Br()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ge(we),null;case 4:return Kr(),null;case 10:return Ba(r.type._context),null;case 22:case 23:return Ru(),null;case 24:return null;default:return null}}var Oo=!1,Qe=!1,Iy=typeof WeakSet=="function"?WeakSet:Set,F=null;function Qr(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(a){Ce(t,r,a)}else o.current=null}function gu(t,r,o){try{o()}catch(a){Ce(t,r,a)}}var jf=!1;function Ty(t,r){if(Ra=Ys,t=_h(),wa(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var c=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{o.nodeType,h.nodeType}catch{o=null;break e}var p=0,_=-1,y=-1,k=0,P=0,A=t,N=null;t:for(;;){for(var b;A!==o||c!==0&&A.nodeType!==3||(_=p+c),A!==h||a!==0&&A.nodeType!==3||(y=p+a),A.nodeType===3&&(p+=A.nodeValue.length),(b=A.firstChild)!==null;)N=A,A=b;for(;;){if(A===t)break t;if(N===o&&++k===c&&(_=p),N===h&&++P===a&&(y=p),(b=A.nextSibling)!==null)break;A=N,N=A.parentNode}A=b}o=_===-1||y===-1?null:{start:_,end:y}}else o=null}o=o||{start:0,end:0}}else o=null;for(Pa={focusedElem:t,selectionRange:o},Ys=!1,F=r;F!==null;)if(r=F,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,F=t;else for(;F!==null;){r=F;try{var z=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var j=z.memoizedProps,Ne=z.memoizedState,I=r.stateNode,E=I.getSnapshotBeforeUpdate(r.elementType===r.type?j:Dt(r.type,j),Ne);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=r.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(x){Ce(r,r.return,x)}if(t=r.sibling,t!==null){t.return=r.return,F=t;break}F=r.return}return z=jf,jf=!1,z}function Zi(t,r,o){var a=r.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&t)===t){var h=c.destroy;c.destroy=void 0,h!==void 0&&gu(r,o,h)}c=c.next}while(c!==a)}}function xo(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var a=o.create;o.destroy=a()}o=o.next}while(o!==r)}}function _u(t){var r=t.ref;if(r!==null){var o=t.stateNode;t.tag,t=o,typeof r=="function"?r(t):r.current=t}}function Wf(t){var r=t.alternate;r!==null&&(t.alternate=null,Wf(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Kt],delete r[Vi],delete r[Da],delete r[ly],delete r[ay])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vf(t){return t.tag===5||t.tag===3||t.tag===4}function Bf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vu(t,r,o){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ao));else if(a!==4&&(t=t.child,t!==null))for(vu(t,r,o),t=t.sibling;t!==null;)vu(t,r,o),t=t.sibling}function yu(t,r,o){var a=t.tag;if(a===5||a===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(yu(t,r,o),t=t.sibling;t!==null;)yu(t,r,o),t=t.sibling}var He=null,Lt=!1;function Dn(t,r,o){for(o=o.child;o!==null;)Hf(t,r,o),o=o.sibling}function Hf(t,r,o){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Hs,o)}catch{}switch(o.tag){case 5:Qe||Qr(o,r);case 6:var a=He,c=Lt;He=null,Dn(t,r,o),He=a,Lt=c,He!==null&&(Lt?(t=He,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):He.removeChild(o.stateNode));break;case 18:He!==null&&(Lt?(t=He,o=o.stateNode,t.nodeType===8?xa(t.parentNode,o):t.nodeType===1&&xa(t,o),Oi(t)):xa(He,o.stateNode));break;case 4:a=He,c=Lt,He=o.stateNode.containerInfo,Lt=!0,Dn(t,r,o),He=a,Lt=c;break;case 0:case 11:case 14:case 15:if(!Qe&&(a=o.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var h=c,p=h.destroy;h=h.tag,p!==void 0&&((h&2)!==0||(h&4)!==0)&&gu(o,r,p),c=c.next}while(c!==a)}Dn(t,r,o);break;case 1:if(!Qe&&(Qr(o,r),a=o.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(_){Ce(o,r,_)}Dn(t,r,o);break;case 21:Dn(t,r,o);break;case 22:o.mode&1?(Qe=(a=Qe)||o.memoizedState!==null,Dn(t,r,o),Qe=a):Dn(t,r,o);break;default:Dn(t,r,o)}}function $f(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Iy),r.forEach(function(a){var c=Ly.bind(null,t,a);o.has(a)||(o.add(a),a.then(c,c))})}}function Mt(t,r){var o=r.deletions;if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];try{var h=t,p=r,_=p;e:for(;_!==null;){switch(_.tag){case 5:He=_.stateNode,Lt=!1;break e;case 3:He=_.stateNode.containerInfo,Lt=!0;break e;case 4:He=_.stateNode.containerInfo,Lt=!0;break e}_=_.return}if(He===null)throw Error(n(160));Hf(h,p,c),He=null,Lt=!1;var y=c.alternate;y!==null&&(y.return=null),c.return=null}catch(k){Ce(c,r,k)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Gf(r,t),r=r.sibling}function Gf(t,r){var o=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(r,t),Yt(t),a&4){try{Zi(3,t,t.return),xo(3,t)}catch(j){Ce(t,t.return,j)}try{Zi(5,t,t.return)}catch(j){Ce(t,t.return,j)}}break;case 1:Mt(r,t),Yt(t),a&512&&o!==null&&Qr(o,o.return);break;case 5:if(Mt(r,t),Yt(t),a&512&&o!==null&&Qr(o,o.return),t.flags&32){var c=t.stateNode;try{wi(c,"")}catch(j){Ce(t,t.return,j)}}if(a&4&&(c=t.stateNode,c!=null)){var h=t.memoizedProps,p=o!==null?o.memoizedProps:h,_=t.type,y=t.updateQueue;if(t.updateQueue=null,y!==null)try{_==="input"&&h.type==="radio"&&h.name!=null&&yd(c,h),Yl(_,p);var k=Yl(_,h);for(p=0;p<y.length;p+=2){var P=y[p],A=y[p+1];P==="style"?Nd(c,A):P==="dangerouslySetInnerHTML"?Td(c,A):P==="children"?wi(c,A):Ae(c,P,A,k)}switch(_){case"input":$l(c,h);break;case"textarea":Sd(c,h);break;case"select":var N=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var b=h.value;b!=null?Rr(c,!!h.multiple,b,!1):N!==!!h.multiple&&(h.defaultValue!=null?Rr(c,!!h.multiple,h.defaultValue,!0):Rr(c,!!h.multiple,h.multiple?[]:"",!1))}c[Vi]=h}catch(j){Ce(t,t.return,j)}}break;case 6:if(Mt(r,t),Yt(t),a&4){if(t.stateNode===null)throw Error(n(162));c=t.stateNode,h=t.memoizedProps;try{c.nodeValue=h}catch(j){Ce(t,t.return,j)}}break;case 3:if(Mt(r,t),Yt(t),a&4&&o!==null&&o.memoizedState.isDehydrated)try{Oi(r.containerInfo)}catch(j){Ce(t,t.return,j)}break;case 4:Mt(r,t),Yt(t);break;case 13:Mt(r,t),Yt(t),c=t.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(Su=ke())),a&4&&$f(t);break;case 22:if(P=o!==null&&o.memoizedState!==null,t.mode&1?(Qe=(k=Qe)||P,Mt(r,t),Qe=k):Mt(r,t),Yt(t),a&8192){if(k=t.memoizedState!==null,(t.stateNode.isHidden=k)&&!P&&(t.mode&1)!==0)for(F=t,P=t.child;P!==null;){for(A=F=P;F!==null;){switch(N=F,b=N.child,N.tag){case 0:case 11:case 14:case 15:Zi(4,N,N.return);break;case 1:Qr(N,N.return);var z=N.stateNode;if(typeof z.componentWillUnmount=="function"){a=N,o=N.return;try{r=a,z.props=r.memoizedProps,z.state=r.memoizedState,z.componentWillUnmount()}catch(j){Ce(a,o,j)}}break;case 5:Qr(N,N.return);break;case 22:if(N.memoizedState!==null){Qf(A);continue}}b!==null?(b.return=N,F=b):Qf(A)}P=P.sibling}e:for(P=null,A=t;;){if(A.tag===5){if(P===null){P=A;try{c=A.stateNode,k?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(_=A.stateNode,y=A.memoizedProps.style,p=y!=null&&y.hasOwnProperty("display")?y.display:null,_.style.display=kd("display",p))}catch(j){Ce(t,t.return,j)}}}else if(A.tag===6){if(P===null)try{A.stateNode.nodeValue=k?"":A.memoizedProps}catch(j){Ce(t,t.return,j)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===t)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===t)break e;for(;A.sibling===null;){if(A.return===null||A.return===t)break e;P===A&&(P=null),A=A.return}P===A&&(P=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:Mt(r,t),Yt(t),a&4&&$f(t);break;case 21:break;default:Mt(r,t),Yt(t)}}function Yt(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Vf(o)){var a=o;break e}o=o.return}throw Error(n(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(wi(c,""),a.flags&=-33);var h=Bf(t);yu(t,h,c);break;case 3:case 4:var p=a.stateNode.containerInfo,_=Bf(t);vu(t,_,p);break;default:throw Error(n(161))}}catch(y){Ce(t,t.return,y)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function ky(t,r,o){F=t,Kf(t)}function Kf(t,r,o){for(var a=(t.mode&1)!==0;F!==null;){var c=F,h=c.child;if(c.tag===22&&a){var p=c.memoizedState!==null||Oo;if(!p){var _=c.alternate,y=_!==null&&_.memoizedState!==null||Qe;_=Oo;var k=Qe;if(Oo=p,(Qe=y)&&!k)for(F=c;F!==null;)p=F,y=p.child,p.tag===22&&p.memoizedState!==null?Yf(c):y!==null?(y.return=p,F=y):Yf(c);for(;h!==null;)F=h,Kf(h),h=h.sibling;F=c,Oo=_,Qe=k}qf(t)}else(c.subtreeFlags&8772)!==0&&h!==null?(h.return=c,F=h):qf(t)}}function qf(t){for(;F!==null;){var r=F;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Qe||xo(5,r);break;case 1:var a=r.stateNode;if(r.flags&4&&!Qe)if(o===null)a.componentDidMount();else{var c=r.elementType===r.type?o.memoizedProps:Dt(r.type,o.memoizedProps);a.componentDidUpdate(c,o.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=r.updateQueue;h!==null&&qh(r,h,a);break;case 3:var p=r.updateQueue;if(p!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}qh(r,p,o)}break;case 5:var _=r.stateNode;if(o===null&&r.flags&4){o=_;var y=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&o.focus();break;case"img":y.src&&(o.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var k=r.alternate;if(k!==null){var P=k.memoizedState;if(P!==null){var A=P.dehydrated;A!==null&&Oi(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Qe||r.flags&512&&_u(r)}catch(N){Ce(r,r.return,N)}}if(r===t){F=null;break}if(o=r.sibling,o!==null){o.return=r.return,F=o;break}F=r.return}}function Qf(t){for(;F!==null;){var r=F;if(r===t){F=null;break}var o=r.sibling;if(o!==null){o.return=r.return,F=o;break}F=r.return}}function Yf(t){for(;F!==null;){var r=F;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{xo(4,r)}catch(y){Ce(r,o,y)}break;case 1:var a=r.stateNode;if(typeof a.componentDidMount=="function"){var c=r.return;try{a.componentDidMount()}catch(y){Ce(r,c,y)}}var h=r.return;try{_u(r)}catch(y){Ce(r,h,y)}break;case 5:var p=r.return;try{_u(r)}catch(y){Ce(r,p,y)}}}catch(y){Ce(r,r.return,y)}if(r===t){F=null;break}var _=r.sibling;if(_!==null){_.return=r.return,F=_;break}F=r.return}}var Ny=Math.ceil,Do=Te.ReactCurrentDispatcher,wu=Te.ReactCurrentOwner,It=Te.ReactCurrentBatchConfig,re=0,Ue=null,Re=null,$e=0,vt=0,Yr=Rn(0),De=0,es=null,cr=0,Lo=0,Eu=0,ts=null,lt=null,Su=0,Xr=1/0,un=null,Mo=!1,Cu=null,Ln=null,bo=!1,Mn=null,Fo=0,ns=0,Iu=null,Uo=-1,zo=0;function Je(){return(re&6)!==0?ke():Uo!==-1?Uo:Uo=ke()}function bn(t){return(t.mode&1)===0?1:(re&2)!==0&&$e!==0?$e&-$e:cy.transition!==null?(zo===0&&(zo=Vd()),zo):(t=ue,t!==0||(t=window.event,t=t===void 0?16:Xd(t.type)),t)}function bt(t,r,o,a){if(50<ns)throw ns=0,Iu=null,Error(n(185));ki(t,o,a),((re&2)===0||t!==Ue)&&(t===Ue&&((re&2)===0&&(Lo|=o),De===4&&Fn(t,$e)),at(t,a),o===1&&re===0&&(r.mode&1)===0&&(Xr=ke()+500,fo&&An()))}function at(t,r){var o=t.callbackNode;cv(t,r);var a=Ks(t,t===Ue?$e:0);if(a===0)o!==null&&zd(o),t.callbackNode=null,t.callbackPriority=0;else if(r=a&-a,t.callbackPriority!==r){if(o!=null&&zd(o),r===1)t.tag===0?uy(Jf.bind(null,t)):bh(Jf.bind(null,t)),sy(function(){(re&6)===0&&An()}),o=null;else{switch(Bd(a)){case 1:o=ra;break;case 4:o=jd;break;case 16:o=Bs;break;case 536870912:o=Wd;break;default:o=Bs}o=op(o,Xf.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Xf(t,r){if(Uo=-1,zo=0,(re&6)!==0)throw Error(n(327));var o=t.callbackNode;if(Jr()&&t.callbackNode!==o)return null;var a=Ks(t,t===Ue?$e:0);if(a===0)return null;if((a&30)!==0||(a&t.expiredLanes)!==0||r)r=jo(t,a);else{r=a;var c=re;re|=2;var h=ep();(Ue!==t||$e!==r)&&(un=null,Xr=ke()+500,hr(t,r));do try{Ay();break}catch(_){Zf(t,_)}while(!0);Va(),Do.current=h,re=c,Re!==null?r=0:(Ue=null,$e=0,r=De)}if(r!==0){if(r===2&&(c=ia(t),c!==0&&(a=c,r=Tu(t,c))),r===1)throw o=es,hr(t,0),Fn(t,a),at(t,ke()),o;if(r===6)Fn(t,a);else{if(c=t.current.alternate,(a&30)===0&&!Ry(c)&&(r=jo(t,a),r===2&&(h=ia(t),h!==0&&(a=h,r=Tu(t,h))),r===1))throw o=es,hr(t,0),Fn(t,a),at(t,ke()),o;switch(t.finishedWork=c,t.finishedLanes=a,r){case 0:case 1:throw Error(n(345));case 2:fr(t,lt,un);break;case 3:if(Fn(t,a),(a&130023424)===a&&(r=Su+500-ke(),10<r)){if(Ks(t,0)!==0)break;if(c=t.suspendedLanes,(c&a)!==a){Je(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=Oa(fr.bind(null,t,lt,un),r);break}fr(t,lt,un);break;case 4:if(Fn(t,a),(a&4194240)===a)break;for(r=t.eventTimes,c=-1;0<a;){var p=31-At(a);h=1<<p,p=r[p],p>c&&(c=p),a&=~h}if(a=c,a=ke()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ny(a/1960))-a,10<a){t.timeoutHandle=Oa(fr.bind(null,t,lt,un),a);break}fr(t,lt,un);break;case 5:fr(t,lt,un);break;default:throw Error(n(329))}}}return at(t,ke()),t.callbackNode===o?Xf.bind(null,t):null}function Tu(t,r){var o=ts;return t.current.memoizedState.isDehydrated&&(hr(t,r).flags|=256),t=jo(t,r),t!==2&&(r=lt,lt=o,r!==null&&ku(r)),t}function ku(t){lt===null?lt=t:lt.push.apply(lt,t)}function Ry(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var a=0;a<o.length;a++){var c=o[a],h=c.getSnapshot;c=c.value;try{if(!Ot(h(),c))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fn(t,r){for(r&=~Eu,r&=~Lo,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-At(r),a=1<<o;t[o]=-1,r&=~a}}function Jf(t){if((re&6)!==0)throw Error(n(327));Jr();var r=Ks(t,0);if((r&1)===0)return at(t,ke()),null;var o=jo(t,r);if(t.tag!==0&&o===2){var a=ia(t);a!==0&&(r=a,o=Tu(t,a))}if(o===1)throw o=es,hr(t,0),Fn(t,r),at(t,ke()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,fr(t,lt,un),at(t,ke()),null}function Nu(t,r){var o=re;re|=1;try{return t(r)}finally{re=o,re===0&&(Xr=ke()+500,fo&&An())}}function dr(t){Mn!==null&&Mn.tag===0&&(re&6)===0&&Jr();var r=re;re|=1;var o=It.transition,a=ue;try{if(It.transition=null,ue=1,t)return t()}finally{ue=a,It.transition=o,re=r,(re&6)===0&&An()}}function Ru(){vt=Yr.current,ge(Yr)}function hr(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,iy(o)),Re!==null)for(o=Re.return;o!==null;){var a=o;switch(Fa(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&co();break;case 3:Kr(),ge(it),ge(Ge),Ya();break;case 5:qa(a);break;case 4:Kr();break;case 13:ge(we);break;case 19:ge(we);break;case 10:Ba(a.type._context);break;case 22:case 23:Ru()}o=o.return}if(Ue=t,Re=t=Un(t.current,null),$e=vt=r,De=0,es=null,Eu=Lo=cr=0,lt=ts=null,lr!==null){for(r=0;r<lr.length;r++)if(o=lr[r],a=o.interleaved,a!==null){o.interleaved=null;var c=a.next,h=o.pending;if(h!==null){var p=h.next;h.next=c,a.next=p}o.pending=a}lr=null}return t}function Zf(t,r){do{var o=Re;try{if(Va(),Co.current=No,Io){for(var a=Ee.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Io=!1}if(ur=0,Fe=xe=Ee=null,qi=!1,Qi=0,wu.current=null,o===null||o.return===null){De=1,es=r,Re=null;break}e:{var h=t,p=o.return,_=o,y=r;if(r=$e,_.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var k=y,P=_,A=P.tag;if((P.mode&1)===0&&(A===0||A===11||A===15)){var N=P.alternate;N?(P.updateQueue=N.updateQueue,P.memoizedState=N.memoizedState,P.lanes=N.lanes):(P.updateQueue=null,P.memoizedState=null)}var b=If(p);if(b!==null){b.flags&=-257,Tf(b,p,_,h,r),b.mode&1&&Cf(h,k,r),r=b,y=k;var z=r.updateQueue;if(z===null){var j=new Set;j.add(y),r.updateQueue=j}else z.add(y);break e}else{if((r&1)===0){Cf(h,k,r),Pu();break e}y=Error(n(426))}}else if(ye&&_.mode&1){var Ne=If(p);if(Ne!==null){(Ne.flags&65536)===0&&(Ne.flags|=256),Tf(Ne,p,_,h,r),ja(qr(y,_));break e}}h=y=qr(y,_),De!==4&&(De=2),ts===null?ts=[h]:ts.push(h),h=p;do{switch(h.tag){case 3:h.flags|=65536,r&=-r,h.lanes|=r;var I=Ef(h,y,r);Kh(h,I);break e;case 1:_=y;var E=h.type,T=h.stateNode;if((h.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ln===null||!Ln.has(T)))){h.flags|=65536,r&=-r,h.lanes|=r;var x=Sf(h,_,r);Kh(h,x);break e}}h=h.return}while(h!==null)}np(o)}catch(W){r=W,Re===o&&o!==null&&(Re=o=o.return);continue}break}while(!0)}function ep(){var t=Do.current;return Do.current=No,t===null?No:t}function Pu(){(De===0||De===3||De===2)&&(De=4),Ue===null||(cr&268435455)===0&&(Lo&268435455)===0||Fn(Ue,$e)}function jo(t,r){var o=re;re|=2;var a=ep();(Ue!==t||$e!==r)&&(un=null,hr(t,r));do try{Py();break}catch(c){Zf(t,c)}while(!0);if(Va(),re=o,Do.current=a,Re!==null)throw Error(n(261));return Ue=null,$e=0,De}function Py(){for(;Re!==null;)tp(Re)}function Ay(){for(;Re!==null&&!tv();)tp(Re)}function tp(t){var r=sp(t.alternate,t,vt);t.memoizedProps=t.pendingProps,r===null?np(t):Re=r,wu.current=null}function np(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=Sy(o,r,vt),o!==null){Re=o;return}}else{if(o=Cy(o,r),o!==null){o.flags&=32767,Re=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Re=null;return}}if(r=r.sibling,r!==null){Re=r;return}Re=r=t}while(r!==null);De===0&&(De=5)}function fr(t,r,o){var a=ue,c=It.transition;try{It.transition=null,ue=1,Oy(t,r,o,a)}finally{It.transition=c,ue=a}return null}function Oy(t,r,o,a){do Jr();while(Mn!==null);if((re&6)!==0)throw Error(n(327));o=t.finishedWork;var c=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var h=o.lanes|o.childLanes;if(dv(t,h),t===Ue&&(Re=Ue=null,$e=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||bo||(bo=!0,op(Bs,function(){return Jr(),null})),h=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||h){h=It.transition,It.transition=null;var p=ue;ue=1;var _=re;re|=4,wu.current=null,Ty(t,o),Gf(o,t),Xv(Pa),Ys=!!Ra,Pa=Ra=null,t.current=o,ky(o),nv(),re=_,ue=p,It.transition=h}else t.current=o;if(bo&&(bo=!1,Mn=t,Fo=c),h=t.pendingLanes,h===0&&(Ln=null),sv(o.stateNode),at(t,ke()),r!==null)for(a=t.onRecoverableError,o=0;o<r.length;o++)c=r[o],a(c.value,{componentStack:c.stack,digest:c.digest});if(Mo)throw Mo=!1,t=Cu,Cu=null,t;return(Fo&1)!==0&&t.tag!==0&&Jr(),h=t.pendingLanes,(h&1)!==0?t===Iu?ns++:(ns=0,Iu=t):ns=0,An(),null}function Jr(){if(Mn!==null){var t=Bd(Fo),r=It.transition,o=ue;try{if(It.transition=null,ue=16>t?16:t,Mn===null)var a=!1;else{if(t=Mn,Mn=null,Fo=0,(re&6)!==0)throw Error(n(331));var c=re;for(re|=4,F=t.current;F!==null;){var h=F,p=h.child;if((F.flags&16)!==0){var _=h.deletions;if(_!==null){for(var y=0;y<_.length;y++){var k=_[y];for(F=k;F!==null;){var P=F;switch(P.tag){case 0:case 11:case 15:Zi(8,P,h)}var A=P.child;if(A!==null)A.return=P,F=A;else for(;F!==null;){P=F;var N=P.sibling,b=P.return;if(Wf(P),P===k){F=null;break}if(N!==null){N.return=b,F=N;break}F=b}}}var z=h.alternate;if(z!==null){var j=z.child;if(j!==null){z.child=null;do{var Ne=j.sibling;j.sibling=null,j=Ne}while(j!==null)}}F=h}}if((h.subtreeFlags&2064)!==0&&p!==null)p.return=h,F=p;else e:for(;F!==null;){if(h=F,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Zi(9,h,h.return)}var I=h.sibling;if(I!==null){I.return=h.return,F=I;break e}F=h.return}}var E=t.current;for(F=E;F!==null;){p=F;var T=p.child;if((p.subtreeFlags&2064)!==0&&T!==null)T.return=p,F=T;else e:for(p=E;F!==null;){if(_=F,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:xo(9,_)}}catch(W){Ce(_,_.return,W)}if(_===p){F=null;break e}var x=_.sibling;if(x!==null){x.return=_.return,F=x;break e}F=_.return}}if(re=c,An(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Hs,t)}catch{}a=!0}return a}finally{ue=o,It.transition=r}}return!1}function rp(t,r,o){r=qr(o,r),r=Ef(t,r,1),t=xn(t,r,1),r=Je(),t!==null&&(ki(t,1,r),at(t,r))}function Ce(t,r,o){if(t.tag===3)rp(t,t,o);else for(;r!==null;){if(r.tag===3){rp(r,t,o);break}else if(r.tag===1){var a=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ln===null||!Ln.has(a))){t=qr(o,t),t=Sf(r,t,1),r=xn(r,t,1),t=Je(),r!==null&&(ki(r,1,t),at(r,t));break}}r=r.return}}function xy(t,r,o){var a=t.pingCache;a!==null&&a.delete(r),r=Je(),t.pingedLanes|=t.suspendedLanes&o,Ue===t&&($e&o)===o&&(De===4||De===3&&($e&130023424)===$e&&500>ke()-Su?hr(t,0):Eu|=o),at(t,r)}function ip(t,r){r===0&&((t.mode&1)===0?r=1:(r=Gs,Gs<<=1,(Gs&130023424)===0&&(Gs=4194304)));var o=Je();t=on(t,r),t!==null&&(ki(t,r,o),at(t,o))}function Dy(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),ip(t,o)}function Ly(t,r){var o=0;switch(t.tag){case 13:var a=t.stateNode,c=t.memoizedState;c!==null&&(o=c.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(n(314))}a!==null&&a.delete(r),ip(t,o)}var sp;sp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||it.current)ot=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return ot=!1,Ey(t,r,o);ot=(t.flags&131072)!==0}else ot=!1,ye&&(r.flags&1048576)!==0&&Fh(r,mo,r.index);switch(r.lanes=0,r.tag){case 2:var a=r.type;Ao(t,r),t=r.pendingProps;var c=jr(r,Ge.current);Gr(r,o),c=Za(null,r,a,t,c,o);var h=eu();return r.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,st(a)?(h=!0,ho(r)):h=!1,r.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Ga(r),c.updater=Ro,r.stateNode=c,c._reactInternals=r,ou(r,a,t,o),r=cu(null,r,a,!0,h,o)):(r.tag=0,ye&&h&&ba(r),Xe(null,r,c,o),r=r.child),r;case 16:a=r.elementType;e:{switch(Ao(t,r),t=r.pendingProps,c=a._init,a=c(a._payload),r.type=a,c=r.tag=by(a),t=Dt(a,t),c){case 0:r=uu(null,r,a,t,o);break e;case 1:r=Of(null,r,a,t,o);break e;case 11:r=kf(null,r,a,t,o);break e;case 14:r=Nf(null,r,a,Dt(a.type,t),o);break e}throw Error(n(306,a,""))}return r;case 0:return a=r.type,c=r.pendingProps,c=r.elementType===a?c:Dt(a,c),uu(t,r,a,c,o);case 1:return a=r.type,c=r.pendingProps,c=r.elementType===a?c:Dt(a,c),Of(t,r,a,c,o);case 3:e:{if(xf(r),t===null)throw Error(n(387));a=r.pendingProps,h=r.memoizedState,c=h.element,Gh(t,r),Eo(r,a,null,o);var p=r.memoizedState;if(a=p.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},r.updateQueue.baseState=h,r.memoizedState=h,r.flags&256){c=qr(Error(n(423)),r),r=Df(t,r,a,o,c);break e}else if(a!==c){c=qr(Error(n(424)),r),r=Df(t,r,a,o,c);break e}else for(_t=Nn(r.stateNode.containerInfo.firstChild),gt=r,ye=!0,xt=null,o=Hh(r,null,a,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Br(),a===c){r=an(t,r,o);break e}Xe(t,r,a,o)}r=r.child}return r;case 5:return Qh(r),t===null&&za(r),a=r.type,c=r.pendingProps,h=t!==null?t.memoizedProps:null,p=c.children,Aa(a,c)?p=null:h!==null&&Aa(a,h)&&(r.flags|=32),Af(t,r),Xe(t,r,p,o),r.child;case 6:return t===null&&za(r),null;case 13:return Lf(t,r,o);case 4:return Ka(r,r.stateNode.containerInfo),a=r.pendingProps,t===null?r.child=Hr(r,null,a,o):Xe(t,r,a,o),r.child;case 11:return a=r.type,c=r.pendingProps,c=r.elementType===a?c:Dt(a,c),kf(t,r,a,c,o);case 7:return Xe(t,r,r.pendingProps,o),r.child;case 8:return Xe(t,r,r.pendingProps.children,o),r.child;case 12:return Xe(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(a=r.type._context,c=r.pendingProps,h=r.memoizedProps,p=c.value,fe(vo,a._currentValue),a._currentValue=p,h!==null)if(Ot(h.value,p)){if(h.children===c.children&&!it.current){r=an(t,r,o);break e}}else for(h=r.child,h!==null&&(h.return=r);h!==null;){var _=h.dependencies;if(_!==null){p=h.child;for(var y=_.firstContext;y!==null;){if(y.context===a){if(h.tag===1){y=ln(-1,o&-o),y.tag=2;var k=h.updateQueue;if(k!==null){k=k.shared;var P=k.pending;P===null?y.next=y:(y.next=P.next,P.next=y),k.pending=y}}h.lanes|=o,y=h.alternate,y!==null&&(y.lanes|=o),Ha(h.return,o,r),_.lanes|=o;break}y=y.next}}else if(h.tag===10)p=h.type===r.type?null:h.child;else if(h.tag===18){if(p=h.return,p===null)throw Error(n(341));p.lanes|=o,_=p.alternate,_!==null&&(_.lanes|=o),Ha(p,o,r),p=h.sibling}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===r){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}Xe(t,r,c.children,o),r=r.child}return r;case 9:return c=r.type,a=r.pendingProps.children,Gr(r,o),c=St(c),a=a(c),r.flags|=1,Xe(t,r,a,o),r.child;case 14:return a=r.type,c=Dt(a,r.pendingProps),c=Dt(a.type,c),Nf(t,r,a,c,o);case 15:return Rf(t,r,r.type,r.pendingProps,o);case 17:return a=r.type,c=r.pendingProps,c=r.elementType===a?c:Dt(a,c),Ao(t,r),r.tag=1,st(a)?(t=!0,ho(r)):t=!1,Gr(r,o),yf(r,a,c),ou(r,a,c,o),cu(null,r,a,!0,t,o);case 19:return bf(t,r,o);case 22:return Pf(t,r,o)}throw Error(n(156,r.tag))};function op(t,r){return Ud(t,r)}function My(t,r,o,a){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(t,r,o,a){return new My(t,r,o,a)}function Au(t){return t=t.prototype,!(!t||!t.isReactComponent)}function by(t){if(typeof t=="function")return Au(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ht)return 11;if(t===$t)return 14}return 2}function Un(t,r){var o=t.alternate;return o===null?(o=Tt(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Wo(t,r,o,a,c,h){var p=2;if(a=t,typeof t=="function")Au(t)&&(p=1);else if(typeof t=="string")p=5;else e:switch(t){case Be:return pr(o.children,c,h,r);case nt:p=8,c|=8;break;case yt:return t=Tt(12,o,r,c|2),t.elementType=yt,t.lanes=h,t;case ft:return t=Tt(13,o,r,c),t.elementType=ft,t.lanes=h,t;case Pt:return t=Tt(19,o,r,c),t.elementType=Pt,t.lanes=h,t;case Se:return Vo(o,c,h,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rt:p=10;break e;case tr:p=9;break e;case Ht:p=11;break e;case $t:p=14;break e;case rt:p=16,a=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=Tt(p,o,r,c),r.elementType=t,r.type=a,r.lanes=h,r}function pr(t,r,o,a){return t=Tt(7,t,a,r),t.lanes=o,t}function Vo(t,r,o,a){return t=Tt(22,t,a,r),t.elementType=Se,t.lanes=o,t.stateNode={isHidden:!1},t}function Ou(t,r,o){return t=Tt(6,t,null,r),t.lanes=o,t}function xu(t,r,o){return r=Tt(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Fy(t,r,o,a,c){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sa(0),this.expirationTimes=sa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sa(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Du(t,r,o,a,c,h,p,_,y){return t=new Fy(t,r,o,_,y),r===1?(r=1,h===!0&&(r|=8)):r=0,h=Tt(3,null,null,r),t.current=h,h.stateNode=t,h.memoizedState={element:a,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ga(h),t}function Uy(t,r,o){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oe,key:a==null?null:""+a,children:t,containerInfo:r,implementation:o}}function lp(t){if(!t)return Pn;t=t._reactInternals;e:{if(nr(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(st(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(st(o))return Lh(t,o,r)}return r}function ap(t,r,o,a,c,h,p,_,y){return t=Du(o,a,!0,t,c,h,p,_,y),t.context=lp(null),o=t.current,a=Je(),c=bn(o),h=ln(a,c),h.callback=r??null,xn(o,h,c),t.current.lanes=c,ki(t,c,a),at(t,a),t}function Bo(t,r,o,a){var c=r.current,h=Je(),p=bn(c);return o=lp(o),r.context===null?r.context=o:r.pendingContext=o,r=ln(h,p),r.payload={element:t},a=a===void 0?null:a,a!==null&&(r.callback=a),t=xn(c,r,p),t!==null&&(bt(t,c,p,h),wo(t,c,p)),p}function Ho(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function up(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Lu(t,r){up(t,r),(t=t.alternate)&&up(t,r)}function zy(){return null}var cp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mu(t){this._internalRoot=t}$o.prototype.render=Mu.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Bo(t,r,null,null)},$o.prototype.unmount=Mu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;dr(function(){Bo(null,t,null,null)}),r[tn]=null}};function $o(t){this._internalRoot=t}$o.prototype.unstable_scheduleHydration=function(t){if(t){var r=Gd();t={blockedOn:null,target:t,priority:r};for(var o=0;o<In.length&&r!==0&&r<In[o].priority;o++);In.splice(o,0,t),o===0&&Qd(t)}};function bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Go(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dp(){}function jy(t,r,o,a,c){if(c){if(typeof a=="function"){var h=a;a=function(){var k=Ho(p);h.call(k)}}var p=ap(r,a,t,0,null,!1,!1,"",dp);return t._reactRootContainer=p,t[tn]=p.current,ji(t.nodeType===8?t.parentNode:t),dr(),p}for(;c=t.lastChild;)t.removeChild(c);if(typeof a=="function"){var _=a;a=function(){var k=Ho(y);_.call(k)}}var y=Du(t,0,!1,null,null,!1,!1,"",dp);return t._reactRootContainer=y,t[tn]=y.current,ji(t.nodeType===8?t.parentNode:t),dr(function(){Bo(r,y,o,a)}),y}function Ko(t,r,o,a,c){var h=o._reactRootContainer;if(h){var p=h;if(typeof c=="function"){var _=c;c=function(){var y=Ho(p);_.call(y)}}Bo(r,p,t,c)}else p=jy(o,r,t,c,a);return Ho(p)}Hd=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ti(r.pendingLanes);o!==0&&(oa(r,o|1),at(r,ke()),(re&6)===0&&(Xr=ke()+500,An()))}break;case 13:dr(function(){var a=on(t,1);if(a!==null){var c=Je();bt(a,t,1,c)}}),Lu(t,1)}},la=function(t){if(t.tag===13){var r=on(t,134217728);if(r!==null){var o=Je();bt(r,t,134217728,o)}Lu(t,134217728)}},$d=function(t){if(t.tag===13){var r=bn(t),o=on(t,r);if(o!==null){var a=Je();bt(o,t,r,a)}Lu(t,r)}},Gd=function(){return ue},Kd=function(t,r){var o=ue;try{return ue=t,r()}finally{ue=o}},Zl=function(t,r,o){switch(r){case"input":if($l(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var a=o[r];if(a!==t&&a.form===t.form){var c=uo(a);if(!c)throw Error(n(90));_d(a),$l(a,c)}}}break;case"textarea":Sd(t,o);break;case"select":r=o.value,r!=null&&Rr(t,!!o.multiple,r,!1)}},Od=Nu,xd=dr;var Wy={usingClientEntryPoint:!1,Events:[Bi,Ur,uo,Pd,Ad,Nu]},rs={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vy={bundleType:rs.bundleType,version:rs.version,rendererPackageName:rs.rendererPackageName,rendererConfig:rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Te.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bd(t),t===null?null:t.stateNode},findFiberByHostInstance:rs.findFiberByHostInstance||zy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qo.isDisabled&&qo.supportsFiber)try{Hs=qo.inject(Vy),Gt=qo}catch{}}return ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wy,ut.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bu(r))throw Error(n(200));return Uy(t,r,null,o)},ut.createRoot=function(t,r){if(!bu(t))throw Error(n(299));var o=!1,a="",c=cp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),r=Du(t,1,!1,null,null,o,!1,a,c),t[tn]=r.current,ji(t.nodeType===8?t.parentNode:t),new Mu(r)},ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=bd(r),t=t===null?null:t.stateNode,t},ut.flushSync=function(t){return dr(t)},ut.hydrate=function(t,r,o){if(!Go(r))throw Error(n(200));return Ko(null,t,r,!0,o)},ut.hydrateRoot=function(t,r,o){if(!bu(t))throw Error(n(405));var a=o!=null&&o.hydratedSources||null,c=!1,h="",p=cp;if(o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),r=ap(r,null,t,1,o??null,c,!1,h,p),t[tn]=r.current,ji(t),a)for(t=0;t<a.length;t++)o=a[t],c=o._getVersion,c=c(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,c]:r.mutableSourceEagerHydrationData.push(o,c);return new $o(r)},ut.render=function(t,r,o){if(!Go(r))throw Error(n(200));return Ko(null,t,r,!1,o)},ut.unmountComponentAtNode=function(t){if(!Go(t))throw Error(n(40));return t._reactRootContainer?(dr(function(){Ko(null,null,t,!1,function(){t._reactRootContainer=null,t[tn]=null})}),!0):!1},ut.unstable_batchedUpdates=Nu,ut.unstable_renderSubtreeIntoContainer=function(t,r,o,a){if(!Go(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Ko(t,r,o,!1,a)},ut.version="18.3.1-next-f1338f8080-20240426",ut}var yp;function Xy(){if(yp)return zu.exports;yp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),zu.exports=Yy(),zu.exports}var wp;function Jy(){if(wp)return Qo;wp=1;var i=Xy();return Qo.createRoot=i.createRoot,Qo.hydrateRoot=i.hydrateRoot,Qo}var Zy=Jy();const ew=Hy(Zy);var wr=Ec();const Ep=i=>{const e=Math.max(0,Math.floor(i/60)),n=Math.max(0,Math.floor(i%60)).toString().padStart(2,"0");return`${e}:${n}`},tw=({user:i})=>{const[e,n]=wr.useState(0),[s,l]=wr.useState(0);wr.useEffect(()=>{const f=setInterval(()=>l(Date.now()/1e3),1e3);return()=>clearInterval(f)},[s]);const u=e?s-e:i.day("today").done,d=()=>{i.day("today",u),n(0)};return Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:"panel-header",children:[Y.jsx("div",{children:"GOAL TODAY"}),Y.jsx("div",{children:Ep(i.day("today").goal)})]}),Y.jsxs("div",{className:"timer-display",children:[" ",Ep(u)," "]}),Y.jsx("div",{className:"control-group",children:e?Y.jsxs(Y.Fragment,{children:[Y.jsx("button",{className:"btn-secondary",onClick:()=>n(0),children:"CANCEL"}),Y.jsx("button",{className:"btn-secondary",onClick:d,children:"PAUSE"})]}):Y.jsx("button",{className:"btn-primary",onClick:()=>n(s),children:"START FOCUS"})})]})},nw=({user:i})=>{const e=i.task("today"),n=Array.isArray(e)?e:e?Object.values(e):[],[s,l]=wr.useState(""),[u,d]=wr.useState(30),[f,m]=wr.useState(void 0),g=S=>m(S),w=()=>{s.trim()&&(i.task("today",s,0,u*60),l(""))},v=(S,O)=>{S.stopPropagation(),i.task("today",O,0,null),f===O&&g(void 0)};return Y.jsxs(Y.Fragment,{children:[Y.jsx("h3",{className:"task-title",children:"TASKS"}),Y.jsxs("div",{className:"task-input-group",children:[Y.jsx("input",{className:"task-input-name",type:"text",value:s,onChange:S=>l(S.target.value),placeholder:"New Task..."}),Y.jsxs("div",{className:"task-input-est-wrapper",children:[Y.jsx("input",{className:"task-input-est",type:"number",value:u,onChange:S=>d(parseInt(S.target.value)||0)}),Y.jsx("span",{className:"text-gray-400 text-xs font-bold",children:"MIN"})]}),Y.jsx("button",{className:"bg-gray-900 text-white px-4 font-bold hover:bg-black transition-colors",onClick:w,children:"+"})]}),Y.jsxs("ul",{className:"task-list",children:[n.map(S=>Y.jsxs("li",{className:`task-item ${S.body===f?"active":""}`,onClick:()=>g(S.body===f?void 0:S.body),children:[Y.jsxs("div",{className:"flex-1",children:[Y.jsx("span",{className:"task-item-name",children:S.body}),Y.jsxs("span",{className:"task-item-est",children:[Math.round((S.goal||0)/60),"m"]})]}),Y.jsx("button",{className:"task-delete-btn",onClick:O=>v(O,S.body),children:"Delete"})]},S.body)),n.length===0&&Y.jsx("li",{className:"text-gray-400 italic text-sm text-center py-4",children:"No tasks yet. Add one above."})]})]})};var Sp={};const Am={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const D=function(i,e){if(!i)throw fi(e)},fi=function(i){return new Error("Firebase Database ("+Am.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};const Om=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let l=i.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},rw=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const l=i[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=i[n++];e[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=i[n++],d=i[n++],f=i[n++],m=((l&7)<<18|(u&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Sc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<i.length;l+=3){const u=i[l],d=l+1<i.length,f=d?i[l+1]:0,m=l+2<i.length,g=m?i[l+2]:0,w=u>>2,v=(u&3)<<4|f>>4;let S=(f&15)<<2|g>>6,O=g&63;m||(O=64,d||(S=64)),s.push(n[w],n[v],n[S],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Om(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):rw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<i.length;){const u=n[i.charAt(l++)],f=l<i.length?n[i.charAt(l)]:0;++l;const g=l<i.length?n[i.charAt(l)]:64;++l;const v=l<i.length?n[i.charAt(l)]:64;if(++l,u==null||f==null||g==null||v==null)throw new iw;const S=u<<2|f>>4;if(s.push(S),g!==64){const O=f<<4&240|g>>2;if(s.push(O),v!==64){const M=g<<6&192|v;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class iw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xm=function(i){const e=Om(i);return Sc.encodeByteArray(e,!0)},ll=function(i){return xm(i).replace(/\./g,"")},al=function(i){try{return Sc.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sw(i){return ms(void 0,i)}function ms(i,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!ow(n)||(i[n]=ms(i[n],e[n]));return i}function ow(i){return i!=="__proto__"}function Dm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const lw=()=>Dm().__FIREBASE_DEFAULTS__,aw=()=>{if(typeof process>"u"||typeof Sp>"u")return;const i=Sp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},uw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&al(i[1]);return e&&JSON.parse(e)},Cc=()=>{try{return lw()||aw()||uw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Lm=i=>{var e,n;return(n=(e=Cc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},cw=i=>{const e=Lm(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Mm=()=>{var i;return(i=Cc())===null||i===void 0?void 0:i.config},bm=i=>{var e;return(e=Cc())===null||e===void 0?void 0:e[`_${i}`]};class Pl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function dw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[ll(JSON.stringify(n)),ll(JSON.stringify(d)),""].join(".")}function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ic(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function hw(){return typeof window<"u"||Fm()}function Fm(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function fw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Um(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mw(){const i=et();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function gw(){return Am.NODE_ADMIN===!0}function _w(){try{return typeof indexedDB=="object"}catch{return!1}}function vw(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}const yw="FirebaseError";class yn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=yw,Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kr.prototype.create)}}class kr{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?ww(u,s):"Error",f=`${this.serviceName}: ${d} (${l}).`;return new yn(l,f,s)}}function ww(i,e){return i.replace(Ew,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const Ew=/\{\$([^}]+)}/g;function gs(i){return JSON.parse(i)}function Le(i){return JSON.stringify(i)}const zm=function(i){let e={},n={},s={},l="";try{const u=i.split(".");e=gs(al(u[0])||""),n=gs(al(u[1])||""),l=u[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:l}},Sw=function(i){const e=zm(i),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Cw=function(i){const e=zm(i).claims;return typeof e=="object"&&e.admin===!0};function Bt(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function oi(i,e){if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}function nc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ul(i,e,n){const s={};for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s[l]=e.call(n,i[l],l,i));return s}function cl(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const u=i[l],d=e[l];if(Cp(u)&&Cp(d)){if(!cl(u,d))return!1}else if(u!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Cp(i){return i!==null&&typeof i=="object"}function pi(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}class Iw{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)s[v]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let v=0;v<16;v++)s[v]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let v=16;v<80;v++){const S=s[v-3]^s[v-8]^s[v-14]^s[v-16];s[v]=(S<<1|S>>>31)&4294967295}let l=this.chain_[0],u=this.chain_[1],d=this.chain_[2],f=this.chain_[3],m=this.chain_[4],g,w;for(let v=0;v<80;v++){v<40?v<20?(g=f^u&(d^f),w=1518500249):(g=u^d^f,w=1859775393):v<60?(g=u&d|f&(u|d),w=2400959708):(g=u^d^f,w=3395469782);const S=(l<<5|l>>>27)+g+m+w+s[v]&4294967295;m=f,f=d,d=(u<<30|u>>>2)&4294967295,u=l,l=S}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let l=0;const u=this.buf_;let d=this.inbuf_;for(;l<n;){if(d===0)for(;l<=s;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(u[d]=e.charCodeAt(l),++d,++l,d===this.blockSize){this.compress_(u),d=0;break}}else for(;l<n;)if(u[d]=e[l],++d,++l,d===this.blockSize){this.compress_(u),d=0;break}}this.inbuf_=d,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let u=24;u>=0;u-=8)e[s]=this.chain_[l]>>u&255,++s;return e}}function jm(i,e){const n=new Tw(i,e);return n.subscribe.bind(n)}class Tw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");kw(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Vu),l.error===void 0&&(l.error=Vu),l.complete===void 0&&(l.complete=Vu);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kw(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Vu(){}function Tc(i,e){return`${i} failed: ${e} argument `}const Nw=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let l=i.charCodeAt(s);if(l>=55296&&l<=56319){const u=l-55296;s++,D(s<i.length,"Surrogate pair missing trail surrogate.");const d=i.charCodeAt(s)-56320;l=65536+(u<<10)+d}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Al=function(i){let e=0;for(let n=0;n<i.length;n++){const s=i.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};function Nt(i){return i&&i._delegate?i._delegate:i}class Kn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mr="[DEFAULT]";class Rw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Pl;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e?.identifier),l=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(l)return null;throw u}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Aw(e))try{this.getOrInitializeService({instanceIdentifier:mr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(e=mr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mr){return this.instances.has(e)}getOptions(e=mr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(u);s===f&&d.resolve(l)}return l}onInit(e,n){var s;const l=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(l,u);const d=this.instances.get(l);return d&&e(d,l),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Pw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=mr){return this.component?this.component.multipleInstances?e:mr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pw(i){return i===mr?void 0:i}function Aw(i){return i.instantiationMode==="EAGER"}class Wm{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Rw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const kc=[];var ce;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ce||(ce={}));const Vm={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},Ow=ce.INFO,xw={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},Dw=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),l=xw[e];if(l)console[l](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ol{constructor(e){this.name=e,this._logLevel=Ow,this._logHandler=Dw,this._userLogHandler=null,kc.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}function Lw(i){kc.forEach(e=>{e.setLogLevel(i)})}function Mw(i,e){for(const n of kc){let s=null;e&&e.level&&(s=Vm[e.level]),i===null?n.userLogHandler=null:n.userLogHandler=(l,u,...d)=>{const f=d.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");u>=(s??l.logLevel)&&i({level:ce[u].toLowerCase(),message:f,args:d,type:l.name})}}}const bw=(i,e)=>e.some(n=>i instanceof n);let Ip,Tp;function Fw(){return Ip||(Ip=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uw(){return Tp||(Tp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bm=new WeakMap,rc=new WeakMap,Hm=new WeakMap,Bu=new WeakMap,Nc=new WeakMap;function zw(i){const e=new Promise((n,s)=>{const l=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(Hn(i.result)),l()},d=()=>{s(i.error),l()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Bm.set(n,i)}).catch(()=>{}),Nc.set(e,i),e}function jw(i){if(rc.has(i))return;const e=new Promise((n,s)=>{const l=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});rc.set(i,e)}let ic={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return rc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Hm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hn(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Ww(i){ic=i(ic)}function Vw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Hu(this),e,...n);return Hm.set(s,e.sort?e.sort():[e]),Hn(s)}:Uw().includes(i)?function(...e){return i.apply(Hu(this),e),Hn(Bm.get(this))}:function(...e){return Hn(i.apply(Hu(this),e))}}function Bw(i){return typeof i=="function"?Vw(i):(i instanceof IDBTransaction&&jw(i),bw(i,Fw())?new Proxy(i,ic):i)}function Hn(i){if(i instanceof IDBRequest)return zw(i);if(Bu.has(i))return Bu.get(i);const e=Bw(i);return e!==i&&(Bu.set(i,e),Nc.set(e,i)),e}const Hu=i=>Nc.get(i);function Hw(i,e,{blocked:n,upgrade:s,blocking:l,terminated:u}={}){const d=indexedDB.open(i,e),f=Hn(d);return s&&d.addEventListener("upgradeneeded",m=>{s(Hn(d.result),m.oldVersion,m.newVersion,Hn(d.transaction),m)}),n&&d.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),f.then(m=>{u&&m.addEventListener("close",()=>u()),l&&m.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const $w=["get","getKey","getAll","getAllKeys","count"],Gw=["put","add","delete","clear"],$u=new Map;function kp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if($u.get(e))return $u.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=Gw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||$w.includes(n)))return;const u=async function(d,...f){const m=this.transaction(d,l?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(f.shift())),(await Promise.all([g[n](...f),l&&m.done]))[0]};return $u.set(e,u),u}Ww(i=>({...i,get:(e,n,s)=>kp(e,n)||i.get(e,n,s),has:(e,n)=>!!kp(e,n)||i.has(e,n)}));class Kw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function qw(i){const e=i.getComponent();return e?.type==="VERSION"}const dl="@firebase/app",sc="0.10.13";const gn=new Ol("@firebase/app"),Qw="@firebase/app-compat",Yw="@firebase/analytics-compat",Xw="@firebase/analytics",Jw="@firebase/app-check-compat",Zw="@firebase/app-check",eE="@firebase/auth",tE="@firebase/auth-compat",nE="@firebase/database",rE="@firebase/data-connect",iE="@firebase/database-compat",sE="@firebase/functions",oE="@firebase/functions-compat",lE="@firebase/installations",aE="@firebase/installations-compat",uE="@firebase/messaging",cE="@firebase/messaging-compat",dE="@firebase/performance",hE="@firebase/performance-compat",fE="@firebase/remote-config",pE="@firebase/remote-config-compat",mE="@firebase/storage",gE="@firebase/storage-compat",_E="@firebase/firestore",vE="@firebase/vertexai-preview",yE="@firebase/firestore-compat",wE="firebase",EE="10.14.1";const qn="[DEFAULT]",SE={[dl]:"fire-core",[Qw]:"fire-core-compat",[Xw]:"fire-analytics",[Yw]:"fire-analytics-compat",[Zw]:"fire-app-check",[Jw]:"fire-app-check-compat",[eE]:"fire-auth",[tE]:"fire-auth-compat",[nE]:"fire-rtdb",[rE]:"fire-data-connect",[iE]:"fire-rtdb-compat",[sE]:"fire-fn",[oE]:"fire-fn-compat",[lE]:"fire-iid",[aE]:"fire-iid-compat",[uE]:"fire-fcm",[cE]:"fire-fcm-compat",[dE]:"fire-perf",[hE]:"fire-perf-compat",[fE]:"fire-rc",[pE]:"fire-rc-compat",[mE]:"fire-gcs",[gE]:"fire-gcs-compat",[_E]:"fire-fst",[yE]:"fire-fst-compat",[vE]:"fire-vertex","fire-js":"fire-js",[wE]:"fire-js-all"};const Qn=new Map,li=new Map,ai=new Map;function _s(i,e){try{i.container.addComponent(e)}catch(n){gn.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function $m(i,e){i.container.addOrOverwriteComponent(e)}function Yn(i){const e=i.name;if(ai.has(e))return gn.debug(`There were multiple attempts to register component ${e}.`),!1;ai.set(e,i);for(const n of Qn.values())_s(n,i);for(const n of li.values())_s(n,i);return!0}function Rs(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function CE(i,e,n=qn){Rs(i,e).clearInstance(n)}function Gm(i){return i.options!==void 0}function Xt(i){return i.settings!==void 0}function IE(){ai.clear()}const TE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kt=new kr("app","Firebase",TE);let Km=class{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kt.create("app-deleted",{appName:this._name})}};class kE extends Km{constructor(e,n,s,l){const u=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,d={name:s,automaticDataCollectionEnabled:u};if(e.apiKey!==void 0)super(e,d,l);else{const f=e;super(f.options,d,l)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:u},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,jt(dl,sc,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ac(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw kt.create("server-app-deleted")}}const er=EE;function Rc(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:qn,automaticDataCollectionEnabled:!1},e),l=s.name;if(typeof l!="string"||!l)throw kt.create("bad-app-name",{appName:String(l)});if(n||(n=Mm()),!n)throw kt.create("no-options");const u=Qn.get(l);if(u){if(cl(n,u.options)&&cl(s,u.config))return u;throw kt.create("duplicate-app",{appName:l})}const d=new Wm(l);for(const m of ai.values())d.addComponent(m);const f=new Km(n,s,d);return Qn.set(l,f),f}function NE(i,e){if(hw()&&!Fm())throw kt.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;Gm(i)?n=i.options:n=i;const s=Object.assign(Object.assign({},e),n);s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const l=g=>[...g].reduce((w,v)=>Math.imul(31,w)+v.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw kt.create("finalization-registry-not-supported",{});const u=""+l(JSON.stringify(s)),d=li.get(u);if(d)return d.incRefCount(e.releaseOnDeref),d;const f=new Wm(u);for(const g of ai.values())f.addComponent(g);const m=new kE(n,e,u,f);return li.set(u,m),m}function Pc(i=qn){const e=Qn.get(i);if(!e&&i===qn&&Mm())return Rc();if(!e)throw kt.create("no-app",{appName:i});return e}function RE(){return Array.from(Qn.values())}async function Ac(i){let e=!1;const n=i.name;Qn.has(n)?(e=!0,Qn.delete(n)):li.has(n)&&i.decRefCount()<=0&&(li.delete(n),e=!0),e&&(await Promise.all(i.container.getProviders().map(s=>s.delete())),i.isDeleted=!0)}function jt(i,e,n){var s;let l=(s=SE[i])!==null&&s!==void 0?s:i;n&&(l+=`-${n}`);const u=l.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const f=[`Unable to register library "${l}" with version "${e}":`];u&&f.push(`library name "${l}" contains illegal characters (whitespace or "/")`),u&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gn.warn(f.join(" "));return}Yn(new Kn(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}function qm(i,e){if(i!==null&&typeof i!="function")throw kt.create("invalid-log-argument");Mw(i,e)}function Qm(i){Lw(i)}const PE="firebase-heartbeat-database",AE=1,vs="firebase-heartbeat-store";let Gu=null;function Ym(){return Gu||(Gu=Hw(PE,AE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(vs)}catch(n){console.warn(n)}}}}).catch(i=>{throw kt.create("idb-open",{originalErrorMessage:i.message})})),Gu}async function OE(i){try{const n=(await Ym()).transaction(vs),s=await n.objectStore(vs).get(Xm(i));return await n.done,s}catch(e){if(e instanceof yn)gn.warn(e.message);else{const n=kt.create("idb-get",{originalErrorMessage:e?.message});gn.warn(n.message)}}}async function Np(i,e){try{const s=(await Ym()).transaction(vs,"readwrite");await s.objectStore(vs).put(e,Xm(i)),await s.done}catch(n){if(n instanceof yn)gn.warn(n.message);else{const s=kt.create("idb-set",{originalErrorMessage:n?.message});gn.warn(s.message)}}}function Xm(i){return`${i.name}!${i.options.appId}`}const xE=1024,DE=720*60*60*1e3;class LE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Rp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const f=new Date(d.date).valueOf();return Date.now()-f<=DE}),this._storage.overwrite(this._heartbeatsCache))}catch(s){gn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rp(),{heartbeatsToSend:s,unsentEntries:l}=ME(this._heartbeatsCache.heartbeats),u=ll(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return gn.warn(n),""}}}function Rp(){return new Date().toISOString().substring(0,10)}function ME(i,e=xE){const n=[];let s=i.slice();for(const l of i){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),Pp(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Pp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class bE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _w()?vw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OE(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Np(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Np(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function Pp(i){return ll(JSON.stringify({version:2,heartbeats:i})).length}function FE(i){Yn(new Kn("platform-logger",e=>new Kw(e),"PRIVATE")),Yn(new Kn("heartbeat",e=>new LE(e),"PRIVATE")),jt(dl,sc,i),jt(dl,sc,"esm2017"),jt("fire-js","")}FE("");const UE=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:yn,SDK_VERSION:er,_DEFAULT_ENTRY_NAME:qn,_addComponent:_s,_addOrOverwriteComponent:$m,_apps:Qn,_clearComponents:IE,_components:ai,_getProvider:Rs,_isFirebaseApp:Gm,_isFirebaseServerApp:Xt,_registerComponent:Yn,_removeServiceInstance:CE,_serverApps:li,deleteApp:Ac,getApp:Pc,getApps:RE,initializeApp:Rc,initializeServerApp:NE,onLog:qm,registerVersion:jt,setLogLevel:Qm},Symbol.toStringTag,{value:"Module"}));class zE{constructor(e,n){this._delegate=e,this.firebase=n,_s(e,new Kn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Ac(this._delegate)))}_getService(e,n=qn){var s;this._delegate.checkDestroyed();const l=this._delegate.container.getProvider(e);return!l.isInitialized()&&((s=l.getComponent())===null||s===void 0?void 0:s.instantiationMode)==="EXPLICIT"&&l.initialize(),l.getImmediate({identifier:n})}_removeServiceInstance(e,n=qn){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){_s(this._delegate,e)}_addOrOverwriteComponent(e){$m(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const jE={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Ap=new kr("app-compat","Firebase",jE);function WE(i){const e={},n={__esModule:!0,initializeApp:u,app:l,registerVersion:jt,setLogLevel:Qm,onLog:qm,apps:null,SDK_VERSION:er,INTERNAL:{registerComponent:f,removeApp:s,useAsService:m,modularAPIs:UE}};n.default=n,Object.defineProperty(n,"apps",{get:d});function s(g){delete e[g]}function l(g){if(g=g||qn,!Bt(e,g))throw Ap.create("no-app",{appName:g});return e[g]}l.App=i;function u(g,w={}){const v=Rc(g,w);if(Bt(e,v.name))return e[v.name];const S=new i(v,n);return e[v.name]=S,S}function d(){return Object.keys(e).map(g=>e[g])}function f(g){const w=g.name,v=w.replace("-compat","");if(Yn(g)&&g.type==="PUBLIC"){const S=(O=l())=>{if(typeof O[v]!="function")throw Ap.create("invalid-app-argument",{appName:w});return O[v]()};g.serviceProps!==void 0&&ms(S,g.serviceProps),n[v]=S,i.prototype[v]=function(...O){return this._getService.bind(this,w).apply(this,g.multipleInstances?O:[])}}return g.type==="PUBLIC"?n[v]:null}function m(g,w){return w==="serverAuth"?null:w}return n}function Jm(){const i=WE(zE);i.INTERNAL=Object.assign(Object.assign({},i.INTERNAL),{createFirebaseNamespace:Jm,extendNamespace:e,createSubscribe:jm,ErrorFactory:kr,deepExtend:ms});function e(n){ms(i,n)}return i}const VE=Jm();const Op=new Ol("@firebase/app-compat"),BE="@firebase/app-compat",HE="0.2.43";function $E(i){jt(BE,HE,i)}try{const i=Dm();if(i.firebase!==void 0){Op.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=i.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Op.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const oc=VE;$E();var GE="firebase",KE="10.14.1";oc.registerVersion(GE,KE,"app-compat");var xp={};const Dp="@firebase/database",Lp="1.0.8";let Zm="";function qE(i){Zm=i}class QE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Le(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:gs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class YE{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Bt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const eg=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new QE(e)}}catch{}return new YE},_r=eg("localStorage"),XE=eg("sessionStorage");const ti=new Ol("@firebase/database"),JE=(function(){let i=1;return function(){return i++}})(),tg=function(i){const e=Nw(i),n=new Iw;n.update(e);const s=n.digest();return Sc.encodeByteArray(s)},Ps=function(...i){let e="";for(let n=0;n<i.length;n++){const s=i[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Ps.apply(null,s):typeof s=="object"?e+=Le(s):e+=s,e+=" "}return e};let us=null,Mp=!0;const ZE=function(i,e){D(!0,"Can't turn on custom loggers persistently."),ti.logLevel=ce.VERBOSE,us=ti.log.bind(ti)},Ye=function(...i){if(Mp===!0&&(Mp=!1,us===null&&XE.get("logging_enabled")===!0&&ZE()),us){const e=Ps.apply(null,i);us(e)}},As=function(i){return function(...e){Ye(i,...e)}},lc=function(...i){const e="FIREBASE INTERNAL ERROR: "+Ps(...i);ti.error(e)},_n=function(...i){const e=`FIREBASE FATAL ERROR: ${Ps(...i)}`;throw ti.error(e),new Error(e)},dt=function(...i){const e="FIREBASE WARNING: "+Ps(...i);ti.warn(e)},e0=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&dt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ng=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},t0=function(i){if(document.readyState==="complete")i();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ui="[MIN_NAME]",Sr="[MAX_NAME]",mi=function(i,e){if(i===e)return 0;if(i===ui||e===Sr)return-1;if(e===ui||i===Sr)return 1;{const n=bp(i),s=bp(e);return n!==null?s!==null?n-s===0?i.length-e.length:n-s:-1:s!==null?1:i<e?-1:1}},n0=function(i,e){return i===e?0:i<e?-1:1},ss=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+Le(e))},Oc=function(i){if(typeof i!="object"||i===null)return Le(i);const e=[];for(const s in i)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Le(e[s]),n+=":",n+=Oc(i[e[s]]);return n+="}",n},rg=function(i,e){const n=i.length;if(n<=e)return[i];const s=[];for(let l=0;l<n;l+=e)l+e>n?s.push(i.substring(l,n)):s.push(i.substring(l,l+e));return s};function ht(i,e){for(const n in i)i.hasOwnProperty(n)&&e(n,i[n])}const ig=function(i){D(!ng(i),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let l,u,d,f,m;i===0?(u=0,d=0,l=1/i===-1/0?1:0):(l=i<0,i=Math.abs(i),i>=Math.pow(2,1-s)?(f=Math.min(Math.floor(Math.log(i)/Math.LN2),s),u=f+s,d=Math.round(i*Math.pow(2,n-f)-Math.pow(2,n))):(u=0,d=Math.round(i/Math.pow(2,1-s-n))));const g=[];for(m=n;m;m-=1)g.push(d%2?1:0),d=Math.floor(d/2);for(m=e;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);g.push(l?1:0),g.reverse();const w=g.join("");let v="";for(m=0;m<64;m+=8){let S=parseInt(w.substr(m,8),2).toString(16);S.length===1&&(S="0"+S),v=v+S}return v.toLowerCase()},r0=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},i0=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function s0(i,e){let n="Unknown Error";i==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?n="Client doesn't have permission to access the desired data.":i==="unavailable"&&(n="The service is unavailable");const s=new Error(i+" at "+e._path.toString()+": "+n);return s.code=i.toUpperCase(),s}const o0=new RegExp("^-?(0*)\\d{1,10}$"),l0=-2147483648,a0=2147483647,bp=function(i){if(o0.test(i)){const e=Number(i);if(e>=l0&&e<=a0)return e}return null},gi=function(i){try{i()}catch(e){setTimeout(()=>{const n=e.stack||"";throw dt("Exception was thrown by user callback.",n),e},Math.floor(0))}},u0=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},cs=function(i,e){const n=setTimeout(i,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class c0{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){dt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class d0{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ye("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',dt(e)}}class el{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}el.OWNER="owner";const xc="5",sg="v",og="s",lg="r",ag="f",ug=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cg="ls",dg="p",ac="ac",hg="websocket",fg="long_polling";class pg{constructor(e,n,s,l,u=!1,d="",f=!1,m=!1){this.secure=n,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=u,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_r.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_r.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function h0(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function mg(i,e,n){D(typeof e=="string","typeof type must == string"),D(typeof n=="object","typeof params must == object");let s;if(e===hg)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===fg)s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);h0(i)&&(n.ns=i.namespace);const l=[];return ht(n,(u,d)=>{l.push(u+"="+d)}),s+l.join("&")}class f0{constructor(){this.counters_={}}incrementCounter(e,n=1){Bt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return sw(this.counters_)}}const Ku={},qu={};function Dc(i){const e=i.toString();return Ku[e]||(Ku[e]=new f0),Ku[e]}function p0(i,e){const n=i.toString();return qu[n]||(qu[n]=e()),qu[n]}class m0{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&gi(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Fp="start",g0="close",_0="pLPCommand",v0="pRTLPCB",gg="id",_g="pw",vg="ser",y0="cb",w0="seg",E0="ts",S0="d",C0="dframe",yg=1870,wg=30,I0=yg-wg,T0=25e3,k0=3e4;class ei{constructor(e,n,s,l,u,d,f){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=As(e),this.stats_=Dc(n),this.urlFn=m=>(this.appCheckToken&&(m[ac]=this.appCheckToken),mg(n,fg,m))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new m0(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(k0)),t0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Lc((...u)=>{const[d,f,m,g,w]=u;if(this.incrementIncomingBytes_(u),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===Fp)this.id=f,this.password=m;else if(d===g0)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...u)=>{const[d,f]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const s={};s[Fp]="t",s[vg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[y0]=this.scriptTagHolder.uniqueCallbackIdentifier),s[sg]=xc,this.transportSessionId&&(s[og]=this.transportSessionId),this.lastSessionId&&(s[cg]=this.lastSessionId),this.applicationId&&(s[dg]=this.applicationId),this.appCheckToken&&(s[ac]=this.appCheckToken),typeof location<"u"&&location.hostname&&ug.test(location.hostname)&&(s[lg]=ag);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ei.forceAllow_=!0}static forceDisallow(){ei.forceDisallow_=!0}static isAvailable(){return ei.forceAllow_?!0:!ei.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!r0()&&!i0()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Le(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=xm(n),l=rg(s,I0);for(let u=0;u<l.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[u]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[C0]="t",s[gg]=e,s[_g]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Le(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Lc{constructor(e,n,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=JE(),window[_0+this.uniqueCallbackIdentifier]=e,window[v0+this.uniqueCallbackIdentifier]=n,this.myIFrame=Lc.createIFrame_();let u="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(u='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){Ye("frame writing exception"),f.stack&&Ye(f.stack),Ye(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ye("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[gg]=this.myID,e[_g]=this.myPW,e[vg]=this.currentSerial;let n=this.urlFn(e),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+wg+s.length<=yg;){const d=this.pendingSegs.shift();s=s+"&"+w0+l+"="+d.seg+"&"+E0+l+"="+d.ts+"&"+S0+l+"="+d.d,l++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(s,Math.floor(T0)),u=()=>{clearTimeout(l),s()};this.addTag(e,u)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Ye("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}const N0=16384,R0=45e3;let hl=null;typeof MozWebSocket<"u"?hl=MozWebSocket:typeof WebSocket<"u"&&(hl=WebSocket);class Ft{constructor(e,n,s,l,u,d,f){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=As(this.connId),this.stats_=Dc(n),this.connURL=Ft.connectionURL_(n,d,f,l,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,l,u){const d={};return d[sg]=xc,typeof location<"u"&&location.hostname&&ug.test(location.hostname)&&(d[lg]=ag),n&&(d[og]=n),s&&(d[cg]=s),l&&(d[ac]=l),u&&(d[dg]=u),mg(e,hg,d)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_r.set("previous_websocket_failure",!0);try{let s;gw(),this.mySock=new hl(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){Ft.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&hl!==null&&!Ft.forceDisallow_}static previouslyFailed(){return _r.isInMemoryStorage||_r.get("previous_websocket_failure")===!0}markConnectionHealthy(){_r.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=gs(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(D(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Le(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=rg(n,N0);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(R0))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ft.responsesRequiredToBeHealthy=2;Ft.healthyTimeout=3e4;class ys{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ei,Ft]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ft&&Ft.isAvailable();let s=n&&!Ft.previouslyFailed();if(e.webSocketOnly&&(n||dt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ft];else{const l=this.transports_=[];for(const u of ys.ALL_TRANSPORTS)u&&u.isAvailable()&&l.push(u);ys.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ys.globalTransportInitialized_=!1;const P0=6e4,A0=5e3,O0=10*1024,x0=100*1024,Qu="t",Up="d",D0="s",zp="r",L0="e",jp="o",Wp="a",Vp="n",Bp="p",M0="h";class b0{constructor(e,n,s,l,u,d,f,m,g,w){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=u,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=As("c:"+this.id+":"),this.transportManager_=new ys(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=cs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>x0?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>O0?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Qu in e){const n=e[Qu];n===Wp?this.upgradeIfSecondaryHealthy_():n===zp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===jp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ss("t",e),s=ss("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Bp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Vp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ss("t",e),s=ss("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ss(Qu,e);if(Up in e){const s=e[Up];if(n===M0){const l=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===Vp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===D0?this.onConnectionShutdown_(s):n===zp?this.onReset_(s):n===L0?lc("Server Error: "+s):n===jp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),xc!==s&&dt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),cs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(P0))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(A0))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Bp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_r.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Eg{put(e,n,s,l){}merge(e,n,s,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}class Sg{constructor(e){this.allowedEvents_=e,this.listeners_={},D(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const l=this.getInitialEvent(e);l&&n.apply(s,l)}off(e,n,s){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let u=0;u<l.length;u++)if(l[u].callback===n&&(!s||s===l[u].context)){l.splice(u,1);return}}validateEventType_(e){D(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class fl extends Sg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ic()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fl}getInitialEvent(e){return D(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Hp=32,$p=768;class de{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function le(){return new de("")}function ne(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Xn(i){return i.pieces_.length-i.pieceNum_}function pe(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new de(i.pieces_,e)}function Cg(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function F0(i){let e="";for(let n=i.pieceNum_;n<i.pieces_.length;n++)i.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[n])));return e||"/"}function Ig(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function Tg(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let n=i.pieceNum_;n<i.pieces_.length-1;n++)e.push(i.pieces_[n]);return new de(e,0)}function Me(i,e){const n=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)n.push(i.pieces_[s]);if(e instanceof de)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&n.push(s[l])}return new de(n,0)}function te(i){return i.pieceNum_>=i.pieces_.length}function Ze(i,e){const n=ne(i),s=ne(e);if(n===null)return e;if(n===s)return Ze(pe(i),pe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function kg(i,e){if(Xn(i)!==Xn(e))return!1;for(let n=i.pieceNum_,s=e.pieceNum_;n<=i.pieces_.length;n++,s++)if(i.pieces_[n]!==e.pieces_[s])return!1;return!0}function Ut(i,e){let n=i.pieceNum_,s=e.pieceNum_;if(Xn(i)>Xn(e))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class U0{constructor(e,n){this.errorPrefix_=n,this.parts_=Ig(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Al(this.parts_[s]);Ng(this)}}function z0(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=Al(e),Ng(i)}function j0(i){const e=i.parts_.pop();i.byteLength_-=Al(e),i.parts_.length>0&&(i.byteLength_-=1)}function Ng(i){if(i.byteLength_>$p)throw new Error(i.errorPrefix_+"has a key path longer than "+$p+" bytes ("+i.byteLength_+").");if(i.parts_.length>Hp)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Hp+") or object contains a cycle "+gr(i))}function gr(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}class Mc extends Sg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new Mc}getInitialEvent(e){return D(e==="visible","Unknown event type: "+e),[this.visible_]}}const os=1e3,W0=300*1e3,Gp=30*1e3,V0=1.3,B0=3e4,H0="server_kill",Kp=3;class mn extends Eg{constructor(e,n,s,l,u,d,f,m){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=mn.nextPersistentConnectionId_++,this.log_=As("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=os,this.maxReconnectDelay_=W0,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&fl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const l=++this.requestNumber_,u={r:l,a:e,b:n};this.log_(Le(u)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const n=new Pl,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const f=d.d;d.s==="ok"?n.resolve(f):n.reject(f)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(u),n.promise}listen(e,n,s,l){this.initConnection_();const u=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const f={onComplete:l,hashFn:n,query:e,tag:s};this.listens.get(d).set(u,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+s+" for "+l);const u={p:s},d="q";e.tag&&(u.q=n._queryObject,u.t=e.tag),u.h=e.hashFn(),this.sendRequest(d,u,f=>{const m=f.d,g=f.s;mn.warnOnListenWarnings_(m,n),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(s,l),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Bt(e,"w")){const s=oi(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',u=n._path.toString();dt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Cw(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Gp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Sw(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,l=>{const u=l.s,d=l.d||"error";this.authToken_===e&&(u==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),D(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,n)}sendUnlisten_(e,n,s,l){this.log_("Unlisten on "+e+" for "+n);const u={p:e},d="n";l&&(u.q=s,u.t=l),this.sendRequest(d,u)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,l){const u={p:n,d:s};this.log_("onDisconnect "+e,u),this.sendRequest(e,u,d=>{l&&setTimeout(()=>{l(d.s,d.d)},Math.floor(0))})}put(e,n,s,l){this.putInternal("p",e,n,s,l)}merge(e,n,s,l){this.putInternal("m",e,n,s,l)}putInternal(e,n,s,l,u){this.initConnection_();const d={p:n,d:s};u!==void 0&&(d.h=u),this.outstandingPuts_.push({action:e,request:d,onComplete:l}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,u=>{this.log_(n+" response",u),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const u=s.d;this.log_("reportStats","Error sending stats: "+u)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Le(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):lc("Unrecognized action received from server: "+Le(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=os,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=os,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>B0&&(this.reconnectDelay_=os),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*V0)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+mn.nextConnectionId_++,u=this.lastSessionId;let d=!1,f=null;const m=function(){f?f.close():(d=!0,s())},g=function(v){D(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(v)};this.realtime_={close:m,sendRequest:g};const w=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,S]=await Promise.all([this.authTokenProvider_.getToken(w),this.appCheckTokenProvider_.getToken(w)]);d?Ye("getToken() completed but was canceled"):(Ye("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=S&&S.token,f=new b0(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,O=>{dt(O+" ("+this.repoInfo_.toString()+")"),this.interrupt(H0)},u))}catch(v){this.log_("Failed to get token: "+v),d||(this.repoInfo_.nodeAdmin&&dt(v),m())}}}interrupt(e){Ye("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ye("Resuming connection for reason: "+e),delete this.interruptReasons_[e],nc(this.interruptReasons_)&&(this.reconnectDelay_=os,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(u=>Oc(u)).join("$"):s="default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const s=new de(e).toString();let l;if(this.listens.has(s)){const u=this.listens.get(s);l=u.get(n),u.delete(n),u.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,n){Ye("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Kp&&(this.reconnectDelay_=Gp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ye("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Kp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Zm.replace(/\./g,"-")]=1,Ic()?e["framework.cordova"]=1:Um()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=fl.getInstance().currentlyOnline();return nc(this.interruptReasons_)&&e}}mn.nextPersistentConnectionId_=0;mn.nextConnectionId_=0;class Z{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Z(e,n)}}class xl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Z(ui,e),l=new Z(ui,n);return this.compare(s,l)!==0}minPost(){return Z.MIN}}let Yo;class Rg extends xl{static get __EMPTY_NODE(){return Yo}static set __EMPTY_NODE(e){Yo=e}compare(e,n){return mi(e.name,n.name)}isDefinedOn(e){throw fi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Z.MIN}maxPost(){return new Z(Sr,Yo)}makePost(e,n){return D(typeof e=="string","KeyIndex indexValue must always be a string."),new Z(e,Yo)}toString(){return".key"}}const ni=new Rg;class Xo{constructor(e,n,s,l,u=null){this.isReverse_=l,this.resultGenerator_=u,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=n?s(e.key,n):1,l&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class We{constructor(e,n,s,l,u){this.key=e,this.value=n,this.color=s??We.RED,this.left=l??ct.EMPTY_NODE,this.right=u??ct.EMPTY_NODE}copy(e,n,s,l,u){return new We(e??this.key,n??this.value,s??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const u=s(e,l.key);return u<0?l=l.copy(null,null,null,l.left.insert(e,n,s),null):u===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return ct.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,l;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return ct.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}We.RED=!0;We.BLACK=!1;class $0{copy(e,n,s,l,u){return this}insert(e,n,s){return new We(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ct{constructor(e,n=ct.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ct(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,We.BLACK,null,null))}remove(e){return new ct(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,We.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,l=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Xo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Xo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Xo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Xo(this.root_,null,this.comparator_,!0,e)}}ct.EMPTY_NODE=new $0;function G0(i,e){return mi(i.name,e.name)}function bc(i,e){return mi(i,e)}let uc;function K0(i){uc=i}const Pg=function(i){return typeof i=="number"?"number:"+ig(i):"string:"+i},Ag=function(i){if(i.isLeafNode()){const e=i.val();D(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Bt(e,".sv"),"Priority must be a string or number.")}else D(i===uc||i.isEmpty(),"priority of unexpected type.");D(i===uc||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qp;class je{constructor(e,n=je.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,D(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ag(this.priorityNode_)}static set __childrenNodeConstructor(e){qp=e}static get __childrenNodeConstructor(){return qp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new je(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:je.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return te(e)?this:ne(e)===".priority"?this.priorityNode_:je.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:je.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=ne(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(D(s!==".priority"||Xn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,je.__childrenNodeConstructor.EMPTY_NODE.updateChild(pe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Pg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ig(this.value_):e+=this.value_,this.lazyHash_=tg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===je.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof je.__childrenNodeConstructor?-1:(D(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,l=je.VALUE_TYPE_ORDER.indexOf(n),u=je.VALUE_TYPE_ORDER.indexOf(s);return D(l>=0,"Unknown leaf type: "+n),D(u>=0,"Unknown leaf type: "+s),l===u?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}je.VALUE_TYPE_ORDER=["object","boolean","number","string"];let Og,xg;function q0(i){Og=i}function Q0(i){xg=i}class Y0 extends xl{compare(e,n){const s=e.node.getPriority(),l=n.node.getPriority(),u=s.compareTo(l);return u===0?mi(e.name,n.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Z.MIN}maxPost(){return new Z(Sr,new je("[PRIORITY-POST]",xg))}makePost(e,n){const s=Og(e);return new Z(n,new je("[PRIORITY-POST]",s))}toString(){return".priority"}}const Ie=new Y0;const X0=Math.log(2);class J0{constructor(e){const n=u=>parseInt(Math.log(u)/X0,10),s=u=>parseInt(Array(u+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=s(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pl=function(i,e,n,s){i.sort(e);const l=function(m,g){const w=g-m;let v,S;if(w===0)return null;if(w===1)return v=i[m],S=n?n(v):v,new We(S,v.node,We.BLACK,null,null);{const O=parseInt(w/2,10)+m,M=l(m,O),V=l(O+1,g);return v=i[O],S=n?n(v):v,new We(S,v.node,We.BLACK,M,V)}},u=function(m){let g=null,w=null,v=i.length;const S=function(M,V){const K=v-M,Pe=v;v-=M;const be=l(K+1,Pe),Ae=i[K],Te=n?n(Ae):Ae;O(new We(Te,Ae.node,V,null,be))},O=function(M){g?(g.left=M,g=M):(w=M,g=M)};for(let M=0;M<m.count;++M){const V=m.nextBitIsOne(),K=Math.pow(2,m.count-(M+1));V?S(K,We.BLACK):(S(K,We.BLACK),S(K,We.RED))}return w},d=new J0(i.length),f=u(d);return new ct(s||e,f)};let Yu;const Zr={};class dn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return D(Zr&&Ie,"ChildrenNode.ts has not been loaded"),Yu=Yu||new dn({".priority":Zr},{".priority":Ie}),Yu}get(e){const n=oi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ct?n:null}hasIndex(e){return Bt(this.indexSet_,e.toString())}addIndex(e,n){D(e!==ni,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const u=n.getIterator(Z.Wrap);let d=u.getNext();for(;d;)l=l||e.isDefinedOn(d.node),s.push(d),d=u.getNext();let f;l?f=pl(s,e.getCompare()):f=Zr;const m=e.toString(),g=Object.assign({},this.indexSet_);g[m]=e;const w=Object.assign({},this.indexes_);return w[m]=f,new dn(w,g)}addToIndexes(e,n){const s=ul(this.indexes_,(l,u)=>{const d=oi(this.indexSet_,u);if(D(d,"Missing index implementation for "+u),l===Zr)if(d.isDefinedOn(e.node)){const f=[],m=n.getIterator(Z.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&f.push(g),g=m.getNext();return f.push(e),pl(f,d.getCompare())}else return Zr;else{const f=n.get(e.name);let m=l;return f&&(m=m.remove(new Z(e.name,f))),m.insert(e,e.node)}});return new dn(s,this.indexSet_)}removeFromIndexes(e,n){const s=ul(this.indexes_,l=>{if(l===Zr)return l;{const u=n.get(e.name);return u?l.remove(new Z(e.name,u)):l}});return new dn(s,this.indexSet_)}}let ls;class G{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Ag(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ls||(ls=new G(new ct(bc),null,dn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ls}updatePriority(e){return this.children_.isEmpty()?this:new G(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ls:n}}getChild(e){const n=ne(e);return n===null?this:this.getImmediateChild(n).getChild(pe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(D(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Z(e,n);let l,u;n.isEmpty()?(l=this.children_.remove(e),u=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,n),u=this.indexMap_.addToIndexes(s,this.children_));const d=l.isEmpty()?ls:this.priorityNode_;return new G(l,d,u)}}updateChild(e,n){const s=ne(e);if(s===null)return n;{D(ne(e)!==".priority"||Xn(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(pe(e),n);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,l=0,u=!0;if(this.forEachChild(Ie,(d,f)=>{n[d]=f.val(e),s++,u&&G.INTEGER_REGEXP_.test(d)?l=Math.max(l,Number(d)):u=!1}),!e&&u&&l<2*s){const d=[];for(const f in n)d[f]=n[f];return d}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Pg(this.getPriority().val())+":"),this.forEachChild(Ie,(n,s)=>{const l=s.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":tg(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const l=this.resolveIndex_(s);if(l){const u=l.getPredecessorKey(new Z(e,n));return u?u.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Z(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Z(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,Z.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,Z.Wrap);let u=l.peek();for(;u!=null&&n.compare(u,e)>0;)l.getNext(),u=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Os?-1:0}withIndex(e){if(e===ni||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new G(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ni||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Ie),l=n.getIterator(Ie);let u=s.getNext(),d=l.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=s.getNext(),d=l.getNext()}return u===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===ni?null:this.indexMap_.get(e.toString())}}G.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Z0 extends G{constructor(){super(new ct(bc),G.EMPTY_NODE,dn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return G.EMPTY_NODE}isEmpty(){return!1}}const Os=new Z0;Object.defineProperties(Z,{MIN:{value:new Z(ui,G.EMPTY_NODE)},MAX:{value:new Z(Sr,Os)}});Rg.__EMPTY_NODE=G.EMPTY_NODE;je.__childrenNodeConstructor=G;K0(Os);Q0(Os);const eS=!0;function Ve(i,e=null){if(i===null)return G.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),D(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const n=i;return new je(n,Ve(e))}if(!(i instanceof Array)&&eS){const n=[];let s=!1;if(ht(i,(d,f)=>{if(d.substring(0,1)!=="."){const m=Ve(f);m.isEmpty()||(s=s||!m.getPriority().isEmpty(),n.push(new Z(d,m)))}}),n.length===0)return G.EMPTY_NODE;const u=pl(n,G0,d=>d.name,bc);if(s){const d=pl(n,Ie.getCompare());return new G(u,Ve(e),new dn({".priority":d},{".priority":Ie}))}else return new G(u,Ve(e),dn.Default)}else{let n=G.EMPTY_NODE;return ht(i,(s,l)=>{if(Bt(i,s)&&s.substring(0,1)!=="."){const u=Ve(l);(u.isLeafNode()||!u.isEmpty())&&(n=n.updateImmediateChild(s,u))}}),n.updatePriority(Ve(e))}}q0(Ve);class tS extends xl{constructor(e){super(),this.indexPath_=e,D(!te(e)&&ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),l=this.extractChild(n.node),u=s.compareTo(l);return u===0?mi(e.name,n.name):u}makePost(e,n){const s=Ve(e),l=G.EMPTY_NODE.updateChild(this.indexPath_,s);return new Z(n,l)}maxPost(){const e=G.EMPTY_NODE.updateChild(this.indexPath_,Os);return new Z(Sr,e)}toString(){return Ig(this.indexPath_,0).join("/")}}class nS extends xl{compare(e,n){const s=e.node.compareTo(n.node);return s===0?mi(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Z.MIN}maxPost(){return Z.MAX}makePost(e,n){const s=Ve(e);return new Z(n,s)}toString(){return".value"}}const rS=new nS;function Dg(i){return{type:"value",snapshotNode:i}}function ci(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function ws(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function Es(i,e,n){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:n}}function iS(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}class Fc{constructor(e){this.index_=e}updateChild(e,n,s,l,u,d){D(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(n);return f.getChild(l).equals(s.getChild(l))&&f.isEmpty()===s.isEmpty()||(d!=null&&(s.isEmpty()?e.hasChild(n)?d.trackChildChange(ws(n,f)):D(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(ci(n,s)):d.trackChildChange(Es(n,s,f))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Ie,(l,u)=>{n.hasChild(l)||s.trackChildChange(ws(l,u))}),n.isLeafNode()||n.forEachChild(Ie,(l,u)=>{if(e.hasChild(l)){const d=e.getImmediateChild(l);d.equals(u)||s.trackChildChange(Es(l,u,d))}else s.trackChildChange(ci(l,u))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?G.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ss{constructor(e){this.indexedFilter_=new Fc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ss.getStartPost_(e),this.endPost_=Ss.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,l,u,d){return this.matches(new Z(n,s))||(s=G.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,l,u,d)}updateFullNode(e,n,s){n.isLeafNode()&&(n=G.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(G.EMPTY_NODE);const u=this;return n.forEachChild(Ie,(d,f)=>{u.matches(new Z(d,f))||(l=l.updateImmediateChild(d,G.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}class sS{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Ss(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,l,u,d){return this.rangedFilter_.matches(new Z(n,s))||(s=G.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,l,u,d):this.fullLimitUpdateChild_(e,n,s,u,d)}updateFullNode(e,n,s){let l;if(n.isLeafNode()||n.isEmpty())l=G.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=G.EMPTY_NODE.withIndex(this.index_);let u;this.reverse_?u=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;u.hasNext()&&d<this.limit_;){const f=u.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))l=l.updateImmediateChild(f.name,f.node),d++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(G.EMPTY_NODE);let u;this.reverse_?u=l.getReverseIterator(this.index_):u=l.getIterator(this.index_);let d=0;for(;u.hasNext();){const f=u.getNext();d<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?d++:l=l.updateImmediateChild(f.name,G.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,l,u){let d;if(this.reverse_){const v=this.index_.getCompare();d=(S,O)=>v(O,S)}else d=this.index_.getCompare();const f=e;D(f.numChildren()===this.limit_,"");const m=new Z(n,s),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),w=this.rangedFilter_.matches(m);if(f.hasChild(n)){const v=f.getImmediateChild(n);let S=l.getChildAfterChild(this.index_,g,this.reverse_);for(;S!=null&&(S.name===n||f.hasChild(S.name));)S=l.getChildAfterChild(this.index_,S,this.reverse_);const O=S==null?1:d(S,m);if(w&&!s.isEmpty()&&O>=0)return u?.trackChildChange(Es(n,s,v)),f.updateImmediateChild(n,s);{u?.trackChildChange(ws(n,v));const V=f.updateImmediateChild(n,G.EMPTY_NODE);return S!=null&&this.rangedFilter_.matches(S)?(u?.trackChildChange(ci(S.name,S.node)),V.updateImmediateChild(S.name,S.node)):V}}else return s.isEmpty()?e:w&&d(g,m)>=0?(u!=null&&(u.trackChildChange(ws(g.name,g.node)),u.trackChildChange(ci(n,s))),f.updateImmediateChild(n,s).updateImmediateChild(g.name,G.EMPTY_NODE)):e}}class Uc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ui}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ie}copy(){const e=new Uc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oS(i){return i.loadsAllData()?new Fc(i.getIndex()):i.hasLimit()?new sS(i):new Ss(i)}function Qp(i){const e={};if(i.isDefault())return e;let n;if(i.index_===Ie?n="$priority":i.index_===rS?n="$value":i.index_===ni?n="$key":(D(i.index_ instanceof tS,"Unrecognized index type!"),n=i.index_.toString()),e.orderBy=Le(n),i.startSet_){const s=i.startAfterSet_?"startAfter":"startAt";e[s]=Le(i.indexStartValue_),i.startNameSet_&&(e[s]+=","+Le(i.indexStartName_))}if(i.endSet_){const s=i.endBeforeSet_?"endBefore":"endAt";e[s]=Le(i.indexEndValue_),i.endNameSet_&&(e[s]+=","+Le(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function Yp(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let n=i.viewFrom_;n===""&&(i.isViewFromLeft()?n="l":n="r"),e.vf=n}return i.index_!==Ie&&(e.i=i.index_.toString()),e}class ml extends Eg{constructor(e,n,s,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=As("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(D(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,s,l){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const d=ml.getListenId_(e,s),f={};this.listens_[d]=f;const m=Qp(e._queryParams);this.restRequest_(u+".json",m,(g,w)=>{let v=w;if(g===404&&(v=null,g=null),g===null&&this.onDataUpdate_(u,v,!1,s),oi(this.listens_,d)===f){let S;g?g===401?S="permission_denied":S="rest_error:"+g:S="ok",l(S,null)}})}unlisten(e,n){const s=ml.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Qp(e._queryParams),s=e._path.toString(),l=new Pl;return this.restRequest_(s+".json",n,(u,d)=>{let f=d;u===404&&(f=null,u=null),u===null?(this.onDataUpdate_(s,f,!1,null),l.resolve(f)):l.reject(new Error(f))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,u])=>{l&&l.accessToken&&(n.auth=l.accessToken),u&&u.token&&(n.ac=u.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pi(n);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(s&&f.readyState===4){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=gs(f.responseText)}catch{dt("Failed to parse JSON response for "+d+": "+f.responseText)}s(null,m)}else f.status!==401&&f.status!==404&&dt("Got unsuccessful REST response for "+d+" Status: "+f.status),s(f.status);s=null}},f.open("GET",d,!0),f.send()})}}class lS{constructor(){this.rootNode_=G.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function gl(){return{value:null,children:new Map}}function Lg(i,e,n){if(te(e))i.value=n,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,n);else{const s=ne(e);i.children.has(s)||i.children.set(s,gl());const l=i.children.get(s);e=pe(e),Lg(l,e,n)}}function cc(i,e,n){i.value!==null?n(e,i.value):aS(i,(s,l)=>{const u=new de(e.toString()+"/"+s);cc(l,u,n)})}function aS(i,e){i.children.forEach((n,s)=>{e(s,n)})}class uS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ht(this.last_,(s,l)=>{n[s]=n[s]-l}),this.last_=e,n}}const Xp=10*1e3,cS=30*1e3,dS=300*1e3;class hS{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new uS(e);const s=Xp+(cS-Xp)*Math.random();cs(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;ht(e,(l,u)=>{u>0&&Bt(this.statsToReport_,l)&&(n[l]=u,s=!0)}),s&&this.server_.reportStats(n),cs(this.reportStats_.bind(this),Math.floor(Math.random()*2*dS))}}var zt;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(zt||(zt={}));function Mg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jc(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class _l{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=zt.ACK_USER_WRITE,this.source=Mg()}operationForChild(e){if(te(this.path)){if(this.affectedTree.value!=null)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new de(e));return new _l(le(),n,this.revert)}}else return D(ne(this.path)===e,"operationForChild called for unrelated child."),new _l(pe(this.path),this.affectedTree,this.revert)}}class Cs{constructor(e,n){this.source=e,this.path=n,this.type=zt.LISTEN_COMPLETE}operationForChild(e){return te(this.path)?new Cs(this.source,le()):new Cs(this.source,pe(this.path))}}class Cr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=zt.OVERWRITE}operationForChild(e){return te(this.path)?new Cr(this.source,le(),this.snap.getImmediateChild(e)):new Cr(this.source,pe(this.path),this.snap)}}class Is{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=zt.MERGE}operationForChild(e){if(te(this.path)){const n=this.children.subtree(new de(e));return n.isEmpty()?null:n.value?new Cr(this.source,le(),n.value):new Is(this.source,le(),n)}else return D(ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Is(this.source,pe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Jn{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(te(e))return this.isFullyInitialized()&&!this.filtered_;const n=ne(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class fS{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pS(i,e,n,s){const l=[],u=[];return e.forEach(d=>{d.type==="child_changed"&&i.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&u.push(iS(d.childName,d.snapshotNode))}),as(i,l,"child_removed",e,s,n),as(i,l,"child_added",e,s,n),as(i,l,"child_moved",u,s,n),as(i,l,"child_changed",e,s,n),as(i,l,"value",e,s,n),l}function as(i,e,n,s,l,u){const d=s.filter(f=>f.type===n);d.sort((f,m)=>gS(i,f,m)),d.forEach(f=>{const m=mS(i,f,u);l.forEach(g=>{g.respondsTo(f.type)&&e.push(g.createEvent(m,i.query_))})})}function mS(i,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function gS(i,e,n){if(e.childName==null||n.childName==null)throw fi("Should only compare child_ events.");const s=new Z(e.childName,e.snapshotNode),l=new Z(n.childName,n.snapshotNode);return i.index_.compare(s,l)}function Dl(i,e){return{eventCache:i,serverCache:e}}function ds(i,e,n,s){return Dl(new Jn(e,n,s),i.serverCache)}function bg(i,e,n,s){return Dl(i.eventCache,new Jn(e,n,s))}function vl(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Ir(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let Xu;const _S=()=>(Xu||(Xu=new ct(n0)),Xu);class _e{constructor(e,n=_S()){this.value=e,this.children=n}static fromObject(e){let n=new _e(null);return ht(e,(s,l)=>{n=n.set(new de(s),l)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:le(),value:this.value};if(te(e))return null;{const s=ne(e),l=this.children.get(s);if(l!==null){const u=l.findRootMostMatchingPathAndValue(pe(e),n);return u!=null?{path:Me(new de(s),u.path),value:u.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(te(e))return this;{const n=ne(e),s=this.children.get(n);return s!==null?s.subtree(pe(e)):new _e(null)}}set(e,n){if(te(e))return new _e(n,this.children);{const s=ne(e),u=(this.children.get(s)||new _e(null)).set(pe(e),n),d=this.children.insert(s,u);return new _e(this.value,d)}}remove(e){if(te(e))return this.children.isEmpty()?new _e(null):new _e(null,this.children);{const n=ne(e),s=this.children.get(n);if(s){const l=s.remove(pe(e));let u;return l.isEmpty()?u=this.children.remove(n):u=this.children.insert(n,l),this.value===null&&u.isEmpty()?new _e(null):new _e(this.value,u)}else return this}}get(e){if(te(e))return this.value;{const n=ne(e),s=this.children.get(n);return s?s.get(pe(e)):null}}setTree(e,n){if(te(e))return n;{const s=ne(e),u=(this.children.get(s)||new _e(null)).setTree(pe(e),n);let d;return u.isEmpty()?d=this.children.remove(s):d=this.children.insert(s,u),new _e(this.value,d)}}fold(e){return this.fold_(le(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((l,u)=>{s[l]=u.fold_(Me(e,l),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,le(),n)}findOnPath_(e,n,s){const l=this.value?s(n,this.value):!1;if(l)return l;if(te(e))return null;{const u=ne(e),d=this.children.get(u);return d?d.findOnPath_(pe(e),Me(n,u),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,le(),n)}foreachOnPath_(e,n,s){if(te(e))return this;{this.value&&s(n,this.value);const l=ne(e),u=this.children.get(l);return u?u.foreachOnPath_(pe(e),Me(n,l),s):new _e(null)}}foreach(e){this.foreach_(le(),e)}foreach_(e,n){this.children.inorderTraversal((s,l)=>{l.foreach_(Me(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}class Wt{constructor(e){this.writeTree_=e}static empty(){return new Wt(new _e(null))}}function hs(i,e,n){if(te(e))return new Wt(new _e(n));{const s=i.writeTree_.findRootMostValueAndPath(e);if(s!=null){const l=s.path;let u=s.value;const d=Ze(l,e);return u=u.updateChild(d,n),new Wt(i.writeTree_.set(l,u))}else{const l=new _e(n),u=i.writeTree_.setTree(e,l);return new Wt(u)}}}function Jp(i,e,n){let s=i;return ht(n,(l,u)=>{s=hs(s,Me(e,l),u)}),s}function Zp(i,e){if(te(e))return Wt.empty();{const n=i.writeTree_.setTree(e,new _e(null));return new Wt(n)}}function dc(i,e){return Nr(i,e)!=null}function Nr(i,e){const n=i.writeTree_.findRootMostValueAndPath(e);return n!=null?i.writeTree_.get(n.path).getChild(Ze(n.path,e)):null}function em(i){const e=[],n=i.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ie,(s,l)=>{e.push(new Z(s,l))}):i.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&e.push(new Z(s,l.value))}),e}function $n(i,e){if(te(e))return i;{const n=Nr(i,e);return n!=null?new Wt(new _e(n)):new Wt(i.writeTree_.subtree(e))}}function hc(i){return i.writeTree_.isEmpty()}function di(i,e){return Fg(le(),i.writeTree_,e)}function Fg(i,e,n){if(e.value!=null)return n.updateChild(i,e.value);{let s=null;return e.children.inorderTraversal((l,u)=>{l===".priority"?(D(u.value!==null,"Priority writes must always be leaf nodes"),s=u.value):n=Fg(Me(i,l),u,n)}),!n.getChild(i).isEmpty()&&s!==null&&(n=n.updateChild(Me(i,".priority"),s)),n}}function Ll(i,e){return Wg(e,i)}function vS(i,e,n,s,l){D(s>i.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),i.allWrites.push({path:e,snap:n,writeId:s,visible:l}),l&&(i.visibleWrites=hs(i.visibleWrites,e,n)),i.lastWriteId=s}function yS(i,e){for(let n=0;n<i.allWrites.length;n++){const s=i.allWrites[n];if(s.writeId===e)return s}return null}function wS(i,e){const n=i.allWrites.findIndex(f=>f.writeId===e);D(n>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[n];i.allWrites.splice(n,1);let l=s.visible,u=!1,d=i.allWrites.length-1;for(;l&&d>=0;){const f=i.allWrites[d];f.visible&&(d>=n&&ES(f,s.path)?l=!1:Ut(s.path,f.path)&&(u=!0)),d--}if(l){if(u)return SS(i),!0;if(s.snap)i.visibleWrites=Zp(i.visibleWrites,s.path);else{const f=s.children;ht(f,m=>{i.visibleWrites=Zp(i.visibleWrites,Me(s.path,m))})}return!0}else return!1}function ES(i,e){if(i.snap)return Ut(i.path,e);for(const n in i.children)if(i.children.hasOwnProperty(n)&&Ut(Me(i.path,n),e))return!0;return!1}function SS(i){i.visibleWrites=Ug(i.allWrites,CS,le()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function CS(i){return i.visible}function Ug(i,e,n){let s=Wt.empty();for(let l=0;l<i.length;++l){const u=i[l];if(e(u)){const d=u.path;let f;if(u.snap)Ut(n,d)?(f=Ze(n,d),s=hs(s,f,u.snap)):Ut(d,n)&&(f=Ze(d,n),s=hs(s,le(),u.snap.getChild(f)));else if(u.children){if(Ut(n,d))f=Ze(n,d),s=Jp(s,f,u.children);else if(Ut(d,n))if(f=Ze(d,n),te(f))s=Jp(s,le(),u.children);else{const m=oi(u.children,ne(f));if(m){const g=m.getChild(pe(f));s=hs(s,le(),g)}}}else throw fi("WriteRecord should have .snap or .children")}}return s}function zg(i,e,n,s,l){if(!s&&!l){const u=Nr(i.visibleWrites,e);if(u!=null)return u;{const d=$n(i.visibleWrites,e);if(hc(d))return n;if(n==null&&!dc(d,le()))return null;{const f=n||G.EMPTY_NODE;return di(d,f)}}}else{const u=$n(i.visibleWrites,e);if(!l&&hc(u))return n;if(!l&&n==null&&!dc(u,le()))return null;{const d=function(g){return(g.visible||l)&&(!s||!~s.indexOf(g.writeId))&&(Ut(g.path,e)||Ut(e,g.path))},f=Ug(i.allWrites,d,e),m=n||G.EMPTY_NODE;return di(f,m)}}}function IS(i,e,n){let s=G.EMPTY_NODE;const l=Nr(i.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(Ie,(u,d)=>{s=s.updateImmediateChild(u,d)}),s;if(n){const u=$n(i.visibleWrites,e);return n.forEachChild(Ie,(d,f)=>{const m=di($n(u,new de(d)),f);s=s.updateImmediateChild(d,m)}),em(u).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}else{const u=$n(i.visibleWrites,e);return em(u).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}}function TS(i,e,n,s,l){D(s||l,"Either existingEventSnap or existingServerSnap must exist");const u=Me(e,n);if(dc(i.visibleWrites,u))return null;{const d=$n(i.visibleWrites,u);return hc(d)?l.getChild(n):di(d,l.getChild(n))}}function kS(i,e,n,s){const l=Me(e,n),u=Nr(i.visibleWrites,l);if(u!=null)return u;if(s.isCompleteForChild(n)){const d=$n(i.visibleWrites,l);return di(d,s.getNode().getImmediateChild(n))}else return null}function NS(i,e){return Nr(i.visibleWrites,e)}function RS(i,e,n,s,l,u,d){let f;const m=$n(i.visibleWrites,e),g=Nr(m,le());if(g!=null)f=g;else if(n!=null)f=di(m,n);else return[];if(f=f.withIndex(d),!f.isEmpty()&&!f.isLeafNode()){const w=[],v=d.getCompare(),S=u?f.getReverseIteratorFrom(s,d):f.getIteratorFrom(s,d);let O=S.getNext();for(;O&&w.length<l;)v(O,s)!==0&&w.push(O),O=S.getNext();return w}else return[]}function PS(){return{visibleWrites:Wt.empty(),allWrites:[],lastWriteId:-1}}function yl(i,e,n,s){return zg(i.writeTree,i.treePath,e,n,s)}function Wc(i,e){return IS(i.writeTree,i.treePath,e)}function tm(i,e,n,s){return TS(i.writeTree,i.treePath,e,n,s)}function wl(i,e){return NS(i.writeTree,Me(i.treePath,e))}function AS(i,e,n,s,l,u){return RS(i.writeTree,i.treePath,e,n,s,l,u)}function Vc(i,e,n){return kS(i.writeTree,i.treePath,e,n)}function jg(i,e){return Wg(Me(i.treePath,e),i.writeTree)}function Wg(i,e){return{treePath:i,writeTree:e}}class OS{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;D(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),D(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const u=l.type;if(n==="child_added"&&u==="child_removed")this.changeMap.set(s,Es(s,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&u==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&u==="child_changed")this.changeMap.set(s,ws(s,l.oldSnap));else if(n==="child_changed"&&u==="child_added")this.changeMap.set(s,ci(s,e.snapshotNode));else if(n==="child_changed"&&u==="child_changed")this.changeMap.set(s,Es(s,e.snapshotNode,l.oldSnap));else throw fi("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}class xS{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Vg=new xS;class Bc{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Jn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vc(this.writes_,e,s)}}getChildAfterChild(e,n,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ir(this.viewCache_),u=AS(this.writes_,l,n,1,s,e);return u.length===0?null:u[0]}}function DS(i){return{filter:i}}function LS(i,e){D(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),D(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function MS(i,e,n,s,l){const u=new OS;let d,f;if(n.type===zt.OVERWRITE){const g=n;g.source.fromUser?d=fc(i,e,g.path,g.snap,s,l,u):(D(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered()&&!te(g.path),d=El(i,e,g.path,g.snap,s,l,f,u))}else if(n.type===zt.MERGE){const g=n;g.source.fromUser?d=FS(i,e,g.path,g.children,s,l,u):(D(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered(),d=pc(i,e,g.path,g.children,s,l,f,u))}else if(n.type===zt.ACK_USER_WRITE){const g=n;g.revert?d=jS(i,e,g.path,s,l,u):d=US(i,e,g.path,g.affectedTree,s,l,u)}else if(n.type===zt.LISTEN_COMPLETE)d=zS(i,e,n.path,s,u);else throw fi("Unknown operation type: "+n.type);const m=u.getChanges();return bS(e,d,m),{viewCache:d,changes:m}}function bS(i,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),u=vl(i);(n.length>0||!i.eventCache.isFullyInitialized()||l&&!s.getNode().equals(u)||!s.getNode().getPriority().equals(u.getPriority()))&&n.push(Dg(vl(e)))}}function Bg(i,e,n,s,l,u){const d=e.eventCache;if(wl(s,n)!=null)return e;{let f,m;if(te(n))if(D(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Ir(e),w=g instanceof G?g:G.EMPTY_NODE,v=Wc(s,w);f=i.filter.updateFullNode(e.eventCache.getNode(),v,u)}else{const g=yl(s,Ir(e));f=i.filter.updateFullNode(e.eventCache.getNode(),g,u)}else{const g=ne(n);if(g===".priority"){D(Xn(n)===1,"Can't have a priority with additional path components");const w=d.getNode();m=e.serverCache.getNode();const v=tm(s,n,w,m);v!=null?f=i.filter.updatePriority(w,v):f=d.getNode()}else{const w=pe(n);let v;if(d.isCompleteForChild(g)){m=e.serverCache.getNode();const S=tm(s,n,d.getNode(),m);S!=null?v=d.getNode().getImmediateChild(g).updateChild(w,S):v=d.getNode().getImmediateChild(g)}else v=Vc(s,g,e.serverCache);v!=null?f=i.filter.updateChild(d.getNode(),g,v,w,l,u):f=d.getNode()}}return ds(e,f,d.isFullyInitialized()||te(n),i.filter.filtersNodes())}}function El(i,e,n,s,l,u,d,f){const m=e.serverCache;let g;const w=d?i.filter:i.filter.getIndexedFilter();if(te(n))g=w.updateFullNode(m.getNode(),s,null);else if(w.filtersNodes()&&!m.isFiltered()){const O=m.getNode().updateChild(n,s);g=w.updateFullNode(m.getNode(),O,null)}else{const O=ne(n);if(!m.isCompleteForPath(n)&&Xn(n)>1)return e;const M=pe(n),K=m.getNode().getImmediateChild(O).updateChild(M,s);O===".priority"?g=w.updatePriority(m.getNode(),K):g=w.updateChild(m.getNode(),O,K,M,Vg,null)}const v=bg(e,g,m.isFullyInitialized()||te(n),w.filtersNodes()),S=new Bc(l,v,u);return Bg(i,v,n,l,S,f)}function fc(i,e,n,s,l,u,d){const f=e.eventCache;let m,g;const w=new Bc(l,e,u);if(te(n))g=i.filter.updateFullNode(e.eventCache.getNode(),s,d),m=ds(e,g,!0,i.filter.filtersNodes());else{const v=ne(n);if(v===".priority")g=i.filter.updatePriority(e.eventCache.getNode(),s),m=ds(e,g,f.isFullyInitialized(),f.isFiltered());else{const S=pe(n),O=f.getNode().getImmediateChild(v);let M;if(te(S))M=s;else{const V=w.getCompleteChild(v);V!=null?Cg(S)===".priority"&&V.getChild(Tg(S)).isEmpty()?M=V:M=V.updateChild(S,s):M=G.EMPTY_NODE}if(O.equals(M))m=e;else{const V=i.filter.updateChild(f.getNode(),v,M,S,w,d);m=ds(e,V,f.isFullyInitialized(),i.filter.filtersNodes())}}}return m}function nm(i,e){return i.eventCache.isCompleteForChild(e)}function FS(i,e,n,s,l,u,d){let f=e;return s.foreach((m,g)=>{const w=Me(n,m);nm(e,ne(w))&&(f=fc(i,f,w,g,l,u,d))}),s.foreach((m,g)=>{const w=Me(n,m);nm(e,ne(w))||(f=fc(i,f,w,g,l,u,d))}),f}function rm(i,e,n){return n.foreach((s,l)=>{e=e.updateChild(s,l)}),e}function pc(i,e,n,s,l,u,d,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;te(n)?g=s:g=new _e(null).setTree(n,s);const w=e.serverCache.getNode();return g.children.inorderTraversal((v,S)=>{if(w.hasChild(v)){const O=e.serverCache.getNode().getImmediateChild(v),M=rm(i,O,S);m=El(i,m,new de(v),M,l,u,d,f)}}),g.children.inorderTraversal((v,S)=>{const O=!e.serverCache.isCompleteForChild(v)&&S.value===null;if(!w.hasChild(v)&&!O){const M=e.serverCache.getNode().getImmediateChild(v),V=rm(i,M,S);m=El(i,m,new de(v),V,l,u,d,f)}}),m}function US(i,e,n,s,l,u,d){if(wl(l,n)!=null)return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(s.value!=null){if(te(n)&&m.isFullyInitialized()||m.isCompleteForPath(n))return El(i,e,n,m.getNode().getChild(n),l,u,f,d);if(te(n)){let g=new _e(null);return m.getNode().forEachChild(ni,(w,v)=>{g=g.set(new de(w),v)}),pc(i,e,n,g,l,u,f,d)}else return e}else{let g=new _e(null);return s.foreach((w,v)=>{const S=Me(n,w);m.isCompleteForPath(S)&&(g=g.set(w,m.getNode().getChild(S)))}),pc(i,e,n,g,l,u,f,d)}}function zS(i,e,n,s,l){const u=e.serverCache,d=bg(e,u.getNode(),u.isFullyInitialized()||te(n),u.isFiltered());return Bg(i,d,n,s,Vg,l)}function jS(i,e,n,s,l,u){let d;if(wl(s,n)!=null)return e;{const f=new Bc(s,e,l),m=e.eventCache.getNode();let g;if(te(n)||ne(n)===".priority"){let w;if(e.serverCache.isFullyInitialized())w=yl(s,Ir(e));else{const v=e.serverCache.getNode();D(v instanceof G,"serverChildren would be complete if leaf node"),w=Wc(s,v)}w=w,g=i.filter.updateFullNode(m,w,u)}else{const w=ne(n);let v=Vc(s,w,e.serverCache);v==null&&e.serverCache.isCompleteForChild(w)&&(v=m.getImmediateChild(w)),v!=null?g=i.filter.updateChild(m,w,v,pe(n),f,u):e.eventCache.getNode().hasChild(w)?g=i.filter.updateChild(m,w,G.EMPTY_NODE,pe(n),f,u):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=yl(s,Ir(e)),d.isLeafNode()&&(g=i.filter.updateFullNode(g,d,u)))}return d=e.serverCache.isFullyInitialized()||wl(s,le())!=null,ds(e,g,d,i.filter.filtersNodes())}}class WS{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,l=new Fc(s.getIndex()),u=oS(s);this.processor_=DS(u);const d=n.serverCache,f=n.eventCache,m=l.updateFullNode(G.EMPTY_NODE,d.getNode(),null),g=u.updateFullNode(G.EMPTY_NODE,f.getNode(),null),w=new Jn(m,d.isFullyInitialized(),l.filtersNodes()),v=new Jn(g,f.isFullyInitialized(),u.filtersNodes());this.viewCache_=Dl(v,w),this.eventGenerator_=new fS(this.query_)}get query(){return this.query_}}function VS(i){return i.viewCache_.serverCache.getNode()}function BS(i){return vl(i.viewCache_)}function HS(i,e){const n=Ir(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!te(e)&&!n.getImmediateChild(ne(e)).isEmpty())?n.getChild(e):null}function im(i){return i.eventRegistrations_.length===0}function $S(i,e){i.eventRegistrations_.push(e)}function sm(i,e,n){const s=[];if(n){D(e==null,"A cancel should cancel all event registrations.");const l=i.query._path;i.eventRegistrations_.forEach(u=>{const d=u.createCancelEvent(n,l);d&&s.push(d)})}if(e){let l=[];for(let u=0;u<i.eventRegistrations_.length;++u){const d=i.eventRegistrations_[u];if(!d.matches(e))l.push(d);else if(e.hasAnyCallback()){l=l.concat(i.eventRegistrations_.slice(u+1));break}}i.eventRegistrations_=l}else i.eventRegistrations_=[];return s}function om(i,e,n,s){e.type===zt.MERGE&&e.source.queryId!==null&&(D(Ir(i.viewCache_),"We should always have a full cache before handling merges"),D(vl(i.viewCache_),"Missing event cache, even though we have a server cache"));const l=i.viewCache_,u=MS(i.processor_,l,e,n,s);return LS(i.processor_,u.viewCache),D(u.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=u.viewCache,Hg(i,u.changes,u.viewCache.eventCache.getNode(),null)}function GS(i,e){const n=i.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ie,(u,d)=>{s.push(ci(u,d))}),n.isFullyInitialized()&&s.push(Dg(n.getNode())),Hg(i,s,n.getNode(),e)}function Hg(i,e,n,s){const l=s?[s]:i.eventRegistrations_;return pS(i.eventGenerator_,e,n,l)}let Sl;class $g{constructor(){this.views=new Map}}function KS(i){D(!Sl,"__referenceConstructor has already been defined"),Sl=i}function qS(){return D(Sl,"Reference.ts has not been loaded"),Sl}function QS(i){return i.views.size===0}function Hc(i,e,n,s){const l=e.source.queryId;if(l!==null){const u=i.views.get(l);return D(u!=null,"SyncTree gave us an op for an invalid query."),om(u,e,n,s)}else{let u=[];for(const d of i.views.values())u=u.concat(om(d,e,n,s));return u}}function Gg(i,e,n,s,l){const u=e._queryIdentifier,d=i.views.get(u);if(!d){let f=yl(n,l?s:null),m=!1;f?m=!0:s instanceof G?(f=Wc(n,s),m=!1):(f=G.EMPTY_NODE,m=!1);const g=Dl(new Jn(f,m,!1),new Jn(s,l,!1));return new WS(e,g)}return d}function YS(i,e,n,s,l,u){const d=Gg(i,e,s,l,u);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,d),$S(d,n),GS(d,n)}function XS(i,e,n,s){const l=e._queryIdentifier,u=[];let d=[];const f=Zn(i);if(l==="default")for(const[m,g]of i.views.entries())d=d.concat(sm(g,n,s)),im(g)&&(i.views.delete(m),g.query._queryParams.loadsAllData()||u.push(g.query));else{const m=i.views.get(l);m&&(d=d.concat(sm(m,n,s)),im(m)&&(i.views.delete(l),m.query._queryParams.loadsAllData()||u.push(m.query)))}return f&&!Zn(i)&&u.push(new(qS())(e._repo,e._path)),{removed:u,events:d}}function Kg(i){const e=[];for(const n of i.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Gn(i,e){let n=null;for(const s of i.views.values())n=n||HS(s,e);return n}function qg(i,e){if(e._queryParams.loadsAllData())return Ml(i);{const s=e._queryIdentifier;return i.views.get(s)}}function Qg(i,e){return qg(i,e)!=null}function Zn(i){return Ml(i)!=null}function Ml(i){for(const e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Cl;function JS(i){D(!Cl,"__referenceConstructor has already been defined"),Cl=i}function ZS(){return D(Cl,"Reference.ts has not been loaded"),Cl}let eC=1;class lm{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _e(null),this.pendingWriteTree_=PS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Yg(i,e,n,s,l){return vS(i.pendingWriteTree_,e,n,s,l),l?Ds(i,new Cr(Mg(),e,n)):[]}function vr(i,e,n=!1){const s=yS(i.pendingWriteTree_,e);if(wS(i.pendingWriteTree_,e)){let u=new _e(null);return s.snap!=null?u=u.set(le(),!0):ht(s.children,d=>{u=u.set(new de(d),!0)}),Ds(i,new _l(s.path,u,n))}else return[]}function xs(i,e,n){return Ds(i,new Cr(zc(),e,n))}function tC(i,e,n){const s=_e.fromObject(n);return Ds(i,new Is(zc(),e,s))}function nC(i,e){return Ds(i,new Cs(zc(),e))}function rC(i,e,n){const s=Gc(i,n);if(s){const l=Kc(s),u=l.path,d=l.queryId,f=Ze(u,e),m=new Cs(jc(d),f);return qc(i,u,m)}else return[]}function Xg(i,e,n,s,l=!1){const u=e._path,d=i.syncPointTree_.get(u);let f=[];if(d&&(e._queryIdentifier==="default"||Qg(d,e))){const m=XS(d,e,n,s);QS(d)&&(i.syncPointTree_=i.syncPointTree_.remove(u));const g=m.removed;if(f=m.events,!l){const w=g.findIndex(S=>S._queryParams.loadsAllData())!==-1,v=i.syncPointTree_.findOnPath(u,(S,O)=>Zn(O));if(w&&!v){const S=i.syncPointTree_.subtree(u);if(!S.isEmpty()){const O=lC(S);for(let M=0;M<O.length;++M){const V=O[M],K=V.query,Pe=t_(i,V);i.listenProvider_.startListening(fs(K),Ts(i,K),Pe.hashFn,Pe.onComplete)}}}!v&&g.length>0&&!s&&(w?i.listenProvider_.stopListening(fs(e),null):g.forEach(S=>{const O=i.queryToTagMap.get(bl(S));i.listenProvider_.stopListening(fs(S),O)}))}aC(i,g)}return f}function Jg(i,e,n,s){const l=Gc(i,s);if(l!=null){const u=Kc(l),d=u.path,f=u.queryId,m=Ze(d,e),g=new Cr(jc(f),m,n);return qc(i,d,g)}else return[]}function iC(i,e,n,s){const l=Gc(i,s);if(l){const u=Kc(l),d=u.path,f=u.queryId,m=Ze(d,e),g=_e.fromObject(n),w=new Is(jc(f),m,g);return qc(i,d,w)}else return[]}function sC(i,e,n,s=!1){const l=e._path;let u=null,d=!1;i.syncPointTree_.foreachOnPath(l,(S,O)=>{const M=Ze(S,l);u=u||Gn(O,M),d=d||Zn(O)});let f=i.syncPointTree_.get(l);f?(d=d||Zn(f),u=u||Gn(f,le())):(f=new $g,i.syncPointTree_=i.syncPointTree_.set(l,f));let m;u!=null?m=!0:(m=!1,u=G.EMPTY_NODE,i.syncPointTree_.subtree(l).foreachChild((O,M)=>{const V=Gn(M,le());V&&(u=u.updateImmediateChild(O,V))}));const g=Qg(f,e);if(!g&&!e._queryParams.loadsAllData()){const S=bl(e);D(!i.queryToTagMap.has(S),"View does not exist, but we have a tag");const O=uC();i.queryToTagMap.set(S,O),i.tagToQueryMap.set(O,S)}const w=Ll(i.pendingWriteTree_,l);let v=YS(f,e,n,w,u,m);if(!g&&!d&&!s){const S=qg(f,e);v=v.concat(cC(i,e,S))}return v}function $c(i,e,n){const l=i.pendingWriteTree_,u=i.syncPointTree_.findOnPath(e,(d,f)=>{const m=Ze(d,e),g=Gn(f,m);if(g)return g});return zg(l,e,u,n,!0)}function oC(i,e){const n=e._path;let s=null;i.syncPointTree_.foreachOnPath(n,(g,w)=>{const v=Ze(g,n);s=s||Gn(w,v)});let l=i.syncPointTree_.get(n);l?s=s||Gn(l,le()):(l=new $g,i.syncPointTree_=i.syncPointTree_.set(n,l));const u=s!=null,d=u?new Jn(s,!0,!1):null,f=Ll(i.pendingWriteTree_,e._path),m=Gg(l,e,f,u?d.getNode():G.EMPTY_NODE,u);return BS(m)}function Ds(i,e){return Zg(e,i.syncPointTree_,null,Ll(i.pendingWriteTree_,le()))}function Zg(i,e,n,s){if(te(i.path))return e_(i,e,n,s);{const l=e.get(le());n==null&&l!=null&&(n=Gn(l,le()));let u=[];const d=ne(i.path),f=i.operationForChild(d),m=e.children.get(d);if(m&&f){const g=n?n.getImmediateChild(d):null,w=jg(s,d);u=u.concat(Zg(f,m,g,w))}return l&&(u=u.concat(Hc(l,i,s,n))),u}}function e_(i,e,n,s){const l=e.get(le());n==null&&l!=null&&(n=Gn(l,le()));let u=[];return e.children.inorderTraversal((d,f)=>{const m=n?n.getImmediateChild(d):null,g=jg(s,d),w=i.operationForChild(d);w&&(u=u.concat(e_(w,f,m,g)))}),l&&(u=u.concat(Hc(l,i,s,n))),u}function t_(i,e){const n=e.query,s=Ts(i,n);return{hashFn:()=>(VS(e)||G.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return s?rC(i,n._path,s):nC(i,n._path);{const u=s0(l,n);return Xg(i,n,null,u)}}}}function Ts(i,e){const n=bl(e);return i.queryToTagMap.get(n)}function bl(i){return i._path.toString()+"$"+i._queryIdentifier}function Gc(i,e){return i.tagToQueryMap.get(e)}function Kc(i){const e=i.indexOf("$");return D(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new de(i.substr(0,e))}}function qc(i,e,n){const s=i.syncPointTree_.get(e);D(s,"Missing sync point for query tag that we're tracking");const l=Ll(i.pendingWriteTree_,e);return Hc(s,n,l,null)}function lC(i){return i.fold((e,n,s)=>{if(n&&Zn(n))return[Ml(n)];{let l=[];return n&&(l=Kg(n)),ht(s,(u,d)=>{l=l.concat(d)}),l}})}function fs(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(ZS())(i._repo,i._path):i}function aC(i,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const l=bl(s),u=i.queryToTagMap.get(l);i.queryToTagMap.delete(l),i.tagToQueryMap.delete(u)}}}function uC(){return eC++}function cC(i,e,n){const s=e._path,l=Ts(i,e),u=t_(i,n),d=i.listenProvider_.startListening(fs(e),l,u.hashFn,u.onComplete),f=i.syncPointTree_.subtree(s);if(l)D(!Zn(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((g,w,v)=>{if(!te(g)&&w&&Zn(w))return[Ml(w).query];{let S=[];return w&&(S=S.concat(Kg(w).map(O=>O.query))),ht(v,(O,M)=>{S=S.concat(M)}),S}});for(let g=0;g<m.length;++g){const w=m[g];i.listenProvider_.stopListening(fs(w),Ts(i,w))}}return d}class Qc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Qc(n)}node(){return this.node_}}class Yc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Me(this.path_,e);return new Yc(this.syncTree_,n)}node(){return $c(this.syncTree_,this.path_)}}const dC=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},am=function(i,e,n){if(!i||typeof i!="object")return i;if(D(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return hC(i[".sv"],e,n);if(typeof i[".sv"]=="object")return fC(i[".sv"],e);D(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},hC=function(i,e,n){if(i==="timestamp")return n.timestamp;D(!1,"Unexpected server value: "+i)},fC=function(i,e,n){i.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;typeof s!="number"&&D(!1,"Unexpected increment value: "+s);const l=e.node();if(D(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const d=l.getValue();return typeof d!="number"?s:d+s},pC=function(i,e,n,s){return Xc(e,new Yc(n,i),s)},n_=function(i,e,n){return Xc(i,new Qc(e),n)};function Xc(i,e,n){const s=i.getPriority().val(),l=am(s,e.getImmediateChild(".priority"),n);let u;if(i.isLeafNode()){const d=i,f=am(d.getValue(),e,n);return f!==d.getValue()||l!==d.getPriority().val()?new je(f,Ve(l)):i}else{const d=i;return u=d,l!==d.getPriority().val()&&(u=u.updatePriority(new je(l))),d.forEachChild(Ie,(f,m)=>{const g=Xc(m,e.getImmediateChild(f),n);g!==m&&(u=u.updateImmediateChild(f,g))}),u}}class Jc{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Zc(i,e){let n=e instanceof de?e:new de(e),s=i,l=ne(n);for(;l!==null;){const u=oi(s.node.children,l)||{children:{},childCount:0};s=new Jc(l,s,u),n=pe(n),l=ne(n)}return s}function _i(i){return i.node.value}function r_(i,e){i.node.value=e,mc(i)}function i_(i){return i.node.childCount>0}function mC(i){return _i(i)===void 0&&!i_(i)}function Fl(i,e){ht(i.node.children,(n,s)=>{e(new Jc(n,i,s))})}function s_(i,e,n,s){n&&e(i),Fl(i,l=>{s_(l,e,!0)})}function gC(i,e,n){let s=i.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Ls(i){return new de(i.parent===null?i.name:Ls(i.parent)+"/"+i.name)}function mc(i){i.parent!==null&&_C(i.parent,i.name,i)}function _C(i,e,n){const s=mC(n),l=Bt(i.node.children,e);s&&l?(delete i.node.children[e],i.node.childCount--,mc(i)):!s&&!l&&(i.node.children[e]=n.node,i.node.childCount++,mc(i))}const vC=/[\[\].#$\/\u0000-\u001F\u007F]/,yC=/[\[\].#$\u0000-\u001F\u007F]/,Ju=10*1024*1024,o_=function(i){return typeof i=="string"&&i.length!==0&&!vC.test(i)},l_=function(i){return typeof i=="string"&&i.length!==0&&!yC.test(i)},wC=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),l_(i)},EC=function(i,e,n,s){ed(Tc(i,"value"),e,n)},ed=function(i,e,n){const s=n instanceof de?new U0(n,i):n;if(e===void 0)throw new Error(i+"contains undefined "+gr(s));if(typeof e=="function")throw new Error(i+"contains a function "+gr(s)+" with contents = "+e.toString());if(ng(e))throw new Error(i+"contains "+e.toString()+" "+gr(s));if(typeof e=="string"&&e.length>Ju/3&&Al(e)>Ju)throw new Error(i+"contains a string greater than "+Ju+" utf8 bytes "+gr(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,u=!1;if(ht(e,(d,f)=>{if(d===".value")l=!0;else if(d!==".priority"&&d!==".sv"&&(u=!0,!o_(d)))throw new Error(i+" contains an invalid key ("+d+") "+gr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);z0(s,d),ed(i,f,s),j0(s)}),l&&u)throw new Error(i+' contains ".value" child '+gr(s)+" in addition to actual children.")}},a_=function(i,e,n,s){if(!l_(n))throw new Error(Tc(i,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},SC=function(i,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),a_(i,e,n)},u_=function(i,e){if(ne(e)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},CC=function(i,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!o_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!wC(n))throw new Error(Tc(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class IC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function c_(i,e){let n=null;for(let s=0;s<e.length;s++){const l=e[s],u=l.getPath();n!==null&&!kg(u,n.path)&&(i.eventLists_.push(n),n=null),n===null&&(n={events:[],path:u}),n.events.push(l)}n&&i.eventLists_.push(n)}function Zt(i,e,n){c_(i,n),TC(i,s=>Ut(s,e)||Ut(e,s))}function TC(i,e){i.recursionDepth_++;let n=!0;for(let s=0;s<i.eventLists_.length;s++){const l=i.eventLists_[s];if(l){const u=l.path;e(u)?(kC(i.eventLists_[s]),i.eventLists_[s]=null):n=!1}}n&&(i.eventLists_=[]),i.recursionDepth_--}function kC(i){for(let e=0;e<i.events.length;e++){const n=i.events[e];if(n!==null){i.events[e]=null;const s=n.getEventRunner();us&&Ye("event: "+n.toString()),gi(s)}}}const NC="repo_interrupt",RC=25;class PC{constructor(e,n,s,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new IC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=gl(),this.transactionQueueTree_=new Jc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function AC(i,e,n){if(i.stats_=Dc(i.repoInfo_),i.forceRestClient_||u0())i.server_=new ml(i.repoInfo_,(s,l,u,d)=>{um(i,s,l,u,d)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>cm(i,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Le(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new mn(i.repoInfo_,e,(s,l,u,d)=>{um(i,s,l,u,d)},s=>{cm(i,s)},s=>{xC(i,s)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=p0(i.repoInfo_,()=>new hS(i.stats_,i.server_)),i.infoData_=new lS,i.infoSyncTree_=new lm({startListening:(s,l,u,d)=>{let f=[];const m=i.infoData_.getNode(s._path);return m.isEmpty()||(f=xs(i.infoSyncTree_,s._path,m),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),nd(i,"connected",!1),i.serverSyncTree_=new lm({startListening:(s,l,u,d)=>(i.server_.listen(s,u,l,(f,m)=>{const g=d(f,m);Zt(i.eventQueue_,s._path,g)}),[]),stopListening:(s,l)=>{i.server_.unlisten(s,l)}})}function OC(i){const n=i.infoData_.getNode(new de(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function td(i){return dC({timestamp:OC(i)})}function um(i,e,n,s,l){i.dataUpdateCount++;const u=new de(e);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,n):n;let d=[];if(l)if(s){const m=ul(n,g=>Ve(g));d=iC(i.serverSyncTree_,u,m,l)}else{const m=Ve(n);d=Jg(i.serverSyncTree_,u,m,l)}else if(s){const m=ul(n,g=>Ve(g));d=tC(i.serverSyncTree_,u,m)}else{const m=Ve(n);d=xs(i.serverSyncTree_,u,m)}let f=u;d.length>0&&(f=zl(i,u)),Zt(i.eventQueue_,f,d)}function cm(i,e){nd(i,"connected",e),e===!1&&MC(i)}function xC(i,e){ht(e,(n,s)=>{nd(i,n,s)})}function nd(i,e,n){const s=new de("/.info/"+e),l=Ve(n);i.infoData_.updateSnapshot(s,l);const u=xs(i.infoSyncTree_,s,l);Zt(i.eventQueue_,s,u)}function d_(i){return i.nextWriteId_++}function DC(i,e,n){const s=oC(i.serverSyncTree_,e);return s!=null?Promise.resolve(s):i.server_.get(e).then(l=>{const u=Ve(l).withIndex(e._queryParams.getIndex());sC(i.serverSyncTree_,e,n,!0);let d;if(e._queryParams.loadsAllData())d=xs(i.serverSyncTree_,e._path,u);else{const f=Ts(i.serverSyncTree_,e);d=Jg(i.serverSyncTree_,e._path,u,f)}return Zt(i.eventQueue_,e._path,d),Xg(i.serverSyncTree_,e,n,null,!0),u},l=>(Ul(i,"get for query "+Le(e)+" failed: "+l),Promise.reject(new Error(l))))}function LC(i,e,n,s,l){Ul(i,"set",{path:e.toString(),value:n,priority:s});const u=td(i),d=Ve(n,s),f=$c(i.serverSyncTree_,e),m=n_(d,f,u),g=d_(i),w=Yg(i.serverSyncTree_,e,m,g,!0);c_(i.eventQueue_,w),i.server_.put(e.toString(),d.val(!0),(S,O)=>{const M=S==="ok";M||dt("set at "+e+" failed: "+S);const V=vr(i.serverSyncTree_,g,!M);Zt(i.eventQueue_,e,V),FC(i,l,S,O)});const v=g_(i,e);zl(i,v),Zt(i.eventQueue_,v,[])}function MC(i){Ul(i,"onDisconnectEvents");const e=td(i),n=gl();cc(i.onDisconnect_,le(),(l,u)=>{const d=pC(l,u,i.serverSyncTree_,e);Lg(n,l,d)});let s=[];cc(n,le(),(l,u)=>{s=s.concat(xs(i.serverSyncTree_,l,u));const d=g_(i,l);zl(i,d)}),i.onDisconnect_=gl(),Zt(i.eventQueue_,le(),s)}function bC(i){i.persistentConnection_&&i.persistentConnection_.interrupt(NC)}function Ul(i,...e){let n="";i.persistentConnection_&&(n=i.persistentConnection_.id+":"),Ye(n,...e)}function FC(i,e,n,s){e&&gi(()=>{if(n==="ok")e(null);else{const l=(n||"error").toUpperCase();let u=l;s&&(u+=": "+s);const d=new Error(u);d.code=l,e(d)}})}function h_(i,e,n){return $c(i.serverSyncTree_,e,n)||G.EMPTY_NODE}function rd(i,e=i.transactionQueueTree_){if(e||jl(i,e),_i(e)){const n=p_(i,e);D(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&UC(i,Ls(e),n)}else i_(e)&&Fl(e,n=>{rd(i,n)})}function UC(i,e,n){const s=n.map(g=>g.currentWriteId),l=h_(i,e,s);let u=l;const d=l.hash();for(let g=0;g<n.length;g++){const w=n[g];D(w.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const v=Ze(e,w.path);u=u.updateChild(v,w.currentOutputSnapshotRaw)}const f=u.val(!0),m=e;i.server_.put(m.toString(),f,g=>{Ul(i,"transaction put response",{path:m.toString(),status:g});let w=[];if(g==="ok"){const v=[];for(let S=0;S<n.length;S++)n[S].status=2,w=w.concat(vr(i.serverSyncTree_,n[S].currentWriteId)),n[S].onComplete&&v.push(()=>n[S].onComplete(null,!0,n[S].currentOutputSnapshotResolved)),n[S].unwatcher();jl(i,Zc(i.transactionQueueTree_,e)),rd(i,i.transactionQueueTree_),Zt(i.eventQueue_,e,w);for(let S=0;S<v.length;S++)gi(v[S])}else{if(g==="datastale")for(let v=0;v<n.length;v++)n[v].status===3?n[v].status=4:n[v].status=0;else{dt("transaction at "+m.toString()+" failed: "+g);for(let v=0;v<n.length;v++)n[v].status=4,n[v].abortReason=g}zl(i,e)}},d)}function zl(i,e){const n=f_(i,e),s=Ls(n),l=p_(i,n);return zC(i,l,s),s}function zC(i,e,n){if(e.length===0)return;const s=[];let l=[];const d=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],g=Ze(n,m.path);let w=!1,v;if(D(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)w=!0,v=m.abortReason,l=l.concat(vr(i.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=RC)w=!0,v="maxretry",l=l.concat(vr(i.serverSyncTree_,m.currentWriteId,!0));else{const S=h_(i,m.path,d);m.currentInputSnapshot=S;const O=e[f].update(S.val());if(O!==void 0){ed("transaction failed: Data returned ",O,m.path);let M=Ve(O);typeof O=="object"&&O!=null&&Bt(O,".priority")||(M=M.updatePriority(S.getPriority()));const K=m.currentWriteId,Pe=td(i),be=n_(M,S,Pe);m.currentOutputSnapshotRaw=M,m.currentOutputSnapshotResolved=be,m.currentWriteId=d_(i),d.splice(d.indexOf(K),1),l=l.concat(Yg(i.serverSyncTree_,m.path,be,m.currentWriteId,m.applyLocally)),l=l.concat(vr(i.serverSyncTree_,K,!0))}else w=!0,v="nodata",l=l.concat(vr(i.serverSyncTree_,m.currentWriteId,!0))}Zt(i.eventQueue_,n,l),l=[],w&&(e[f].status=2,(function(S){setTimeout(S,Math.floor(0))})(e[f].unwatcher),e[f].onComplete&&(v==="nodata"?s.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):s.push(()=>e[f].onComplete(new Error(v),!1,null))))}jl(i,i.transactionQueueTree_);for(let f=0;f<s.length;f++)gi(s[f]);rd(i,i.transactionQueueTree_)}function f_(i,e){let n,s=i.transactionQueueTree_;for(n=ne(e);n!==null&&_i(s)===void 0;)s=Zc(s,n),e=pe(e),n=ne(e);return s}function p_(i,e){const n=[];return m_(i,e,n),n.sort((s,l)=>s.order-l.order),n}function m_(i,e,n){const s=_i(e);if(s)for(let l=0;l<s.length;l++)n.push(s[l]);Fl(e,l=>{m_(i,l,n)})}function jl(i,e){const n=_i(e);if(n){let s=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[s]=n[l],s++);n.length=s,r_(e,n.length>0?n:void 0)}Fl(e,s=>{jl(i,s)})}function g_(i,e){const n=Ls(f_(i,e)),s=Zc(i.transactionQueueTree_,e);return gC(s,l=>{Zu(i,l)}),Zu(i,s),s_(s,l=>{Zu(i,l)}),n}function Zu(i,e){const n=_i(e);if(n){const s=[];let l=[],u=-1;for(let d=0;d<n.length;d++)n[d].status===3||(n[d].status===1?(D(u===d-1,"All SENT items should be at beginning of queue."),u=d,n[d].status=3,n[d].abortReason="set"):(D(n[d].status===0,"Unexpected transaction status in abort"),n[d].unwatcher(),l=l.concat(vr(i.serverSyncTree_,n[d].currentWriteId,!0)),n[d].onComplete&&s.push(n[d].onComplete.bind(null,new Error("set"),!1,null))));u===-1?r_(e,void 0):n.length=u+1,Zt(i.eventQueue_,Ls(e),l);for(let d=0;d<s.length;d++)gi(s[d])}}function jC(i){let e="";const n=i.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let l=n[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function WC(i){const e={};i.charAt(0)==="?"&&(i=i.substring(1));for(const n of i.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):dt(`Invalid query segment '${n}' in query '${i}'`)}return e}const dm=function(i,e){const n=VC(i),s=n.namespace;n.domain==="firebase.com"&&_n(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&_n("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||e0();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new pg(n.host,n.secure,s,l,e,"",s!==n.subdomain),path:new de(n.pathString)}},VC=function(i){let e="",n="",s="",l="",u="",d=!0,f="https",m=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(f=i.substring(0,g-1),i=i.substring(g+2));let w=i.indexOf("/");w===-1&&(w=i.length);let v=i.indexOf("?");v===-1&&(v=i.length),e=i.substring(0,Math.min(w,v)),w<v&&(l=jC(i.substring(w,v)));const S=WC(i.substring(Math.min(i.length,v)));g=e.indexOf(":"),g>=0?(d=f==="https"||f==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const O=e.slice(0,g);if(O.toLowerCase()==="localhost")n="localhost";else if(O.split(".").length<=2)n=O;else{const M=e.indexOf(".");s=e.substring(0,M).toLowerCase(),n=e.substring(M+1),u=s}"ns"in S&&(u=S.ns)}return{host:e,port:m,domain:n,subdomain:s,secure:d,scheme:f,pathString:l,namespace:u}};class BC{constructor(e,n,s,l){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Le(this.snapshot.exportVal())}}class HC{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class $C{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class id{constructor(e,n,s,l){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=l}get key(){return te(this._path)?null:Cg(this._path)}get ref(){return new wn(this._repo,this._path)}get _queryIdentifier(){const e=Yp(this._queryParams),n=Oc(e);return n==="{}"?"default":n}get _queryObject(){return Yp(this._queryParams)}isEqual(e){if(e=Nt(e),!(e instanceof id))return!1;const n=this._repo===e._repo,s=kg(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+F0(this._path)}}class wn extends id{constructor(e,n){super(e,n,new Uc,!1)}get parent(){const e=Tg(this._path);return e===null?null:new wn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ks{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new de(e),s=gc(this.ref,e);return new ks(this._node.getChild(n),s,Ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,l)=>e(new ks(l,gc(this.ref,s),Ie)))}hasChild(e){const n=new de(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function GC(i,e){return i=Nt(i),i._checkNotDeleted("ref"),e!==void 0?gc(i._root,e):i._root}function gc(i,e){return i=Nt(i),ne(i._path)===null?SC("child","path",e):a_("child","path",e),new wn(i._repo,Me(i._path,e))}function KC(i){return u_("remove",i._path),tl(i,null)}function tl(i,e){i=Nt(i),u_("set",i._path),EC("set",e,i._path);const n=new Pl;return LC(i._repo,i._path,e,null,n.wrapCallback(()=>{})),n.promise}function hm(i){i=Nt(i);const e=new $C(()=>{}),n=new sd(e);return DC(i._repo,i,n).then(s=>new ks(s,new wn(i._repo,i._path),i._queryParams.getIndex()))}class sd{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new BC("value",this,new ks(e.snapshotNode,new wn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new HC(this,e,n):null}matches(e){return e instanceof sd?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}KS(wn);JS(wn);const qC="FIREBASE_DATABASE_EMULATOR_HOST",_c={};let QC=!1;function YC(i,e,n,s){i.repoInfo_=new pg(`${e}:${n}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),s&&(i.authTokenProvider_=s)}function XC(i,e,n,s,l){let u=s||i.options.databaseURL;u===void 0&&(i.options.projectId||_n("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ye("Using default host for project ",i.options.projectId),u=`${i.options.projectId}-default-rtdb.firebaseio.com`);let d=dm(u,l),f=d.repoInfo,m;typeof process<"u"&&xp&&(m=xp[qC]),m?(u=`http://${m}?ns=${f.namespace}`,d=dm(u,l),f=d.repoInfo):d.repoInfo.secure;const g=new d0(i.name,i.options,e);CC("Invalid Firebase Database URL",d),te(d.path)||_n("Database URL must point to the root of a Firebase Database (not including a child path).");const w=ZC(f,i,g,new c0(i.name,n));return new eI(w,i)}function JC(i,e){const n=_c[e];(!n||n[i.key]!==i)&&_n(`Database ${e}(${i.repoInfo_}) has already been deleted.`),bC(i),delete n[i.key]}function ZC(i,e,n,s){let l=_c[e.name];l||(l={},_c[e.name]=l);let u=l[i.toURLString()];return u&&_n("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new PC(i,QC,n,s),l[i.toURLString()]=u,u}class eI{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(AC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wn(this._repo,le())),this._rootInternal}_delete(){return this._rootInternal!==null&&(JC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&_n("Cannot call "+e+" on a deleted database.")}}function tI(i=Pc(),e){const n=Rs(i,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=cw("database");s&&nI(n,...s)}return n}function nI(i,e,n,s={}){i=Nt(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&_n("Cannot call useEmulator() after instance has already been initialized.");const l=i._repoInternal;let u;if(l.repoInfo_.nodeAdmin)s.mockUserToken&&_n('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new el(el.OWNER);else if(s.mockUserToken){const d=typeof s.mockUserToken=="string"?s.mockUserToken:dw(s.mockUserToken,i.app.options.projectId);u=new el(d)}YC(l,e,n,u)}function rI(i){qE(er),Yn(new Kn("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),u=e.getProvider("app-check-internal");return XC(s,l,u,n)},"PUBLIC").setMultipleInstances(!0)),jt(Dp,Lp,i),jt(Dp,Lp,"esm2017")}mn.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};mn.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};rI();function od(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(i);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(i,s[l])&&(n[s[l]]=i[s[l]]);return n}function __(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iI=__,v_=new kr("auth","Firebase",__());const Il=new Ol("@firebase/auth");function sI(i,...e){Il.logLevel<=ce.WARN&&Il.warn(`Auth (${er}): ${i}`,...e)}function nl(i,...e){Il.logLevel<=ce.ERROR&&Il.error(`Auth (${er}): ${i}`,...e)}function en(i,...e){throw ad(i,...e)}function Vt(i,...e){return ad(i,...e)}function ld(i,e,n){const s=Object.assign(Object.assign({},iI()),{[e]:n});return new kr("auth","Firebase",s).create(e,{appName:i.name})}function Er(i){return ld(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oI(i,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&en(i,"argument-error"),ld(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ad(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return v_.create(i,...e)}function Q(i,e,...n){if(!i)throw ad(e,...n)}function hn(i){const e="INTERNAL ASSERTION FAILED: "+i;throw nl(e),new Error(e)}function vn(i,e){i||hn(e)}function vc(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function lI(){return fm()==="http:"||fm()==="https:"}function fm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}function aI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lI()||pw()||"connection"in navigator)?navigator.onLine:!0}function uI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Ms{constructor(e,n){this.shortDelay=e,this.longDelay=n,vn(n>e,"Short delay should be less than long delay!"),this.isMobile=Ic()||Um()}get(){return aI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ud(i,e){vn(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class y_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const dI=new Ms(3e4,6e4);function cd(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function vi(i,e,n,s,l={}){return w_(i,l,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const f=pi(Object.assign({key:i.config.apiKey},d)).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:m},u);return fw()||(g.referrerPolicy="no-referrer"),y_.fetch()(E_(i,i.config.apiHost,n,f),g)})}async function w_(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},cI),e);try{const l=new fI(i),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Jo(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const f=u.ok?d.errorMessage:d.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jo(i,"credential-already-in-use",d);if(m==="EMAIL_EXISTS")throw Jo(i,"email-already-in-use",d);if(m==="USER_DISABLED")throw Jo(i,"user-disabled",d);const w=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw ld(i,w,g);en(i,w)}}catch(l){if(l instanceof yn)throw l;en(i,"network-request-failed",{message:String(l)})}}async function hI(i,e,n,s,l={}){const u=await vi(i,e,n,s,l);return"mfaPendingCredential"in u&&en(i,"multi-factor-auth-required",{_serverResponse:u}),u}function E_(i,e,n,s){const l=`${e}${n}?${s}`;return i.config.emulator?ud(i.config,l):`${i.config.apiScheme}://${l}`}class fI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Vt(this.auth,"network-request-failed")),dI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jo(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Vt(i,e,s);return l.customData._tokenResponse=n,l}async function pI(i,e){return vi(i,"POST","/v1/accounts:delete",e)}async function S_(i,e){return vi(i,"POST","/v1/accounts:lookup",e)}function ps(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mI(i,e=!1){const n=Nt(i),s=await n.getIdToken(e),l=dd(s);Q(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:s,authTime:ps(ec(l.auth_time)),issuedAtTime:ps(ec(l.iat)),expirationTime:ps(ec(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ec(i){return Number(i)*1e3}function dd(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return nl("JWT malformed, contained fewer than 3 sections"),null;try{const l=al(n);return l?JSON.parse(l):(nl("Failed to decode base64 JWT payload"),null)}catch(l){return nl("Caught error parsing JWT payload as JSON",l?.toString()),null}}function pm(i){const e=dd(i);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ns(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof yn&&gI(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function gI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class _I{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class yc{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ps(this.lastLoginAt),this.creationTime=ps(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tl(i){var e;const n=i.auth,s=await i.getIdToken(),l=await Ns(i,S_(n,{idToken:s}));Q(l?.users.length,n,"internal-error");const u=l.users[0];i._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?C_(u.providerUserInfo):[],f=yI(i.providerData,d),m=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!f?.length,w=m?g:!1,v={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:f,metadata:new yc(u.createdAt,u.lastLoginAt),isAnonymous:w};Object.assign(i,v)}async function vI(i){const e=Nt(i);await Tl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yI(i,e){return[...i.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function C_(i){return i.map(e=>{var{providerId:n}=e,s=od(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}async function wI(i,e){const n=await w_(i,{},async()=>{const s=pi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=i.config,d=E_(i,l,"/v1/token",`key=${u}`),f=await i._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",y_.fetch()(d,{method:"POST",headers:f,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EI(i,e){return vi(i,"POST","/v2/accounts:revokeToken",cd(i,e))}class ri{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=pm(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:u}=await wI(e,n);this.updateTokensAndExpiration(s,l,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:u}=n,d=new ri;return s&&(Q(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Q(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(Q(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ri,this.toJSON())}_performRefresh(){return hn("not implemented")}}function jn(i,e){Q(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class fn{constructor(e){var{uid:n,auth:s,stsTokenManager:l}=e,u=od(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _I(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new yc(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Ns(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mI(this,e)}reload(){return vI(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Tl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xt(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await Ns(this,pI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,l,u,d,f,m,g,w;const v=(s=n.displayName)!==null&&s!==void 0?s:void 0,S=(l=n.email)!==null&&l!==void 0?l:void 0,O=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(d=n.photoURL)!==null&&d!==void 0?d:void 0,V=(f=n.tenantId)!==null&&f!==void 0?f:void 0,K=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,Pe=(g=n.createdAt)!==null&&g!==void 0?g:void 0,be=(w=n.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:Ae,emailVerified:Te,isAnonymous:tt,providerData:Oe,stsTokenManager:Be}=n;Q(Ae&&Be,e,"internal-error");const nt=ri.fromJSON(this.name,Be);Q(typeof Ae=="string",e,"internal-error"),jn(v,e.name),jn(S,e.name),Q(typeof Te=="boolean",e,"internal-error"),Q(typeof tt=="boolean",e,"internal-error"),jn(O,e.name),jn(M,e.name),jn(V,e.name),jn(K,e.name),jn(Pe,e.name),jn(be,e.name);const yt=new fn({uid:Ae,auth:e,email:S,emailVerified:Te,displayName:v,isAnonymous:tt,photoURL:M,phoneNumber:O,tenantId:V,stsTokenManager:nt,createdAt:Pe,lastLoginAt:be});return Oe&&Array.isArray(Oe)&&(yt.providerData=Oe.map(Rt=>Object.assign({},Rt))),K&&(yt._redirectEventId=K),yt}static async _fromIdTokenResponse(e,n,s=!1){const l=new ri;l.updateFromServerResponse(n);const u=new fn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Tl(u),u}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];Q(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?C_(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,f=new ri;f.updateFromIdToken(s);const m=new fn({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:d}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new yc(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(m,g),m}}const mm=new Map;function pn(i){vn(i instanceof Function,"Expected a class definition");let e=mm.get(i);return e?(vn(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,mm.set(i,e),e)}class I_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}I_.type="NONE";const gm=I_;function rl(i,e,n){return`firebase:${i}:${e}:${n}`}class ii{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:u}=this.auth;this.fullUserKey=rl(this.userKey,l.apiKey,u),this.fullPersistenceKey=rl("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ii(pn(gm),e,s);const l=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=l[0]||pn(gm);const d=rl(s,e.config.apiKey,e.name);let f=null;for(const g of n)try{const w=await g._get(d);if(w){const v=fn._fromJSON(e,w);g!==u&&(f=v),u=g;break}}catch{}const m=l.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new ii(u,e,s):(u=m[0],f&&await u._set(d,f.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(d)}catch{}})),new ii(u,e,s))}}function _m(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(R_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A_(e))return"Blackberry";if(O_(e))return"Webos";if(k_(e))return"Safari";if((e.includes("chrome/")||N_(e))&&!e.includes("edge/"))return"Chrome";if(P_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function T_(i=et()){return/firefox\//i.test(i)}function k_(i=et()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N_(i=et()){return/crios\//i.test(i)}function R_(i=et()){return/iemobile/i.test(i)}function P_(i=et()){return/android/i.test(i)}function A_(i=et()){return/blackberry/i.test(i)}function O_(i=et()){return/webos/i.test(i)}function hd(i=et()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function SI(i=et()){var e;return hd(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CI(){return mw()&&document.documentMode===10}function x_(i=et()){return hd(i)||P_(i)||O_(i)||A_(i)||/windows phone/i.test(i)||R_(i)}function D_(i,e=[]){let n;switch(i){case"Browser":n=_m(et());break;case"Worker":n=`${_m(et())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${er}/${s}`}class II{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,f)=>{try{const m=e(u);d(m)}catch(m){f(m)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function TI(i,e={}){return vi(i,"GET","/v2/passwordPolicy",cd(i,e))}const kI=6;class NI{constructor(e){var n,s,l,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:kI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,l,u,d,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(s=m.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(l=m.containsLowercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(u=m.containsUppercaseLetter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(d=m.containsNumericCharacter)!==null&&d!==void 0?d:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class RI{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vm(this),this.idTokenSubscription=new vm(this),this.beforeStateQueue=new II(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pn(n)),this._initializationPromise=this.queue(async()=>{var s,l;if(!this._deleted&&(this.persistenceManager=await ii.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await S_(this,{idToken:e}),s=await fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xt(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=l?._redirectEventId,m=await this.tryRedirectSignIn(e);(!d||d===f)&&m?.user&&(l=m.user,u=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(l)}catch(d){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xt(this.app))return Promise.reject(Er(this));const n=e?Nt(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xt(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xt(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TI(this),n=new NI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kr("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await EI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await ii.create(this,[pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(f,this,"internal-error"),f.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,l);return()=>{d=!0,m()}}else{const m=e.addObserver(n);return()=>{d=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=D_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&sI(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Wl(i){return Nt(i)}class vm{constructor(e){this.auth=e,this.observer=null,this.addObserver=jm(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PI(i){fd=i}function AI(i){return fd.loadJS(i)}function OI(){return fd.gapiScript}function xI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}function DI(i,e){const n=Rs(i,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(cl(u,e??{}))return l;en(l,"already-initialized")}return n.initialize({options:e})}function LI(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(pn);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function MI(i,e,n){const s=Wl(i);Q(s._canInitEmulator,s,"emulator-config-failed"),Q(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,u=L_(e),{host:d,port:f}=bI(e),m=f===null?"":`:${f}`;s.config.emulator={url:`${u}//${d}${m}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:d,port:f,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})}),FI()}function L_(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function bI(i){const e=L_(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const u=l[1];return{host:u,port:ym(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:ym(d)}}}function ym(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function FI(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class M_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hn("not implemented")}_getIdTokenResponse(e){return hn("not implemented")}_linkToIdToken(e,n){return hn("not implemented")}_getReauthenticationResolver(e){return hn("not implemented")}}async function si(i,e){return hI(i,"POST","/v1/accounts:signInWithIdp",cd(i,e))}const UI="http://localhost";class Tr extends M_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Tr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l}=n,u=od(n,["providerId","signInMethod"]);if(!s||!l)return null;const d=new Tr(s,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return si(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,si(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,si(e,n)}buildRequest(){const e={requestUri:UI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pi(n)}return e}}class pd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class bs extends pd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wn extends bs{constructor(){super("facebook.com")}static credential(e){return Tr._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wn.credential(e.oauthAccessToken)}catch{return null}}}Wn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wn.PROVIDER_ID="facebook.com";class cn extends bs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Tr._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cn.credentialFromTaggedObject(e)}static credentialFromError(e){return cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return cn.credential(n,s)}catch{return null}}}cn.GOOGLE_SIGN_IN_METHOD="google.com";cn.PROVIDER_ID="google.com";class Vn extends bs{constructor(){super("github.com")}static credential(e){return Tr._fromParams({providerId:Vn.PROVIDER_ID,signInMethod:Vn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vn.credentialFromTaggedObject(e)}static credentialFromError(e){return Vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vn.credential(e.oauthAccessToken)}catch{return null}}}Vn.GITHUB_SIGN_IN_METHOD="github.com";Vn.PROVIDER_ID="github.com";class Bn extends bs{constructor(){super("twitter.com")}static credential(e,n){return Tr._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Bn.credential(n,s)}catch{return null}}}Bn.TWITTER_SIGN_IN_METHOD="twitter.com";Bn.PROVIDER_ID="twitter.com";class hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const u=await fn._fromIdTokenResponse(e,s,l),d=wm(s);return new hi({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=wm(s);return new hi({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function wm(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class kl extends yn{constructor(e,n,s,l){var u;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,kl.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new kl(e,n,s,l)}}function b_(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?kl._fromErrorAndOperation(i,u,e,s):u})}async function zI(i,e,n=!1){const s=await Ns(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return hi._forOperation(i,"link",s)}async function jI(i,e,n=!1){const{auth:s}=i;if(Xt(s.app))return Promise.reject(Er(s));const l="reauthenticate";try{const u=await Ns(i,b_(s,l,e,i),n);Q(u.idToken,s,"internal-error");const d=dd(u.idToken);Q(d,s,"internal-error");const{sub:f}=d;return Q(i.uid===f,s,"user-mismatch"),hi._forOperation(i,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&en(s,"user-mismatch"),u}}async function WI(i,e,n=!1){if(Xt(i.app))return Promise.reject(Er(i));const s="signIn",l=await b_(i,s,e),u=await hi._fromIdTokenResponse(i,s,l);return n||await i._updateCurrentUser(u.user),u}function VI(i,e,n,s){return Nt(i).onIdTokenChanged(e,n,s)}function BI(i,e,n){return Nt(i).beforeAuthStateChanged(e,n)}const Nl="__sak";class F_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nl,"1"),this.storage.removeItem(Nl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const HI=1e3,$I=10;class U_ extends F_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,f,m)=>{this.notifyListeners(d,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);CI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,$I):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},HI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}U_.type="LOCAL";const GI=U_;class z_ extends F_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}z_.type="SESSION";const j_=z_;function KI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Vl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new Vl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:u}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(d).map(async g=>g(n.origin,u)),m=await KI(f);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vl.receivers=[];function md(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class qI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((f,m)=>{const g=md("",20);l.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(v){const S=v;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),f(S.data.response);break;default:clearTimeout(w),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Jt(){return window}function QI(i){Jt().location.href=i}function W_(){return typeof Jt().WorkerGlobalScope<"u"&&typeof Jt().importScripts=="function"}async function YI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XI(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function JI(){return W_()?self:null}const V_="firebaseLocalStorageDb",ZI=1,Rl="firebaseLocalStorage",B_="fbase_key";class Fs{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bl(i,e){return i.transaction([Rl],e?"readwrite":"readonly").objectStore(Rl)}function eT(){const i=indexedDB.deleteDatabase(V_);return new Fs(i).toPromise()}function wc(){const i=indexedDB.open(V_,ZI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Rl,{keyPath:B_})}catch(l){n(l)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Rl)?e(s):(s.close(),await eT(),e(await wc()))})})}async function Em(i,e,n){const s=Bl(i,!0).put({[B_]:e,value:n});return new Fs(s).toPromise()}async function tT(i,e){const n=Bl(i,!1).get(e),s=await new Fs(n).toPromise();return s===void 0?null:s.value}function Sm(i,e){const n=Bl(i,!0).delete(e);return new Fs(n).toPromise()}const nT=800,rT=3;class H_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>rT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return W_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vl._getInstance(JI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await YI(),!this.activeServiceWorker)return;this.sender=new qI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wc();return await Em(e,Nl,"1"),await Sm(e,Nl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Em(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>tT(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Bl(l,!1).getAll();return new Fs(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H_.type="LOCAL";const iT=H_;new Ms(3e4,6e4);function $_(i,e){return e?pn(e):(Q(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class gd extends M_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sT(i){return WI(i.auth,new gd(i),i.bypassAuthState)}function oT(i){const{auth:e,user:n}=i;return Q(n,e,"internal-error"),jI(n,new gd(i),i.bypassAuthState)}async function lT(i){const{auth:e,user:n}=i;return Q(n,e,"internal-error"),zI(n,new gd(i),i.bypassAuthState)}class G_{constructor(e,n,s,l,u=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:u,error:d,type:f}=e;if(d){this.reject(d);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sT;case"linkViaPopup":case"linkViaRedirect":return lT;case"reauthViaPopup":case"reauthViaRedirect":return oT;default:en(this.auth,"internal-error")}}resolve(e){vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aT=new Ms(2e3,1e4);async function uT(i,e,n){if(Xt(i.app))return Promise.reject(Vt(i,"operation-not-supported-in-this-environment"));const s=Wl(i);oI(i,e,pd);const l=$_(s,n);return new yr(s,"signInViaPopup",e,l).executeNotNull()}class yr extends G_{constructor(e,n,s,l,u){super(e,n,l,u),this.provider=s,this.authWindow=null,this.pollId=null,yr.currentPopupAction&&yr.currentPopupAction.cancel(),yr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){vn(this.filter.length===1,"Popup operations only handle one event");const e=md();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aT.get())};e()}}yr.currentPopupAction=null;const cT="pendingRedirect",il=new Map;class dT extends G_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=il.get(this.auth._key());if(!e){try{const s=await hT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}il.set(this.auth._key(),e)}return this.bypassAuthState||il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hT(i,e){const n=mT(e),s=pT(i);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function fT(i,e){il.set(i._key(),e)}function pT(i){return pn(i._redirectPersistence)}function mT(i){return rl(cT,i.config.apiKey,i.name)}async function gT(i,e,n=!1){if(Xt(i.app))return Promise.reject(Er(i));const s=Wl(i),l=$_(s,e),d=await new dT(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const _T=600*1e3;class vT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yT(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!K_(e)){const l=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Vt(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_T&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cm(e))}saveEventToCache(e){this.cachedEventUids.add(Cm(e)),this.lastProcessedEventTime=Date.now()}}function Cm(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function K_({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function yT(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K_(i);default:return!1}}async function wT(i,e={}){return vi(i,"GET","/v1/projects",e)}const ET=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ST=/^https?/;async function CT(i){if(i.config.emulator)return;const{authorizedDomains:e}=await wT(i);for(const n of e)try{if(IT(n))return}catch{}en(i,"unauthorized-domain")}function IT(i){const e=vc(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!ST.test(n))return!1;if(ET.test(i))return s===i;const l=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}const TT=new Ms(3e4,6e4);function Im(){const i=Jt().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function kT(i){return new Promise((e,n)=>{var s,l,u;function d(){Im(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Im(),n(Vt(i,"network-request-failed"))},timeout:TT.get()})}if(!((l=(s=Jt().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((u=Jt().gapi)===null||u===void 0)&&u.load)d();else{const f=xI("iframefcb");return Jt()[f]=()=>{gapi.load?d():n(Vt(i,"network-request-failed"))},AI(`${OI()}?onload=${f}`).catch(m=>n(m))}}).catch(e=>{throw sl=null,e})}let sl=null;function NT(i){return sl=sl||kT(i),sl}const RT=new Ms(5e3,15e3),PT="__/auth/iframe",AT="emulator/auth/iframe",OT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DT(i){const e=i.config;Q(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?ud(e,AT):`https://${i.config.authDomain}/${PT}`,s={apiKey:e.apiKey,appName:i.name,v:er},l=xT.get(i.config.apiHost);l&&(s.eid=l);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${pi(s).slice(1)}`}async function LT(i){const e=await NT(i),n=Jt().gapi;return Q(n,i,"internal-error"),e.open({where:document.body,url:DT(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OT,dontclear:!0},s=>new Promise(async(l,u)=>{await s.restyle({setHideOnLeave:!1});const d=Vt(i,"network-request-failed"),f=Jt().setTimeout(()=>{u(d)},RT.get());function m(){Jt().clearTimeout(f),l(s)}s.ping(m).then(m,()=>{u(d)})}))}const MT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bT=500,FT=600,UT="_blank",zT="http://localhost";class Tm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jT(i,e,n,s=bT,l=FT){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m=Object.assign(Object.assign({},MT),{width:s.toString(),height:l.toString(),top:u,left:d}),g=et().toLowerCase();n&&(f=N_(g)?UT:n),T_(g)&&(e=e||zT,m.scrollbars="yes");const w=Object.entries(m).reduce((S,[O,M])=>`${S}${O}=${M},`,"");if(SI(g)&&f!=="_self")return WT(e||"",f),new Tm(null);const v=window.open(e||"",f,w);Q(v,i,"popup-blocked");try{v.focus()}catch{}return new Tm(v)}function WT(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const VT="__/auth/handler",BT="emulator/auth/handler",HT=encodeURIComponent("fac");async function km(i,e,n,s,l,u){Q(i.config.authDomain,i,"auth-domain-config-required"),Q(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:er,eventId:l};if(e instanceof pd){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",nc(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,v]of Object.entries({}))d[w]=v}if(e instanceof bs){const w=e.getScopes().filter(v=>v!=="");w.length>0&&(d.scopes=w.join(","))}i.tenantId&&(d.tid=i.tenantId);const f=d;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const m=await i._getAppCheckToken(),g=m?`#${HT}=${encodeURIComponent(m)}`:"";return`${$T(i)}?${pi(f).slice(1)}${g}`}function $T({config:i}){return i.emulator?ud(i,BT):`https://${i.authDomain}/${VT}`}const tc="webStorageSupport";class GT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j_,this._completeRedirectFn=gT,this._overrideRedirectResult=fT}async _openPopup(e,n,s,l){var u;vn((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await km(e,n,s,vc(),l);return jT(e,d,md())}async _openRedirect(e,n,s,l){await this._originValidation(e);const u=await km(e,n,s,vc(),l);return QI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(vn(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await LT(e),s=new vT(e);return n.register("authEvent",l=>(Q(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tc,{type:tc},l=>{var u;const d=(u=l?.[0])===null||u===void 0?void 0:u[tc];d!==void 0&&n(!!d),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CT(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return x_()||k_()||hd()}}const KT=GT;var Nm="@firebase/auth",Rm="1.7.9";class qT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function QT(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YT(i){Yn(new Kn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Q(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:d,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:D_(i)},g=new RI(s,l,u,m);return LI(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Yn(new Kn("auth-internal",e=>{const n=Wl(e.getProvider("auth").getImmediate());return(s=>new qT(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jt(Nm,Rm,QT(i)),jt(Nm,Rm,"esm2017")}const XT=300,JT=bm("authIdTokenMaxAge")||XT;let Pm=null;const ZT=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>JT)return;const l=n?.token;Pm!==l&&(Pm=l,await fetch(i,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function ek(i=Pc()){const e=Rs(i,"auth");if(e.isInitialized())return e.getImmediate();const n=DI(i,{popupRedirectResolver:KT,persistence:[iT,GI,j_]}),s=bm("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=ZT(u.toString());BI(n,d,()=>d(n.currentUser)),VI(n,f=>d(f))}}const l=Lm("auth");return l&&MI(n,`http://${l}`),n}function tk(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}PI({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=l=>{const u=Vt("internal-error");u.customData=l,n(u)},s.type="text/javascript",s.charset="UTF-8",tk().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YT("Browser");const nk={apiKey:"AIzaSyClROcctTLva8nMlP7R-AzuueGiz_9U8J8",authDomain:"focus-d94c9.firebaseapp.com",databaseURL:"https://focus-d94c9-default-rtdb.firebaseio.com",projectId:"focus-d94c9",storageBucket:"focus-d94c9.appspot.com",messagingSenderId:"204472118325",appId:"1:204472118325:web:c32bf0ffc0c31c55f2d57c",measurementId:"G-1P61N0LJG3"};oc.apps.length||oc.initializeApp(nk);const rk=tI(),Zo=ek(),ik=new cn,ol=async i=>{Zo.currentUser||await uT(Zo,ik);const e=(...f)=>GC(rk,["users",Zo.currentUser?.uid,...f].join("/")),n=(f="today",m=-10)=>f instanceof Date?f.toISOString().slice(0,10):new Date(Date.now()+36e5*m).toISOString().slice(0,10),s=(await hm(e("days"))).val(),l=(await hm(e("tasks"))).val();return s==null?(await tl(e(),{days:{[n("today")]:{goal:3600,done:0}}}),ol(i)):{day:(f,m=0,g=null)=>{const w=s[n(f)],v=(w?.done||0)+m,S=g||w?.goal||3600;return m>0&&(tl(e("days",n(f)),{goal:g,done:v}).then(async()=>i(await ol(i))),console.log({when:f,add:m,goal:g,done:v,g:S})),{done:v,goal:S}},task:(f,m,g=0,w)=>{const v=l[n(f)]||{};if(m==null)return v;const S=(v?.done||0)+g;w||v?.goal,(w==null?KC(e("tasks",n(f),m)):tl(e("tasks",n(f)),{goal:w,done:S,body:m})).then(async()=>i(await ol(i)))},logout:Zo.signOut}},sk=()=>{const[i,e]=wr.useState(null),n=async()=>e(await ol(e));return Y.jsx(Y.Fragment,{children:i==null?Y.jsxs("section",{children:[Y.jsx("h1",{children:"Focus."}),Y.jsx("button",{onClick:n,children:" LOGIN WITH GOOGLE "})]}):Y.jsxs(Y.Fragment,{children:[Y.jsx("section",{children:Y.jsx(tw,{user:i})}),Y.jsx("section",{children:Y.jsx(nw,{user:i})})]})})},ok=ew.createRoot(document.getElementById("root"));ok.render(Y.jsx(sk,{}));
